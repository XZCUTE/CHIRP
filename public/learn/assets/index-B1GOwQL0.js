function g_(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function y_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Pp={exports:{}},ml={},Ap={exports:{}},W={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vi=Symbol.for("react.element"),v_=Symbol.for("react.portal"),__=Symbol.for("react.fragment"),x_=Symbol.for("react.strict_mode"),w_=Symbol.for("react.profiler"),S_=Symbol.for("react.provider"),b_=Symbol.for("react.context"),E_=Symbol.for("react.forward_ref"),C_=Symbol.for("react.suspense"),k_=Symbol.for("react.memo"),N_=Symbol.for("react.lazy"),Xd=Symbol.iterator;function I_(t){return t===null||typeof t!="object"?null:(t=Xd&&t[Xd]||t["@@iterator"],typeof t=="function"?t:null)}var jp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Dp=Object.assign,Op={};function Yr(t,e,n){this.props=t,this.context=e,this.refs=Op,this.updater=n||jp}Yr.prototype.isReactComponent={};Yr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Yr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Lp(){}Lp.prototype=Yr.prototype;function iu(t,e,n){this.props=t,this.context=e,this.refs=Op,this.updater=n||jp}var ou=iu.prototype=new Lp;ou.constructor=iu;Dp(ou,Yr.prototype);ou.isPureReactComponent=!0;var Jd=Array.isArray,Mp=Object.prototype.hasOwnProperty,lu={current:null},Fp={key:!0,ref:!0,__self:!0,__source:!0};function Up(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Mp.call(e,r)&&!Fp.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var a=Array(l),u=0;u<l;u++)a[u]=arguments[u+2];s.children=a}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:vi,type:t,key:i,ref:o,props:s,_owner:lu.current}}function T_(t,e){return{$$typeof:vi,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function au(t){return typeof t=="object"&&t!==null&&t.$$typeof===vi}function R_(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Zd=/\/+/g;function Ql(t,e){return typeof t=="object"&&t!==null&&t.key!=null?R_(""+t.key):e.toString(36)}function ro(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case vi:case v_:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Ql(o,0):r,Jd(s)?(n="",t!=null&&(n=t.replace(Zd,"$&/")+"/"),ro(s,e,n,"",function(u){return u})):s!=null&&(au(s)&&(s=T_(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Zd,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Jd(t))for(var l=0;l<t.length;l++){i=t[l];var a=r+Ql(i,l);o+=ro(i,e,n,a,s)}else if(a=I_(t),typeof a=="function")for(t=a.call(t),l=0;!(i=t.next()).done;)i=i.value,a=r+Ql(i,l++),o+=ro(i,e,n,a,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Mi(t,e,n){if(t==null)return t;var r=[],s=0;return ro(t,r,"","",function(i){return e.call(n,i,s++)}),r}function P_(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Me={current:null},so={transition:null},A_={ReactCurrentDispatcher:Me,ReactCurrentBatchConfig:so,ReactCurrentOwner:lu};function zp(){throw Error("act(...) is not supported in production builds of React.")}W.Children={map:Mi,forEach:function(t,e,n){Mi(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Mi(t,function(){e++}),e},toArray:function(t){return Mi(t,function(e){return e})||[]},only:function(t){if(!au(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};W.Component=Yr;W.Fragment=__;W.Profiler=w_;W.PureComponent=iu;W.StrictMode=x_;W.Suspense=C_;W.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A_;W.act=zp;W.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Dp({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=lu.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)Mp.call(e,a)&&!Fp.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:vi,type:t.type,key:s,ref:i,props:r,_owner:o}};W.createContext=function(t){return t={$$typeof:b_,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:S_,_context:t},t.Consumer=t};W.createElement=Up;W.createFactory=function(t){var e=Up.bind(null,t);return e.type=t,e};W.createRef=function(){return{current:null}};W.forwardRef=function(t){return{$$typeof:E_,render:t}};W.isValidElement=au;W.lazy=function(t){return{$$typeof:N_,_payload:{_status:-1,_result:t},_init:P_}};W.memo=function(t,e){return{$$typeof:k_,type:t,compare:e===void 0?null:e}};W.startTransition=function(t){var e=so.transition;so.transition={};try{t()}finally{so.transition=e}};W.unstable_act=zp;W.useCallback=function(t,e){return Me.current.useCallback(t,e)};W.useContext=function(t){return Me.current.useContext(t)};W.useDebugValue=function(){};W.useDeferredValue=function(t){return Me.current.useDeferredValue(t)};W.useEffect=function(t,e){return Me.current.useEffect(t,e)};W.useId=function(){return Me.current.useId()};W.useImperativeHandle=function(t,e,n){return Me.current.useImperativeHandle(t,e,n)};W.useInsertionEffect=function(t,e){return Me.current.useInsertionEffect(t,e)};W.useLayoutEffect=function(t,e){return Me.current.useLayoutEffect(t,e)};W.useMemo=function(t,e){return Me.current.useMemo(t,e)};W.useReducer=function(t,e,n){return Me.current.useReducer(t,e,n)};W.useRef=function(t){return Me.current.useRef(t)};W.useState=function(t){return Me.current.useState(t)};W.useSyncExternalStore=function(t,e,n){return Me.current.useSyncExternalStore(t,e,n)};W.useTransition=function(){return Me.current.useTransition()};W.version="18.3.1";Ap.exports=W;var b=Ap.exports;const Bp=y_(b),j_=g_({__proto__:null,default:Bp},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D_=b,O_=Symbol.for("react.element"),L_=Symbol.for("react.fragment"),M_=Object.prototype.hasOwnProperty,F_=D_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,U_={key:!0,ref:!0,__self:!0,__source:!0};function Wp(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)M_.call(e,r)&&!U_.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:O_,type:t,key:i,ref:o,props:s,_owner:F_.current}}ml.Fragment=L_;ml.jsx=Wp;ml.jsxs=Wp;Pp.exports=ml;var c=Pp.exports,La={},$p={exports:{}},Xe={},Hp={exports:{}},Vp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(R,F){var U=R.length;R.push(F);e:for(;0<U;){var ae=U-1>>>1,ye=R[ae];if(0<s(ye,F))R[ae]=F,R[U]=ye,U=ae;else break e}}function n(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var F=R[0],U=R.pop();if(U!==F){R[0]=U;e:for(var ae=0,ye=R.length,Oi=ye>>>1;ae<Oi;){var jn=2*(ae+1)-1,Kl=R[jn],Dn=jn+1,Li=R[Dn];if(0>s(Kl,U))Dn<ye&&0>s(Li,Kl)?(R[ae]=Li,R[Dn]=U,ae=Dn):(R[ae]=Kl,R[jn]=U,ae=jn);else if(Dn<ye&&0>s(Li,U))R[ae]=Li,R[Dn]=U,ae=Dn;else break e}}return F}function s(R,F){var U=R.sortIndex-F.sortIndex;return U!==0?U:R.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var a=[],u=[],h=1,d=null,f=3,v=!1,y=!1,_=!1,S=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(R){for(var F=n(u);F!==null;){if(F.callback===null)r(u);else if(F.startTime<=R)r(u),F.sortIndex=F.expirationTime,e(a,F);else break;F=n(u)}}function x(R){if(_=!1,g(R),!y)if(n(a)!==null)y=!0,G(C);else{var F=n(u);F!==null&&Ne(x,F.startTime-R)}}function C(R,F){y=!1,_&&(_=!1,m(N),N=-1),v=!0;var U=f;try{for(g(F),d=n(a);d!==null&&(!(d.expirationTime>F)||R&&!ke());){var ae=d.callback;if(typeof ae=="function"){d.callback=null,f=d.priorityLevel;var ye=ae(d.expirationTime<=F);F=t.unstable_now(),typeof ye=="function"?d.callback=ye:d===n(a)&&r(a),g(F)}else r(a);d=n(a)}if(d!==null)var Oi=!0;else{var jn=n(u);jn!==null&&Ne(x,jn.startTime-F),Oi=!1}return Oi}finally{d=null,f=U,v=!1}}var I=!1,w=null,N=-1,M=5,O=-1;function ke(){return!(t.unstable_now()-O<M)}function T(){if(w!==null){var R=t.unstable_now();O=R;var F=!0;try{F=w(!0,R)}finally{F?A():(I=!1,w=null)}}else I=!1}var A;if(typeof p=="function")A=function(){p(T)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,q=j.port2;j.port1.onmessage=T,A=function(){q.postMessage(null)}}else A=function(){S(T,0)};function G(R){w=R,I||(I=!0,A())}function Ne(R,F){N=S(function(){R(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(R){R.callback=null},t.unstable_continueExecution=function(){y||v||(y=!0,G(C))},t.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<R?Math.floor(1e3/R):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(R){switch(f){case 1:case 2:case 3:var F=3;break;default:F=f}var U=f;f=F;try{return R()}finally{f=U}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(R,F){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var U=f;f=R;try{return F()}finally{f=U}},t.unstable_scheduleCallback=function(R,F,U){var ae=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?ae+U:ae):U=ae,R){case 1:var ye=-1;break;case 2:ye=250;break;case 5:ye=1073741823;break;case 4:ye=1e4;break;default:ye=5e3}return ye=U+ye,R={id:h++,callback:F,priorityLevel:R,startTime:U,expirationTime:ye,sortIndex:-1},U>ae?(R.sortIndex=U,e(u,R),n(a)===null&&R===n(u)&&(_?(m(N),N=-1):_=!0,Ne(x,U-ae))):(R.sortIndex=ye,e(a,R),y||v||(y=!0,G(C))),R},t.unstable_shouldYield=ke,t.unstable_wrapCallback=function(R){var F=f;return function(){var U=f;f=F;try{return R.apply(this,arguments)}finally{f=U}}}})(Vp);Hp.exports=Vp;var z_=Hp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B_=b,Ye=z_;function E(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var qp=new Set,Ws={};function ir(t,e){Mr(t,e),Mr(t+"Capture",e)}function Mr(t,e){for(Ws[t]=e,t=0;t<e.length;t++)qp.add(e[t])}var Ft=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ma=Object.prototype.hasOwnProperty,W_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,eh={},th={};function $_(t){return Ma.call(th,t)?!0:Ma.call(eh,t)?!1:W_.test(t)?th[t]=!0:(eh[t]=!0,!1)}function H_(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function V_(t,e,n,r){if(e===null||typeof e>"u"||H_(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Fe(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Ce={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ce[t]=new Fe(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ce[e]=new Fe(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ce[t]=new Fe(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ce[t]=new Fe(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ce[t]=new Fe(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ce[t]=new Fe(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ce[t]=new Fe(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ce[t]=new Fe(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ce[t]=new Fe(t,5,!1,t.toLowerCase(),null,!1,!1)});var cu=/[\-:]([a-z])/g;function uu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(cu,uu);Ce[e]=new Fe(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(cu,uu);Ce[e]=new Fe(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(cu,uu);Ce[e]=new Fe(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ce[t]=new Fe(t,1,!1,t.toLowerCase(),null,!1,!1)});Ce.xlinkHref=new Fe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ce[t]=new Fe(t,1,!1,t.toLowerCase(),null,!0,!0)});function du(t,e,n,r){var s=Ce.hasOwnProperty(e)?Ce[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(V_(e,n,s,r)&&(n=null),r||s===null?$_(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var qt=B_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fi=Symbol.for("react.element"),hr=Symbol.for("react.portal"),fr=Symbol.for("react.fragment"),hu=Symbol.for("react.strict_mode"),Fa=Symbol.for("react.profiler"),Gp=Symbol.for("react.provider"),Kp=Symbol.for("react.context"),fu=Symbol.for("react.forward_ref"),Ua=Symbol.for("react.suspense"),za=Symbol.for("react.suspense_list"),pu=Symbol.for("react.memo"),Xt=Symbol.for("react.lazy"),Qp=Symbol.for("react.offscreen"),nh=Symbol.iterator;function cs(t){return t===null||typeof t!="object"?null:(t=nh&&t[nh]||t["@@iterator"],typeof t=="function"?t:null)}var ie=Object.assign,Yl;function ws(t){if(Yl===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Yl=e&&e[1]||""}return`
`+Yl+t}var Xl=!1;function Jl(t,e){if(!t||Xl)return"";Xl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var a=`
`+s[o].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=o&&0<=l);break}}}finally{Xl=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ws(t):""}function q_(t){switch(t.tag){case 5:return ws(t.type);case 16:return ws("Lazy");case 13:return ws("Suspense");case 19:return ws("SuspenseList");case 0:case 2:case 15:return t=Jl(t.type,!1),t;case 11:return t=Jl(t.type.render,!1),t;case 1:return t=Jl(t.type,!0),t;default:return""}}function Ba(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case fr:return"Fragment";case hr:return"Portal";case Fa:return"Profiler";case hu:return"StrictMode";case Ua:return"Suspense";case za:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Kp:return(t.displayName||"Context")+".Consumer";case Gp:return(t._context.displayName||"Context")+".Provider";case fu:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case pu:return e=t.displayName||null,e!==null?e:Ba(t.type)||"Memo";case Xt:e=t._payload,t=t._init;try{return Ba(t(e))}catch{}}return null}function G_(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ba(e);case 8:return e===hu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function bn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Yp(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function K_(t){var e=Yp(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ui(t){t._valueTracker||(t._valueTracker=K_(t))}function Xp(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Yp(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function So(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Wa(t,e){var n=e.checked;return ie({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function rh(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=bn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Jp(t,e){e=e.checked,e!=null&&du(t,"checked",e,!1)}function $a(t,e){Jp(t,e);var n=bn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ha(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ha(t,e.type,bn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function sh(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ha(t,e,n){(e!=="number"||So(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ss=Array.isArray;function kr(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+bn(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Va(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(E(91));return ie({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ih(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(E(92));if(Ss(n)){if(1<n.length)throw Error(E(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:bn(n)}}function Zp(t,e){var n=bn(e.value),r=bn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function oh(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function em(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qa(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?em(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var zi,tm=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(zi=zi||document.createElement("div"),zi.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=zi.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function $s(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Cs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Q_=["Webkit","ms","Moz","O"];Object.keys(Cs).forEach(function(t){Q_.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Cs[e]=Cs[t]})});function nm(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Cs.hasOwnProperty(t)&&Cs[t]?(""+e).trim():e+"px"}function rm(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=nm(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Y_=ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ga(t,e){if(e){if(Y_[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(E(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(E(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(E(61))}if(e.style!=null&&typeof e.style!="object")throw Error(E(62))}}function Ka(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qa=null;function mu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ya=null,Nr=null,Ir=null;function lh(t){if(t=wi(t)){if(typeof Ya!="function")throw Error(E(280));var e=t.stateNode;e&&(e=xl(e),Ya(t.stateNode,t.type,e))}}function sm(t){Nr?Ir?Ir.push(t):Ir=[t]:Nr=t}function im(){if(Nr){var t=Nr,e=Ir;if(Ir=Nr=null,lh(t),e)for(t=0;t<e.length;t++)lh(e[t])}}function om(t,e){return t(e)}function lm(){}var Zl=!1;function am(t,e,n){if(Zl)return t(e,n);Zl=!0;try{return om(t,e,n)}finally{Zl=!1,(Nr!==null||Ir!==null)&&(lm(),im())}}function Hs(t,e){var n=t.stateNode;if(n===null)return null;var r=xl(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(E(231,e,typeof n));return n}var Xa=!1;if(Ft)try{var us={};Object.defineProperty(us,"passive",{get:function(){Xa=!0}}),window.addEventListener("test",us,us),window.removeEventListener("test",us,us)}catch{Xa=!1}function X_(t,e,n,r,s,i,o,l,a){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var ks=!1,bo=null,Eo=!1,Ja=null,J_={onError:function(t){ks=!0,bo=t}};function Z_(t,e,n,r,s,i,o,l,a){ks=!1,bo=null,X_.apply(J_,arguments)}function e0(t,e,n,r,s,i,o,l,a){if(Z_.apply(this,arguments),ks){if(ks){var u=bo;ks=!1,bo=null}else throw Error(E(198));Eo||(Eo=!0,Ja=u)}}function or(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function cm(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ah(t){if(or(t)!==t)throw Error(E(188))}function t0(t){var e=t.alternate;if(!e){if(e=or(t),e===null)throw Error(E(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return ah(s),t;if(i===r)return ah(s),e;i=i.sibling}throw Error(E(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(E(189))}}if(n.alternate!==r)throw Error(E(190))}if(n.tag!==3)throw Error(E(188));return n.stateNode.current===n?t:e}function um(t){return t=t0(t),t!==null?dm(t):null}function dm(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=dm(t);if(e!==null)return e;t=t.sibling}return null}var hm=Ye.unstable_scheduleCallback,ch=Ye.unstable_cancelCallback,n0=Ye.unstable_shouldYield,r0=Ye.unstable_requestPaint,ue=Ye.unstable_now,s0=Ye.unstable_getCurrentPriorityLevel,gu=Ye.unstable_ImmediatePriority,fm=Ye.unstable_UserBlockingPriority,Co=Ye.unstable_NormalPriority,i0=Ye.unstable_LowPriority,pm=Ye.unstable_IdlePriority,gl=null,bt=null;function o0(t){if(bt&&typeof bt.onCommitFiberRoot=="function")try{bt.onCommitFiberRoot(gl,t,void 0,(t.current.flags&128)===128)}catch{}}var pt=Math.clz32?Math.clz32:c0,l0=Math.log,a0=Math.LN2;function c0(t){return t>>>=0,t===0?32:31-(l0(t)/a0|0)|0}var Bi=64,Wi=4194304;function bs(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ko(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=bs(l):(i&=o,i!==0&&(r=bs(i)))}else o=n&~s,o!==0?r=bs(o):i!==0&&(r=bs(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-pt(e),s=1<<n,r|=t[n],e&=~s;return r}function u0(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function d0(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-pt(i),l=1<<o,a=s[o];a===-1?(!(l&n)||l&r)&&(s[o]=u0(l,e)):a<=e&&(t.expiredLanes|=l),i&=~l}}function Za(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function mm(){var t=Bi;return Bi<<=1,!(Bi&4194240)&&(Bi=64),t}function ea(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function _i(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-pt(e),t[e]=n}function h0(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-pt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function yu(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-pt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var K=0;function gm(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ym,vu,vm,_m,xm,ec=!1,$i=[],cn=null,un=null,dn=null,Vs=new Map,qs=new Map,Zt=[],f0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function uh(t,e){switch(t){case"focusin":case"focusout":cn=null;break;case"dragenter":case"dragleave":un=null;break;case"mouseover":case"mouseout":dn=null;break;case"pointerover":case"pointerout":Vs.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":qs.delete(e.pointerId)}}function ds(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=wi(e),e!==null&&vu(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function p0(t,e,n,r,s){switch(e){case"focusin":return cn=ds(cn,t,e,n,r,s),!0;case"dragenter":return un=ds(un,t,e,n,r,s),!0;case"mouseover":return dn=ds(dn,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Vs.set(i,ds(Vs.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,qs.set(i,ds(qs.get(i)||null,t,e,n,r,s)),!0}return!1}function wm(t){var e=Un(t.target);if(e!==null){var n=or(e);if(n!==null){if(e=n.tag,e===13){if(e=cm(n),e!==null){t.blockedOn=e,xm(t.priority,function(){vm(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function io(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=tc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Qa=r,n.target.dispatchEvent(r),Qa=null}else return e=wi(n),e!==null&&vu(e),t.blockedOn=n,!1;e.shift()}return!0}function dh(t,e,n){io(t)&&n.delete(e)}function m0(){ec=!1,cn!==null&&io(cn)&&(cn=null),un!==null&&io(un)&&(un=null),dn!==null&&io(dn)&&(dn=null),Vs.forEach(dh),qs.forEach(dh)}function hs(t,e){t.blockedOn===e&&(t.blockedOn=null,ec||(ec=!0,Ye.unstable_scheduleCallback(Ye.unstable_NormalPriority,m0)))}function Gs(t){function e(s){return hs(s,t)}if(0<$i.length){hs($i[0],t);for(var n=1;n<$i.length;n++){var r=$i[n];r.blockedOn===t&&(r.blockedOn=null)}}for(cn!==null&&hs(cn,t),un!==null&&hs(un,t),dn!==null&&hs(dn,t),Vs.forEach(e),qs.forEach(e),n=0;n<Zt.length;n++)r=Zt[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Zt.length&&(n=Zt[0],n.blockedOn===null);)wm(n),n.blockedOn===null&&Zt.shift()}var Tr=qt.ReactCurrentBatchConfig,No=!0;function g0(t,e,n,r){var s=K,i=Tr.transition;Tr.transition=null;try{K=1,_u(t,e,n,r)}finally{K=s,Tr.transition=i}}function y0(t,e,n,r){var s=K,i=Tr.transition;Tr.transition=null;try{K=4,_u(t,e,n,r)}finally{K=s,Tr.transition=i}}function _u(t,e,n,r){if(No){var s=tc(t,e,n,r);if(s===null)ua(t,e,r,Io,n),uh(t,r);else if(p0(s,t,e,n,r))r.stopPropagation();else if(uh(t,r),e&4&&-1<f0.indexOf(t)){for(;s!==null;){var i=wi(s);if(i!==null&&ym(i),i=tc(t,e,n,r),i===null&&ua(t,e,r,Io,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else ua(t,e,r,null,n)}}var Io=null;function tc(t,e,n,r){if(Io=null,t=mu(r),t=Un(t),t!==null)if(e=or(t),e===null)t=null;else if(n=e.tag,n===13){if(t=cm(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Io=t,null}function Sm(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(s0()){case gu:return 1;case fm:return 4;case Co:case i0:return 16;case pm:return 536870912;default:return 16}default:return 16}}var on=null,xu=null,oo=null;function bm(){if(oo)return oo;var t,e=xu,n=e.length,r,s="value"in on?on.value:on.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return oo=s.slice(t,1<r?1-r:void 0)}function lo(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Hi(){return!0}function hh(){return!1}function Je(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Hi:hh,this.isPropagationStopped=hh,this}return ie(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Hi)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Hi)},persist:function(){},isPersistent:Hi}),e}var Xr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wu=Je(Xr),xi=ie({},Xr,{view:0,detail:0}),v0=Je(xi),ta,na,fs,yl=ie({},xi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Su,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==fs&&(fs&&t.type==="mousemove"?(ta=t.screenX-fs.screenX,na=t.screenY-fs.screenY):na=ta=0,fs=t),ta)},movementY:function(t){return"movementY"in t?t.movementY:na}}),fh=Je(yl),_0=ie({},yl,{dataTransfer:0}),x0=Je(_0),w0=ie({},xi,{relatedTarget:0}),ra=Je(w0),S0=ie({},Xr,{animationName:0,elapsedTime:0,pseudoElement:0}),b0=Je(S0),E0=ie({},Xr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),C0=Je(E0),k0=ie({},Xr,{data:0}),ph=Je(k0),N0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},I0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},T0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function R0(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=T0[t])?!!e[t]:!1}function Su(){return R0}var P0=ie({},xi,{key:function(t){if(t.key){var e=N0[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=lo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?I0[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Su,charCode:function(t){return t.type==="keypress"?lo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?lo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),A0=Je(P0),j0=ie({},yl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mh=Je(j0),D0=ie({},xi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Su}),O0=Je(D0),L0=ie({},Xr,{propertyName:0,elapsedTime:0,pseudoElement:0}),M0=Je(L0),F0=ie({},yl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),U0=Je(F0),z0=[9,13,27,32],bu=Ft&&"CompositionEvent"in window,Ns=null;Ft&&"documentMode"in document&&(Ns=document.documentMode);var B0=Ft&&"TextEvent"in window&&!Ns,Em=Ft&&(!bu||Ns&&8<Ns&&11>=Ns),gh=" ",yh=!1;function Cm(t,e){switch(t){case"keyup":return z0.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function km(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var pr=!1;function W0(t,e){switch(t){case"compositionend":return km(e);case"keypress":return e.which!==32?null:(yh=!0,gh);case"textInput":return t=e.data,t===gh&&yh?null:t;default:return null}}function $0(t,e){if(pr)return t==="compositionend"||!bu&&Cm(t,e)?(t=bm(),oo=xu=on=null,pr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Em&&e.locale!=="ko"?null:e.data;default:return null}}var H0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!H0[t.type]:e==="textarea"}function Nm(t,e,n,r){sm(r),e=To(e,"onChange"),0<e.length&&(n=new wu("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Is=null,Ks=null;function V0(t){Fm(t,0)}function vl(t){var e=yr(t);if(Xp(e))return t}function q0(t,e){if(t==="change")return e}var Im=!1;if(Ft){var sa;if(Ft){var ia="oninput"in document;if(!ia){var _h=document.createElement("div");_h.setAttribute("oninput","return;"),ia=typeof _h.oninput=="function"}sa=ia}else sa=!1;Im=sa&&(!document.documentMode||9<document.documentMode)}function xh(){Is&&(Is.detachEvent("onpropertychange",Tm),Ks=Is=null)}function Tm(t){if(t.propertyName==="value"&&vl(Ks)){var e=[];Nm(e,Ks,t,mu(t)),am(V0,e)}}function G0(t,e,n){t==="focusin"?(xh(),Is=e,Ks=n,Is.attachEvent("onpropertychange",Tm)):t==="focusout"&&xh()}function K0(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return vl(Ks)}function Q0(t,e){if(t==="click")return vl(e)}function Y0(t,e){if(t==="input"||t==="change")return vl(e)}function X0(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var vt=typeof Object.is=="function"?Object.is:X0;function Qs(t,e){if(vt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Ma.call(e,s)||!vt(t[s],e[s]))return!1}return!0}function wh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Sh(t,e){var n=wh(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=wh(n)}}function Rm(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Rm(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Pm(){for(var t=window,e=So();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=So(t.document)}return e}function Eu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function J0(t){var e=Pm(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Rm(n.ownerDocument.documentElement,n)){if(r!==null&&Eu(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Sh(n,i);var o=Sh(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Z0=Ft&&"documentMode"in document&&11>=document.documentMode,mr=null,nc=null,Ts=null,rc=!1;function bh(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;rc||mr==null||mr!==So(r)||(r=mr,"selectionStart"in r&&Eu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ts&&Qs(Ts,r)||(Ts=r,r=To(nc,"onSelect"),0<r.length&&(e=new wu("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=mr)))}function Vi(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var gr={animationend:Vi("Animation","AnimationEnd"),animationiteration:Vi("Animation","AnimationIteration"),animationstart:Vi("Animation","AnimationStart"),transitionend:Vi("Transition","TransitionEnd")},oa={},Am={};Ft&&(Am=document.createElement("div").style,"AnimationEvent"in window||(delete gr.animationend.animation,delete gr.animationiteration.animation,delete gr.animationstart.animation),"TransitionEvent"in window||delete gr.transitionend.transition);function _l(t){if(oa[t])return oa[t];if(!gr[t])return t;var e=gr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Am)return oa[t]=e[n];return t}var jm=_l("animationend"),Dm=_l("animationiteration"),Om=_l("animationstart"),Lm=_l("transitionend"),Mm=new Map,Eh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function In(t,e){Mm.set(t,e),ir(e,[t])}for(var la=0;la<Eh.length;la++){var aa=Eh[la],ex=aa.toLowerCase(),tx=aa[0].toUpperCase()+aa.slice(1);In(ex,"on"+tx)}In(jm,"onAnimationEnd");In(Dm,"onAnimationIteration");In(Om,"onAnimationStart");In("dblclick","onDoubleClick");In("focusin","onFocus");In("focusout","onBlur");In(Lm,"onTransitionEnd");Mr("onMouseEnter",["mouseout","mouseover"]);Mr("onMouseLeave",["mouseout","mouseover"]);Mr("onPointerEnter",["pointerout","pointerover"]);Mr("onPointerLeave",["pointerout","pointerover"]);ir("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ir("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ir("onBeforeInput",["compositionend","keypress","textInput","paste"]);ir("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ir("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ir("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Es="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Es));function Ch(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,e0(r,e,void 0,t),t.currentTarget=null}function Fm(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,u=l.currentTarget;if(l=l.listener,a!==i&&s.isPropagationStopped())break e;Ch(s,l,u),i=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,u=l.currentTarget,l=l.listener,a!==i&&s.isPropagationStopped())break e;Ch(s,l,u),i=a}}}if(Eo)throw t=Ja,Eo=!1,Ja=null,t}function Z(t,e){var n=e[ac];n===void 0&&(n=e[ac]=new Set);var r=t+"__bubble";n.has(r)||(Um(e,t,2,!1),n.add(r))}function ca(t,e,n){var r=0;e&&(r|=4),Um(n,t,r,e)}var qi="_reactListening"+Math.random().toString(36).slice(2);function Ys(t){if(!t[qi]){t[qi]=!0,qp.forEach(function(n){n!=="selectionchange"&&(nx.has(n)||ca(n,!1,t),ca(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[qi]||(e[qi]=!0,ca("selectionchange",!1,e))}}function Um(t,e,n,r){switch(Sm(e)){case 1:var s=g0;break;case 4:s=y0;break;default:s=_u}n=s.bind(null,e,n,t),s=void 0,!Xa||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function ua(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===s||a.nodeType===8&&a.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Un(l),o===null)return;if(a=o.tag,a===5||a===6){r=i=o;continue e}l=l.parentNode}}r=r.return}am(function(){var u=i,h=mu(n),d=[];e:{var f=Mm.get(t);if(f!==void 0){var v=wu,y=t;switch(t){case"keypress":if(lo(n)===0)break e;case"keydown":case"keyup":v=A0;break;case"focusin":y="focus",v=ra;break;case"focusout":y="blur",v=ra;break;case"beforeblur":case"afterblur":v=ra;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=fh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=x0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=O0;break;case jm:case Dm:case Om:v=b0;break;case Lm:v=M0;break;case"scroll":v=v0;break;case"wheel":v=U0;break;case"copy":case"cut":case"paste":v=C0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=mh}var _=(e&4)!==0,S=!_&&t==="scroll",m=_?f!==null?f+"Capture":null:f;_=[];for(var p=u,g;p!==null;){g=p;var x=g.stateNode;if(g.tag===5&&x!==null&&(g=x,m!==null&&(x=Hs(p,m),x!=null&&_.push(Xs(p,x,g)))),S)break;p=p.return}0<_.length&&(f=new v(f,y,null,n,h),d.push({event:f,listeners:_}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",f&&n!==Qa&&(y=n.relatedTarget||n.fromElement)&&(Un(y)||y[Ut]))break e;if((v||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,v?(y=n.relatedTarget||n.toElement,v=u,y=y?Un(y):null,y!==null&&(S=or(y),y!==S||y.tag!==5&&y.tag!==6)&&(y=null)):(v=null,y=u),v!==y)){if(_=fh,x="onMouseLeave",m="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(_=mh,x="onPointerLeave",m="onPointerEnter",p="pointer"),S=v==null?f:yr(v),g=y==null?f:yr(y),f=new _(x,p+"leave",v,n,h),f.target=S,f.relatedTarget=g,x=null,Un(h)===u&&(_=new _(m,p+"enter",y,n,h),_.target=g,_.relatedTarget=S,x=_),S=x,v&&y)t:{for(_=v,m=y,p=0,g=_;g;g=ur(g))p++;for(g=0,x=m;x;x=ur(x))g++;for(;0<p-g;)_=ur(_),p--;for(;0<g-p;)m=ur(m),g--;for(;p--;){if(_===m||m!==null&&_===m.alternate)break t;_=ur(_),m=ur(m)}_=null}else _=null;v!==null&&kh(d,f,v,_,!1),y!==null&&S!==null&&kh(d,S,y,_,!0)}}e:{if(f=u?yr(u):window,v=f.nodeName&&f.nodeName.toLowerCase(),v==="select"||v==="input"&&f.type==="file")var C=q0;else if(vh(f))if(Im)C=Y0;else{C=K0;var I=G0}else(v=f.nodeName)&&v.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(C=Q0);if(C&&(C=C(t,u))){Nm(d,C,n,h);break e}I&&I(t,f,u),t==="focusout"&&(I=f._wrapperState)&&I.controlled&&f.type==="number"&&Ha(f,"number",f.value)}switch(I=u?yr(u):window,t){case"focusin":(vh(I)||I.contentEditable==="true")&&(mr=I,nc=u,Ts=null);break;case"focusout":Ts=nc=mr=null;break;case"mousedown":rc=!0;break;case"contextmenu":case"mouseup":case"dragend":rc=!1,bh(d,n,h);break;case"selectionchange":if(Z0)break;case"keydown":case"keyup":bh(d,n,h)}var w;if(bu)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else pr?Cm(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(Em&&n.locale!=="ko"&&(pr||N!=="onCompositionStart"?N==="onCompositionEnd"&&pr&&(w=bm()):(on=h,xu="value"in on?on.value:on.textContent,pr=!0)),I=To(u,N),0<I.length&&(N=new ph(N,t,null,n,h),d.push({event:N,listeners:I}),w?N.data=w:(w=km(n),w!==null&&(N.data=w)))),(w=B0?W0(t,n):$0(t,n))&&(u=To(u,"onBeforeInput"),0<u.length&&(h=new ph("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:u}),h.data=w))}Fm(d,e)})}function Xs(t,e,n){return{instance:t,listener:e,currentTarget:n}}function To(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Hs(t,n),i!=null&&r.unshift(Xs(t,i,s)),i=Hs(t,e),i!=null&&r.push(Xs(t,i,s))),t=t.return}return r}function ur(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function kh(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,u=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&u!==null&&(l=u,s?(a=Hs(n,i),a!=null&&o.unshift(Xs(n,a,l))):s||(a=Hs(n,i),a!=null&&o.push(Xs(n,a,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var rx=/\r\n?/g,sx=/\u0000|\uFFFD/g;function Nh(t){return(typeof t=="string"?t:""+t).replace(rx,`
`).replace(sx,"")}function Gi(t,e,n){if(e=Nh(e),Nh(t)!==e&&n)throw Error(E(425))}function Ro(){}var sc=null,ic=null;function oc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var lc=typeof setTimeout=="function"?setTimeout:void 0,ix=typeof clearTimeout=="function"?clearTimeout:void 0,Ih=typeof Promise=="function"?Promise:void 0,ox=typeof queueMicrotask=="function"?queueMicrotask:typeof Ih<"u"?function(t){return Ih.resolve(null).then(t).catch(lx)}:lc;function lx(t){setTimeout(function(){throw t})}function da(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Gs(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Gs(e)}function hn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Th(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Jr=Math.random().toString(36).slice(2),wt="__reactFiber$"+Jr,Js="__reactProps$"+Jr,Ut="__reactContainer$"+Jr,ac="__reactEvents$"+Jr,ax="__reactListeners$"+Jr,cx="__reactHandles$"+Jr;function Un(t){var e=t[wt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ut]||n[wt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Th(t);t!==null;){if(n=t[wt])return n;t=Th(t)}return e}t=n,n=t.parentNode}return null}function wi(t){return t=t[wt]||t[Ut],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function yr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(E(33))}function xl(t){return t[Js]||null}var cc=[],vr=-1;function Tn(t){return{current:t}}function te(t){0>vr||(t.current=cc[vr],cc[vr]=null,vr--)}function J(t,e){vr++,cc[vr]=t.current,t.current=e}var En={},Ae=Tn(En),We=Tn(!1),Kn=En;function Fr(t,e){var n=t.type.contextTypes;if(!n)return En;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function $e(t){return t=t.childContextTypes,t!=null}function Po(){te(We),te(Ae)}function Rh(t,e,n){if(Ae.current!==En)throw Error(E(168));J(Ae,e),J(We,n)}function zm(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(E(108,G_(t)||"Unknown",s));return ie({},n,r)}function Ao(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||En,Kn=Ae.current,J(Ae,t),J(We,We.current),!0}function Ph(t,e,n){var r=t.stateNode;if(!r)throw Error(E(169));n?(t=zm(t,e,Kn),r.__reactInternalMemoizedMergedChildContext=t,te(We),te(Ae),J(Ae,t)):te(We),J(We,n)}var Rt=null,wl=!1,ha=!1;function Bm(t){Rt===null?Rt=[t]:Rt.push(t)}function ux(t){wl=!0,Bm(t)}function Rn(){if(!ha&&Rt!==null){ha=!0;var t=0,e=K;try{var n=Rt;for(K=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Rt=null,wl=!1}catch(s){throw Rt!==null&&(Rt=Rt.slice(t+1)),hm(gu,Rn),s}finally{K=e,ha=!1}}return null}var _r=[],xr=0,jo=null,Do=0,Ze=[],et=0,Qn=null,Pt=1,At="";function On(t,e){_r[xr++]=Do,_r[xr++]=jo,jo=t,Do=e}function Wm(t,e,n){Ze[et++]=Pt,Ze[et++]=At,Ze[et++]=Qn,Qn=t;var r=Pt;t=At;var s=32-pt(r)-1;r&=~(1<<s),n+=1;var i=32-pt(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Pt=1<<32-pt(e)+s|n<<s|r,At=i+t}else Pt=1<<i|n<<s|r,At=t}function Cu(t){t.return!==null&&(On(t,1),Wm(t,1,0))}function ku(t){for(;t===jo;)jo=_r[--xr],_r[xr]=null,Do=_r[--xr],_r[xr]=null;for(;t===Qn;)Qn=Ze[--et],Ze[et]=null,At=Ze[--et],Ze[et]=null,Pt=Ze[--et],Ze[et]=null}var Qe=null,Ke=null,ne=!1,ct=null;function $m(t,e){var n=tt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ah(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Qe=t,Ke=hn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Qe=t,Ke=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Qn!==null?{id:Pt,overflow:At}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=tt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Qe=t,Ke=null,!0):!1;default:return!1}}function uc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function dc(t){if(ne){var e=Ke;if(e){var n=e;if(!Ah(t,e)){if(uc(t))throw Error(E(418));e=hn(n.nextSibling);var r=Qe;e&&Ah(t,e)?$m(r,n):(t.flags=t.flags&-4097|2,ne=!1,Qe=t)}}else{if(uc(t))throw Error(E(418));t.flags=t.flags&-4097|2,ne=!1,Qe=t}}}function jh(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Qe=t}function Ki(t){if(t!==Qe)return!1;if(!ne)return jh(t),ne=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!oc(t.type,t.memoizedProps)),e&&(e=Ke)){if(uc(t))throw Hm(),Error(E(418));for(;e;)$m(t,e),e=hn(e.nextSibling)}if(jh(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(E(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ke=hn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ke=null}}else Ke=Qe?hn(t.stateNode.nextSibling):null;return!0}function Hm(){for(var t=Ke;t;)t=hn(t.nextSibling)}function Ur(){Ke=Qe=null,ne=!1}function Nu(t){ct===null?ct=[t]:ct.push(t)}var dx=qt.ReactCurrentBatchConfig;function ps(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(E(309));var r=n.stateNode}if(!r)throw Error(E(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(E(284));if(!n._owner)throw Error(E(290,t))}return t}function Qi(t,e){throw t=Object.prototype.toString.call(e),Error(E(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Dh(t){var e=t._init;return e(t._payload)}function Vm(t){function e(m,p){if(t){var g=m.deletions;g===null?(m.deletions=[p],m.flags|=16):g.push(p)}}function n(m,p){if(!t)return null;for(;p!==null;)e(m,p),p=p.sibling;return null}function r(m,p){for(m=new Map;p!==null;)p.key!==null?m.set(p.key,p):m.set(p.index,p),p=p.sibling;return m}function s(m,p){return m=gn(m,p),m.index=0,m.sibling=null,m}function i(m,p,g){return m.index=g,t?(g=m.alternate,g!==null?(g=g.index,g<p?(m.flags|=2,p):g):(m.flags|=2,p)):(m.flags|=1048576,p)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function l(m,p,g,x){return p===null||p.tag!==6?(p=_a(g,m.mode,x),p.return=m,p):(p=s(p,g),p.return=m,p)}function a(m,p,g,x){var C=g.type;return C===fr?h(m,p,g.props.children,x,g.key):p!==null&&(p.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Xt&&Dh(C)===p.type)?(x=s(p,g.props),x.ref=ps(m,p,g),x.return=m,x):(x=mo(g.type,g.key,g.props,null,m.mode,x),x.ref=ps(m,p,g),x.return=m,x)}function u(m,p,g,x){return p===null||p.tag!==4||p.stateNode.containerInfo!==g.containerInfo||p.stateNode.implementation!==g.implementation?(p=xa(g,m.mode,x),p.return=m,p):(p=s(p,g.children||[]),p.return=m,p)}function h(m,p,g,x,C){return p===null||p.tag!==7?(p=Vn(g,m.mode,x,C),p.return=m,p):(p=s(p,g),p.return=m,p)}function d(m,p,g){if(typeof p=="string"&&p!==""||typeof p=="number")return p=_a(""+p,m.mode,g),p.return=m,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Fi:return g=mo(p.type,p.key,p.props,null,m.mode,g),g.ref=ps(m,null,p),g.return=m,g;case hr:return p=xa(p,m.mode,g),p.return=m,p;case Xt:var x=p._init;return d(m,x(p._payload),g)}if(Ss(p)||cs(p))return p=Vn(p,m.mode,g,null),p.return=m,p;Qi(m,p)}return null}function f(m,p,g,x){var C=p!==null?p.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return C!==null?null:l(m,p,""+g,x);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Fi:return g.key===C?a(m,p,g,x):null;case hr:return g.key===C?u(m,p,g,x):null;case Xt:return C=g._init,f(m,p,C(g._payload),x)}if(Ss(g)||cs(g))return C!==null?null:h(m,p,g,x,null);Qi(m,g)}return null}function v(m,p,g,x,C){if(typeof x=="string"&&x!==""||typeof x=="number")return m=m.get(g)||null,l(p,m,""+x,C);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Fi:return m=m.get(x.key===null?g:x.key)||null,a(p,m,x,C);case hr:return m=m.get(x.key===null?g:x.key)||null,u(p,m,x,C);case Xt:var I=x._init;return v(m,p,g,I(x._payload),C)}if(Ss(x)||cs(x))return m=m.get(g)||null,h(p,m,x,C,null);Qi(p,x)}return null}function y(m,p,g,x){for(var C=null,I=null,w=p,N=p=0,M=null;w!==null&&N<g.length;N++){w.index>N?(M=w,w=null):M=w.sibling;var O=f(m,w,g[N],x);if(O===null){w===null&&(w=M);break}t&&w&&O.alternate===null&&e(m,w),p=i(O,p,N),I===null?C=O:I.sibling=O,I=O,w=M}if(N===g.length)return n(m,w),ne&&On(m,N),C;if(w===null){for(;N<g.length;N++)w=d(m,g[N],x),w!==null&&(p=i(w,p,N),I===null?C=w:I.sibling=w,I=w);return ne&&On(m,N),C}for(w=r(m,w);N<g.length;N++)M=v(w,m,N,g[N],x),M!==null&&(t&&M.alternate!==null&&w.delete(M.key===null?N:M.key),p=i(M,p,N),I===null?C=M:I.sibling=M,I=M);return t&&w.forEach(function(ke){return e(m,ke)}),ne&&On(m,N),C}function _(m,p,g,x){var C=cs(g);if(typeof C!="function")throw Error(E(150));if(g=C.call(g),g==null)throw Error(E(151));for(var I=C=null,w=p,N=p=0,M=null,O=g.next();w!==null&&!O.done;N++,O=g.next()){w.index>N?(M=w,w=null):M=w.sibling;var ke=f(m,w,O.value,x);if(ke===null){w===null&&(w=M);break}t&&w&&ke.alternate===null&&e(m,w),p=i(ke,p,N),I===null?C=ke:I.sibling=ke,I=ke,w=M}if(O.done)return n(m,w),ne&&On(m,N),C;if(w===null){for(;!O.done;N++,O=g.next())O=d(m,O.value,x),O!==null&&(p=i(O,p,N),I===null?C=O:I.sibling=O,I=O);return ne&&On(m,N),C}for(w=r(m,w);!O.done;N++,O=g.next())O=v(w,m,N,O.value,x),O!==null&&(t&&O.alternate!==null&&w.delete(O.key===null?N:O.key),p=i(O,p,N),I===null?C=O:I.sibling=O,I=O);return t&&w.forEach(function(T){return e(m,T)}),ne&&On(m,N),C}function S(m,p,g,x){if(typeof g=="object"&&g!==null&&g.type===fr&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case Fi:e:{for(var C=g.key,I=p;I!==null;){if(I.key===C){if(C=g.type,C===fr){if(I.tag===7){n(m,I.sibling),p=s(I,g.props.children),p.return=m,m=p;break e}}else if(I.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Xt&&Dh(C)===I.type){n(m,I.sibling),p=s(I,g.props),p.ref=ps(m,I,g),p.return=m,m=p;break e}n(m,I);break}else e(m,I);I=I.sibling}g.type===fr?(p=Vn(g.props.children,m.mode,x,g.key),p.return=m,m=p):(x=mo(g.type,g.key,g.props,null,m.mode,x),x.ref=ps(m,p,g),x.return=m,m=x)}return o(m);case hr:e:{for(I=g.key;p!==null;){if(p.key===I)if(p.tag===4&&p.stateNode.containerInfo===g.containerInfo&&p.stateNode.implementation===g.implementation){n(m,p.sibling),p=s(p,g.children||[]),p.return=m,m=p;break e}else{n(m,p);break}else e(m,p);p=p.sibling}p=xa(g,m.mode,x),p.return=m,m=p}return o(m);case Xt:return I=g._init,S(m,p,I(g._payload),x)}if(Ss(g))return y(m,p,g,x);if(cs(g))return _(m,p,g,x);Qi(m,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,p!==null&&p.tag===6?(n(m,p.sibling),p=s(p,g),p.return=m,m=p):(n(m,p),p=_a(g,m.mode,x),p.return=m,m=p),o(m)):n(m,p)}return S}var zr=Vm(!0),qm=Vm(!1),Oo=Tn(null),Lo=null,wr=null,Iu=null;function Tu(){Iu=wr=Lo=null}function Ru(t){var e=Oo.current;te(Oo),t._currentValue=e}function hc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Rr(t,e){Lo=t,Iu=wr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ze=!0),t.firstContext=null)}function rt(t){var e=t._currentValue;if(Iu!==t)if(t={context:t,memoizedValue:e,next:null},wr===null){if(Lo===null)throw Error(E(308));wr=t,Lo.dependencies={lanes:0,firstContext:t}}else wr=wr.next=t;return e}var zn=null;function Pu(t){zn===null?zn=[t]:zn.push(t)}function Gm(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Pu(e)):(n.next=s.next,s.next=n),e.interleaved=n,zt(t,r)}function zt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Jt=!1;function Au(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Km(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Lt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function fn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,H&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,zt(t,n)}return s=r.interleaved,s===null?(e.next=e,Pu(r)):(e.next=s.next,s.next=e),r.interleaved=e,zt(t,n)}function ao(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,yu(t,n)}}function Oh(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Mo(t,e,n,r){var s=t.updateQueue;Jt=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var a=l,u=a.next;a.next=null,o===null?i=u:o.next=u,o=a;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=a))}if(i!==null){var d=s.baseState;o=0,h=u=a=null,l=i;do{var f=l.lane,v=l.eventTime;if((r&f)===f){h!==null&&(h=h.next={eventTime:v,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=t,_=l;switch(f=e,v=n,_.tag){case 1:if(y=_.payload,typeof y=="function"){d=y.call(v,d,f);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=_.payload,f=typeof y=="function"?y.call(v,d,f):y,f==null)break e;d=ie({},d,f);break e;case 2:Jt=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else v={eventTime:v,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=v,a=d):h=h.next=v,o|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(h===null&&(a=d),s.baseState=a,s.firstBaseUpdate=u,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Xn|=o,t.lanes=o,t.memoizedState=d}}function Lh(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(E(191,s));s.call(r)}}}var Si={},Et=Tn(Si),Zs=Tn(Si),ei=Tn(Si);function Bn(t){if(t===Si)throw Error(E(174));return t}function ju(t,e){switch(J(ei,e),J(Zs,t),J(Et,Si),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:qa(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=qa(e,t)}te(Et),J(Et,e)}function Br(){te(Et),te(Zs),te(ei)}function Qm(t){Bn(ei.current);var e=Bn(Et.current),n=qa(e,t.type);e!==n&&(J(Zs,t),J(Et,n))}function Du(t){Zs.current===t&&(te(Et),te(Zs))}var re=Tn(0);function Fo(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var fa=[];function Ou(){for(var t=0;t<fa.length;t++)fa[t]._workInProgressVersionPrimary=null;fa.length=0}var co=qt.ReactCurrentDispatcher,pa=qt.ReactCurrentBatchConfig,Yn=0,se=null,fe=null,_e=null,Uo=!1,Rs=!1,ti=0,hx=0;function Ie(){throw Error(E(321))}function Lu(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!vt(t[n],e[n]))return!1;return!0}function Mu(t,e,n,r,s,i){if(Yn=i,se=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,co.current=t===null||t.memoizedState===null?gx:yx,t=n(r,s),Rs){i=0;do{if(Rs=!1,ti=0,25<=i)throw Error(E(301));i+=1,_e=fe=null,e.updateQueue=null,co.current=vx,t=n(r,s)}while(Rs)}if(co.current=zo,e=fe!==null&&fe.next!==null,Yn=0,_e=fe=se=null,Uo=!1,e)throw Error(E(300));return t}function Fu(){var t=ti!==0;return ti=0,t}function xt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _e===null?se.memoizedState=_e=t:_e=_e.next=t,_e}function st(){if(fe===null){var t=se.alternate;t=t!==null?t.memoizedState:null}else t=fe.next;var e=_e===null?se.memoizedState:_e.next;if(e!==null)_e=e,fe=t;else{if(t===null)throw Error(E(310));fe=t,t={memoizedState:fe.memoizedState,baseState:fe.baseState,baseQueue:fe.baseQueue,queue:fe.queue,next:null},_e===null?se.memoizedState=_e=t:_e=_e.next=t}return _e}function ni(t,e){return typeof e=="function"?e(t):e}function ma(t){var e=st(),n=e.queue;if(n===null)throw Error(E(311));n.lastRenderedReducer=t;var r=fe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,a=null,u=i;do{var h=u.lane;if((Yn&h)===h)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(l=a=d,o=r):a=a.next=d,se.lanes|=h,Xn|=h}u=u.next}while(u!==null&&u!==i);a===null?o=r:a.next=l,vt(r,e.memoizedState)||(ze=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,se.lanes|=i,Xn|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ga(t){var e=st(),n=e.queue;if(n===null)throw Error(E(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);vt(i,e.memoizedState)||(ze=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Ym(){}function Xm(t,e){var n=se,r=st(),s=e(),i=!vt(r.memoizedState,s);if(i&&(r.memoizedState=s,ze=!0),r=r.queue,Uu(eg.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||_e!==null&&_e.memoizedState.tag&1){if(n.flags|=2048,ri(9,Zm.bind(null,n,r,s,e),void 0,null),Se===null)throw Error(E(349));Yn&30||Jm(n,e,s)}return s}function Jm(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=se.updateQueue,e===null?(e={lastEffect:null,stores:null},se.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Zm(t,e,n,r){e.value=n,e.getSnapshot=r,tg(e)&&ng(t)}function eg(t,e,n){return n(function(){tg(e)&&ng(t)})}function tg(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!vt(t,n)}catch{return!0}}function ng(t){var e=zt(t,1);e!==null&&mt(e,t,1,-1)}function Mh(t){var e=xt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ni,lastRenderedState:t},e.queue=t,t=t.dispatch=mx.bind(null,se,t),[e.memoizedState,t]}function ri(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=se.updateQueue,e===null?(e={lastEffect:null,stores:null},se.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function rg(){return st().memoizedState}function uo(t,e,n,r){var s=xt();se.flags|=t,s.memoizedState=ri(1|e,n,void 0,r===void 0?null:r)}function Sl(t,e,n,r){var s=st();r=r===void 0?null:r;var i=void 0;if(fe!==null){var o=fe.memoizedState;if(i=o.destroy,r!==null&&Lu(r,o.deps)){s.memoizedState=ri(e,n,i,r);return}}se.flags|=t,s.memoizedState=ri(1|e,n,i,r)}function Fh(t,e){return uo(8390656,8,t,e)}function Uu(t,e){return Sl(2048,8,t,e)}function sg(t,e){return Sl(4,2,t,e)}function ig(t,e){return Sl(4,4,t,e)}function og(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function lg(t,e,n){return n=n!=null?n.concat([t]):null,Sl(4,4,og.bind(null,e,t),n)}function zu(){}function ag(t,e){var n=st();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Lu(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function cg(t,e){var n=st();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Lu(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function ug(t,e,n){return Yn&21?(vt(n,e)||(n=mm(),se.lanes|=n,Xn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ze=!0),t.memoizedState=n)}function fx(t,e){var n=K;K=n!==0&&4>n?n:4,t(!0);var r=pa.transition;pa.transition={};try{t(!1),e()}finally{K=n,pa.transition=r}}function dg(){return st().memoizedState}function px(t,e,n){var r=mn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},hg(t))fg(e,n);else if(n=Gm(t,e,n,r),n!==null){var s=Oe();mt(n,t,r,s),pg(n,e,r)}}function mx(t,e,n){var r=mn(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(hg(t))fg(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,vt(l,o)){var a=e.interleaved;a===null?(s.next=s,Pu(e)):(s.next=a.next,a.next=s),e.interleaved=s;return}}catch{}finally{}n=Gm(t,e,s,r),n!==null&&(s=Oe(),mt(n,t,r,s),pg(n,e,r))}}function hg(t){var e=t.alternate;return t===se||e!==null&&e===se}function fg(t,e){Rs=Uo=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function pg(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,yu(t,n)}}var zo={readContext:rt,useCallback:Ie,useContext:Ie,useEffect:Ie,useImperativeHandle:Ie,useInsertionEffect:Ie,useLayoutEffect:Ie,useMemo:Ie,useReducer:Ie,useRef:Ie,useState:Ie,useDebugValue:Ie,useDeferredValue:Ie,useTransition:Ie,useMutableSource:Ie,useSyncExternalStore:Ie,useId:Ie,unstable_isNewReconciler:!1},gx={readContext:rt,useCallback:function(t,e){return xt().memoizedState=[t,e===void 0?null:e],t},useContext:rt,useEffect:Fh,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,uo(4194308,4,og.bind(null,e,t),n)},useLayoutEffect:function(t,e){return uo(4194308,4,t,e)},useInsertionEffect:function(t,e){return uo(4,2,t,e)},useMemo:function(t,e){var n=xt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=xt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=px.bind(null,se,t),[r.memoizedState,t]},useRef:function(t){var e=xt();return t={current:t},e.memoizedState=t},useState:Mh,useDebugValue:zu,useDeferredValue:function(t){return xt().memoizedState=t},useTransition:function(){var t=Mh(!1),e=t[0];return t=fx.bind(null,t[1]),xt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=se,s=xt();if(ne){if(n===void 0)throw Error(E(407));n=n()}else{if(n=e(),Se===null)throw Error(E(349));Yn&30||Jm(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Fh(eg.bind(null,r,i,t),[t]),r.flags|=2048,ri(9,Zm.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=xt(),e=Se.identifierPrefix;if(ne){var n=At,r=Pt;n=(r&~(1<<32-pt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ti++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=hx++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},yx={readContext:rt,useCallback:ag,useContext:rt,useEffect:Uu,useImperativeHandle:lg,useInsertionEffect:sg,useLayoutEffect:ig,useMemo:cg,useReducer:ma,useRef:rg,useState:function(){return ma(ni)},useDebugValue:zu,useDeferredValue:function(t){var e=st();return ug(e,fe.memoizedState,t)},useTransition:function(){var t=ma(ni)[0],e=st().memoizedState;return[t,e]},useMutableSource:Ym,useSyncExternalStore:Xm,useId:dg,unstable_isNewReconciler:!1},vx={readContext:rt,useCallback:ag,useContext:rt,useEffect:Uu,useImperativeHandle:lg,useInsertionEffect:sg,useLayoutEffect:ig,useMemo:cg,useReducer:ga,useRef:rg,useState:function(){return ga(ni)},useDebugValue:zu,useDeferredValue:function(t){var e=st();return fe===null?e.memoizedState=t:ug(e,fe.memoizedState,t)},useTransition:function(){var t=ga(ni)[0],e=st().memoizedState;return[t,e]},useMutableSource:Ym,useSyncExternalStore:Xm,useId:dg,unstable_isNewReconciler:!1};function lt(t,e){if(t&&t.defaultProps){e=ie({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function fc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ie({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var bl={isMounted:function(t){return(t=t._reactInternals)?or(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Oe(),s=mn(t),i=Lt(r,s);i.payload=e,n!=null&&(i.callback=n),e=fn(t,i,s),e!==null&&(mt(e,t,s,r),ao(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Oe(),s=mn(t),i=Lt(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=fn(t,i,s),e!==null&&(mt(e,t,s,r),ao(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Oe(),r=mn(t),s=Lt(n,r);s.tag=2,e!=null&&(s.callback=e),e=fn(t,s,r),e!==null&&(mt(e,t,r,n),ao(e,t,r))}};function Uh(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Qs(n,r)||!Qs(s,i):!0}function mg(t,e,n){var r=!1,s=En,i=e.contextType;return typeof i=="object"&&i!==null?i=rt(i):(s=$e(e)?Kn:Ae.current,r=e.contextTypes,i=(r=r!=null)?Fr(t,s):En),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=bl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function zh(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&bl.enqueueReplaceState(e,e.state,null)}function pc(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Au(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=rt(i):(i=$e(e)?Kn:Ae.current,s.context=Fr(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(fc(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&bl.enqueueReplaceState(s,s.state,null),Mo(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Wr(t,e){try{var n="",r=e;do n+=q_(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function ya(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function mc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var _x=typeof WeakMap=="function"?WeakMap:Map;function gg(t,e,n){n=Lt(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Wo||(Wo=!0,Cc=r),mc(t,e)},n}function yg(t,e,n){n=Lt(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){mc(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){mc(t,e),typeof r!="function"&&(pn===null?pn=new Set([this]):pn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Bh(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new _x;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=jx.bind(null,t,e,n),e.then(t,t))}function Wh(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function $h(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Lt(-1,1),e.tag=2,fn(n,e,1))),n.lanes|=1),t)}var xx=qt.ReactCurrentOwner,ze=!1;function je(t,e,n,r){e.child=t===null?qm(e,null,n,r):zr(e,t.child,n,r)}function Hh(t,e,n,r,s){n=n.render;var i=e.ref;return Rr(e,s),r=Mu(t,e,n,r,i,s),n=Fu(),t!==null&&!ze?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Bt(t,e,s)):(ne&&n&&Cu(e),e.flags|=1,je(t,e,r,s),e.child)}function Vh(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Ku(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,vg(t,e,i,r,s)):(t=mo(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Qs,n(o,r)&&t.ref===e.ref)return Bt(t,e,s)}return e.flags|=1,t=gn(i,r),t.ref=e.ref,t.return=e,e.child=t}function vg(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Qs(i,r)&&t.ref===e.ref)if(ze=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(ze=!0);else return e.lanes=t.lanes,Bt(t,e,s)}return gc(t,e,n,r,s)}function _g(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},J(br,Ge),Ge|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,J(br,Ge),Ge|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,J(br,Ge),Ge|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,J(br,Ge),Ge|=r;return je(t,e,s,n),e.child}function xg(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function gc(t,e,n,r,s){var i=$e(n)?Kn:Ae.current;return i=Fr(e,i),Rr(e,s),n=Mu(t,e,n,r,i,s),r=Fu(),t!==null&&!ze?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Bt(t,e,s)):(ne&&r&&Cu(e),e.flags|=1,je(t,e,n,s),e.child)}function qh(t,e,n,r,s){if($e(n)){var i=!0;Ao(e)}else i=!1;if(Rr(e,s),e.stateNode===null)ho(t,e),mg(e,n,r),pc(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var a=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=rt(u):(u=$e(n)?Kn:Ae.current,u=Fr(e,u));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==u)&&zh(e,o,r,u),Jt=!1;var f=e.memoizedState;o.state=f,Mo(e,r,o,s),a=e.memoizedState,l!==r||f!==a||We.current||Jt?(typeof h=="function"&&(fc(e,n,h,r),a=e.memoizedState),(l=Jt||Uh(e,n,l,r,f,a,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),o.props=r,o.state=a,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Km(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:lt(e.type,l),o.props=u,d=e.pendingProps,f=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=rt(a):(a=$e(n)?Kn:Ae.current,a=Fr(e,a));var v=n.getDerivedStateFromProps;(h=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||f!==a)&&zh(e,o,r,a),Jt=!1,f=e.memoizedState,o.state=f,Mo(e,r,o,s);var y=e.memoizedState;l!==d||f!==y||We.current||Jt?(typeof v=="function"&&(fc(e,n,v,r),y=e.memoizedState),(u=Jt||Uh(e,n,u,r,f,y,a)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,a)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=a,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return yc(t,e,n,r,i,s)}function yc(t,e,n,r,s,i){xg(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Ph(e,n,!1),Bt(t,e,i);r=e.stateNode,xx.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=zr(e,t.child,null,i),e.child=zr(e,null,l,i)):je(t,e,l,i),e.memoizedState=r.state,s&&Ph(e,n,!0),e.child}function wg(t){var e=t.stateNode;e.pendingContext?Rh(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Rh(t,e.context,!1),ju(t,e.containerInfo)}function Gh(t,e,n,r,s){return Ur(),Nu(s),e.flags|=256,je(t,e,n,r),e.child}var vc={dehydrated:null,treeContext:null,retryLane:0};function _c(t){return{baseLanes:t,cachePool:null,transitions:null}}function Sg(t,e,n){var r=e.pendingProps,s=re.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),J(re,s&1),t===null)return dc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=kl(o,r,0,null),t=Vn(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=_c(n),e.memoizedState=vc,t):Bu(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return wx(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=gn(s,a),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=gn(l,i):(i=Vn(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?_c(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=vc,r}return i=t.child,t=i.sibling,r=gn(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Bu(t,e){return e=kl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Yi(t,e,n,r){return r!==null&&Nu(r),zr(e,t.child,null,n),t=Bu(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function wx(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=ya(Error(E(422))),Yi(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=kl({mode:"visible",children:r.children},s,0,null),i=Vn(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&zr(e,t.child,null,o),e.child.memoizedState=_c(o),e.memoizedState=vc,i);if(!(e.mode&1))return Yi(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(E(419)),r=ya(i,r,void 0),Yi(t,e,o,r)}if(l=(o&t.childLanes)!==0,ze||l){if(r=Se,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,zt(t,s),mt(r,t,s,-1))}return Gu(),r=ya(Error(E(421))),Yi(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Dx.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Ke=hn(s.nextSibling),Qe=e,ne=!0,ct=null,t!==null&&(Ze[et++]=Pt,Ze[et++]=At,Ze[et++]=Qn,Pt=t.id,At=t.overflow,Qn=e),e=Bu(e,r.children),e.flags|=4096,e)}function Kh(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),hc(t.return,e,n)}function va(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function bg(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(je(t,e,r.children,n),r=re.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Kh(t,n,e);else if(t.tag===19)Kh(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(J(re,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Fo(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),va(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Fo(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}va(e,!0,n,null,i);break;case"together":va(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ho(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Bt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Xn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(E(153));if(e.child!==null){for(t=e.child,n=gn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=gn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Sx(t,e,n){switch(e.tag){case 3:wg(e),Ur();break;case 5:Qm(e);break;case 1:$e(e.type)&&Ao(e);break;case 4:ju(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;J(Oo,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(J(re,re.current&1),e.flags|=128,null):n&e.child.childLanes?Sg(t,e,n):(J(re,re.current&1),t=Bt(t,e,n),t!==null?t.sibling:null);J(re,re.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return bg(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),J(re,re.current),r)break;return null;case 22:case 23:return e.lanes=0,_g(t,e,n)}return Bt(t,e,n)}var Eg,xc,Cg,kg;Eg=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};xc=function(){};Cg=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Bn(Et.current);var i=null;switch(n){case"input":s=Wa(t,s),r=Wa(t,r),i=[];break;case"select":s=ie({},s,{value:void 0}),r=ie({},r,{value:void 0}),i=[];break;case"textarea":s=Va(t,s),r=Va(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ro)}Ga(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ws.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var a=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&a!==l&&(a!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(i||(i=[]),i.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(i=i||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(i=i||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ws.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&Z("scroll",t),i||l===a||(i=[])):(i=i||[]).push(u,a))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};kg=function(t,e,n,r){n!==r&&(e.flags|=4)};function ms(t,e){if(!ne)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Te(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function bx(t,e,n){var r=e.pendingProps;switch(ku(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Te(e),null;case 1:return $e(e.type)&&Po(),Te(e),null;case 3:return r=e.stateNode,Br(),te(We),te(Ae),Ou(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ki(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ct!==null&&(Ic(ct),ct=null))),xc(t,e),Te(e),null;case 5:Du(e);var s=Bn(ei.current);if(n=e.type,t!==null&&e.stateNode!=null)Cg(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(E(166));return Te(e),null}if(t=Bn(Et.current),Ki(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[wt]=e,r[Js]=i,t=(e.mode&1)!==0,n){case"dialog":Z("cancel",r),Z("close",r);break;case"iframe":case"object":case"embed":Z("load",r);break;case"video":case"audio":for(s=0;s<Es.length;s++)Z(Es[s],r);break;case"source":Z("error",r);break;case"img":case"image":case"link":Z("error",r),Z("load",r);break;case"details":Z("toggle",r);break;case"input":rh(r,i),Z("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Z("invalid",r);break;case"textarea":ih(r,i),Z("invalid",r)}Ga(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Gi(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Gi(r.textContent,l,t),s=["children",""+l]):Ws.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Z("scroll",r)}switch(n){case"input":Ui(r),sh(r,i,!0);break;case"textarea":Ui(r),oh(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ro)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=em(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[wt]=e,t[Js]=r,Eg(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ka(n,r),n){case"dialog":Z("cancel",t),Z("close",t),s=r;break;case"iframe":case"object":case"embed":Z("load",t),s=r;break;case"video":case"audio":for(s=0;s<Es.length;s++)Z(Es[s],t);s=r;break;case"source":Z("error",t),s=r;break;case"img":case"image":case"link":Z("error",t),Z("load",t),s=r;break;case"details":Z("toggle",t),s=r;break;case"input":rh(t,r),s=Wa(t,r),Z("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=ie({},r,{value:void 0}),Z("invalid",t);break;case"textarea":ih(t,r),s=Va(t,r),Z("invalid",t);break;default:s=r}Ga(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var a=l[i];i==="style"?rm(t,a):i==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&tm(t,a)):i==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&$s(t,a):typeof a=="number"&&$s(t,""+a):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ws.hasOwnProperty(i)?a!=null&&i==="onScroll"&&Z("scroll",t):a!=null&&du(t,i,a,o))}switch(n){case"input":Ui(t),sh(t,r,!1);break;case"textarea":Ui(t),oh(t);break;case"option":r.value!=null&&t.setAttribute("value",""+bn(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?kr(t,!!r.multiple,i,!1):r.defaultValue!=null&&kr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ro)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Te(e),null;case 6:if(t&&e.stateNode!=null)kg(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(E(166));if(n=Bn(ei.current),Bn(Et.current),Ki(e)){if(r=e.stateNode,n=e.memoizedProps,r[wt]=e,(i=r.nodeValue!==n)&&(t=Qe,t!==null))switch(t.tag){case 3:Gi(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Gi(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[wt]=e,e.stateNode=r}return Te(e),null;case 13:if(te(re),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ne&&Ke!==null&&e.mode&1&&!(e.flags&128))Hm(),Ur(),e.flags|=98560,i=!1;else if(i=Ki(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(E(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(E(317));i[wt]=e}else Ur(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Te(e),i=!1}else ct!==null&&(Ic(ct),ct=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||re.current&1?ge===0&&(ge=3):Gu())),e.updateQueue!==null&&(e.flags|=4),Te(e),null);case 4:return Br(),xc(t,e),t===null&&Ys(e.stateNode.containerInfo),Te(e),null;case 10:return Ru(e.type._context),Te(e),null;case 17:return $e(e.type)&&Po(),Te(e),null;case 19:if(te(re),i=e.memoizedState,i===null)return Te(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)ms(i,!1);else{if(ge!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Fo(t),o!==null){for(e.flags|=128,ms(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return J(re,re.current&1|2),e.child}t=t.sibling}i.tail!==null&&ue()>$r&&(e.flags|=128,r=!0,ms(i,!1),e.lanes=4194304)}else{if(!r)if(t=Fo(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ms(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ne)return Te(e),null}else 2*ue()-i.renderingStartTime>$r&&n!==1073741824&&(e.flags|=128,r=!0,ms(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ue(),e.sibling=null,n=re.current,J(re,r?n&1|2:n&1),e):(Te(e),null);case 22:case 23:return qu(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ge&1073741824&&(Te(e),e.subtreeFlags&6&&(e.flags|=8192)):Te(e),null;case 24:return null;case 25:return null}throw Error(E(156,e.tag))}function Ex(t,e){switch(ku(e),e.tag){case 1:return $e(e.type)&&Po(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Br(),te(We),te(Ae),Ou(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Du(e),null;case 13:if(te(re),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(E(340));Ur()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return te(re),null;case 4:return Br(),null;case 10:return Ru(e.type._context),null;case 22:case 23:return qu(),null;case 24:return null;default:return null}}var Xi=!1,Re=!1,Cx=typeof WeakSet=="function"?WeakSet:Set,P=null;function Sr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){oe(t,e,r)}else n.current=null}function wc(t,e,n){try{n()}catch(r){oe(t,e,r)}}var Qh=!1;function kx(t,e){if(sc=No,t=Pm(),Eu(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,u=0,h=0,d=t,f=null;t:for(;;){for(var v;d!==n||s!==0&&d.nodeType!==3||(l=o+s),d!==i||r!==0&&d.nodeType!==3||(a=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(v=d.firstChild)!==null;)f=d,d=v;for(;;){if(d===t)break t;if(f===n&&++u===s&&(l=o),f===i&&++h===r&&(a=o),(v=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=v}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(ic={focusedElem:t,selectionRange:n},No=!1,P=e;P!==null;)if(e=P,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,P=t;else for(;P!==null;){e=P;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var _=y.memoizedProps,S=y.memoizedState,m=e.stateNode,p=m.getSnapshotBeforeUpdate(e.elementType===e.type?_:lt(e.type,_),S);m.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var g=e.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(E(163))}}catch(x){oe(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,P=t;break}P=e.return}return y=Qh,Qh=!1,y}function Ps(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&wc(e,n,i)}s=s.next}while(s!==r)}}function El(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Sc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Ng(t){var e=t.alternate;e!==null&&(t.alternate=null,Ng(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[wt],delete e[Js],delete e[ac],delete e[ax],delete e[cx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Ig(t){return t.tag===5||t.tag===3||t.tag===4}function Yh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ig(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function bc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ro));else if(r!==4&&(t=t.child,t!==null))for(bc(t,e,n),t=t.sibling;t!==null;)bc(t,e,n),t=t.sibling}function Ec(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ec(t,e,n),t=t.sibling;t!==null;)Ec(t,e,n),t=t.sibling}var be=null,at=!1;function Qt(t,e,n){for(n=n.child;n!==null;)Tg(t,e,n),n=n.sibling}function Tg(t,e,n){if(bt&&typeof bt.onCommitFiberUnmount=="function")try{bt.onCommitFiberUnmount(gl,n)}catch{}switch(n.tag){case 5:Re||Sr(n,e);case 6:var r=be,s=at;be=null,Qt(t,e,n),be=r,at=s,be!==null&&(at?(t=be,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):be.removeChild(n.stateNode));break;case 18:be!==null&&(at?(t=be,n=n.stateNode,t.nodeType===8?da(t.parentNode,n):t.nodeType===1&&da(t,n),Gs(t)):da(be,n.stateNode));break;case 4:r=be,s=at,be=n.stateNode.containerInfo,at=!0,Qt(t,e,n),be=r,at=s;break;case 0:case 11:case 14:case 15:if(!Re&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&wc(n,e,o),s=s.next}while(s!==r)}Qt(t,e,n);break;case 1:if(!Re&&(Sr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){oe(n,e,l)}Qt(t,e,n);break;case 21:Qt(t,e,n);break;case 22:n.mode&1?(Re=(r=Re)||n.memoizedState!==null,Qt(t,e,n),Re=r):Qt(t,e,n);break;default:Qt(t,e,n)}}function Xh(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Cx),e.forEach(function(r){var s=Ox.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ot(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:be=l.stateNode,at=!1;break e;case 3:be=l.stateNode.containerInfo,at=!0;break e;case 4:be=l.stateNode.containerInfo,at=!0;break e}l=l.return}if(be===null)throw Error(E(160));Tg(i,o,s),be=null,at=!1;var a=s.alternate;a!==null&&(a.return=null),s.return=null}catch(u){oe(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Rg(e,t),e=e.sibling}function Rg(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ot(e,t),_t(t),r&4){try{Ps(3,t,t.return),El(3,t)}catch(_){oe(t,t.return,_)}try{Ps(5,t,t.return)}catch(_){oe(t,t.return,_)}}break;case 1:ot(e,t),_t(t),r&512&&n!==null&&Sr(n,n.return);break;case 5:if(ot(e,t),_t(t),r&512&&n!==null&&Sr(n,n.return),t.flags&32){var s=t.stateNode;try{$s(s,"")}catch(_){oe(t,t.return,_)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Jp(s,i),Ka(l,o);var u=Ka(l,i);for(o=0;o<a.length;o+=2){var h=a[o],d=a[o+1];h==="style"?rm(s,d):h==="dangerouslySetInnerHTML"?tm(s,d):h==="children"?$s(s,d):du(s,h,d,u)}switch(l){case"input":$a(s,i);break;case"textarea":Zp(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var v=i.value;v!=null?kr(s,!!i.multiple,v,!1):f!==!!i.multiple&&(i.defaultValue!=null?kr(s,!!i.multiple,i.defaultValue,!0):kr(s,!!i.multiple,i.multiple?[]:"",!1))}s[Js]=i}catch(_){oe(t,t.return,_)}}break;case 6:if(ot(e,t),_t(t),r&4){if(t.stateNode===null)throw Error(E(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(_){oe(t,t.return,_)}}break;case 3:if(ot(e,t),_t(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Gs(e.containerInfo)}catch(_){oe(t,t.return,_)}break;case 4:ot(e,t),_t(t);break;case 13:ot(e,t),_t(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Hu=ue())),r&4&&Xh(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Re=(u=Re)||h,ot(e,t),Re=u):ot(e,t),_t(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(P=t,h=t.child;h!==null;){for(d=P=h;P!==null;){switch(f=P,v=f.child,f.tag){case 0:case 11:case 14:case 15:Ps(4,f,f.return);break;case 1:Sr(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(_){oe(r,n,_)}}break;case 5:Sr(f,f.return);break;case 22:if(f.memoizedState!==null){Zh(d);continue}}v!==null?(v.return=f,P=v):Zh(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{s=d.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=d.stateNode,a=d.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=nm("display",o))}catch(_){oe(t,t.return,_)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(_){oe(t,t.return,_)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ot(e,t),_t(t),r&4&&Xh(t);break;case 21:break;default:ot(e,t),_t(t)}}function _t(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Ig(n)){var r=n;break e}n=n.return}throw Error(E(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&($s(s,""),r.flags&=-33);var i=Yh(t);Ec(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Yh(t);bc(t,l,o);break;default:throw Error(E(161))}}catch(a){oe(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Nx(t,e,n){P=t,Pg(t)}function Pg(t,e,n){for(var r=(t.mode&1)!==0;P!==null;){var s=P,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Xi;if(!o){var l=s.alternate,a=l!==null&&l.memoizedState!==null||Re;l=Xi;var u=Re;if(Xi=o,(Re=a)&&!u)for(P=s;P!==null;)o=P,a=o.child,o.tag===22&&o.memoizedState!==null?ef(s):a!==null?(a.return=o,P=a):ef(s);for(;i!==null;)P=i,Pg(i),i=i.sibling;P=s,Xi=l,Re=u}Jh(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,P=i):Jh(t)}}function Jh(t){for(;P!==null;){var e=P;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Re||El(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Re)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:lt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Lh(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Lh(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Gs(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(E(163))}Re||e.flags&512&&Sc(e)}catch(f){oe(e,e.return,f)}}if(e===t){P=null;break}if(n=e.sibling,n!==null){n.return=e.return,P=n;break}P=e.return}}function Zh(t){for(;P!==null;){var e=P;if(e===t){P=null;break}var n=e.sibling;if(n!==null){n.return=e.return,P=n;break}P=e.return}}function ef(t){for(;P!==null;){var e=P;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{El(4,e)}catch(a){oe(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(a){oe(e,s,a)}}var i=e.return;try{Sc(e)}catch(a){oe(e,i,a)}break;case 5:var o=e.return;try{Sc(e)}catch(a){oe(e,o,a)}}}catch(a){oe(e,e.return,a)}if(e===t){P=null;break}var l=e.sibling;if(l!==null){l.return=e.return,P=l;break}P=e.return}}var Ix=Math.ceil,Bo=qt.ReactCurrentDispatcher,Wu=qt.ReactCurrentOwner,nt=qt.ReactCurrentBatchConfig,H=0,Se=null,de=null,Ee=0,Ge=0,br=Tn(0),ge=0,si=null,Xn=0,Cl=0,$u=0,As=null,Ue=null,Hu=0,$r=1/0,Tt=null,Wo=!1,Cc=null,pn=null,Ji=!1,ln=null,$o=0,js=0,kc=null,fo=-1,po=0;function Oe(){return H&6?ue():fo!==-1?fo:fo=ue()}function mn(t){return t.mode&1?H&2&&Ee!==0?Ee&-Ee:dx.transition!==null?(po===0&&(po=mm()),po):(t=K,t!==0||(t=window.event,t=t===void 0?16:Sm(t.type)),t):1}function mt(t,e,n,r){if(50<js)throw js=0,kc=null,Error(E(185));_i(t,n,r),(!(H&2)||t!==Se)&&(t===Se&&(!(H&2)&&(Cl|=n),ge===4&&en(t,Ee)),He(t,r),n===1&&H===0&&!(e.mode&1)&&($r=ue()+500,wl&&Rn()))}function He(t,e){var n=t.callbackNode;d0(t,e);var r=ko(t,t===Se?Ee:0);if(r===0)n!==null&&ch(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&ch(n),e===1)t.tag===0?ux(tf.bind(null,t)):Bm(tf.bind(null,t)),ox(function(){!(H&6)&&Rn()}),n=null;else{switch(gm(r)){case 1:n=gu;break;case 4:n=fm;break;case 16:n=Co;break;case 536870912:n=pm;break;default:n=Co}n=Ug(n,Ag.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Ag(t,e){if(fo=-1,po=0,H&6)throw Error(E(327));var n=t.callbackNode;if(Pr()&&t.callbackNode!==n)return null;var r=ko(t,t===Se?Ee:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ho(t,r);else{e=r;var s=H;H|=2;var i=Dg();(Se!==t||Ee!==e)&&(Tt=null,$r=ue()+500,Hn(t,e));do try{Px();break}catch(l){jg(t,l)}while(!0);Tu(),Bo.current=i,H=s,de!==null?e=0:(Se=null,Ee=0,e=ge)}if(e!==0){if(e===2&&(s=Za(t),s!==0&&(r=s,e=Nc(t,s))),e===1)throw n=si,Hn(t,0),en(t,r),He(t,ue()),n;if(e===6)en(t,r);else{if(s=t.current.alternate,!(r&30)&&!Tx(s)&&(e=Ho(t,r),e===2&&(i=Za(t),i!==0&&(r=i,e=Nc(t,i))),e===1))throw n=si,Hn(t,0),en(t,r),He(t,ue()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(E(345));case 2:Ln(t,Ue,Tt);break;case 3:if(en(t,r),(r&130023424)===r&&(e=Hu+500-ue(),10<e)){if(ko(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Oe(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=lc(Ln.bind(null,t,Ue,Tt),e);break}Ln(t,Ue,Tt);break;case 4:if(en(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-pt(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=ue()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ix(r/1960))-r,10<r){t.timeoutHandle=lc(Ln.bind(null,t,Ue,Tt),r);break}Ln(t,Ue,Tt);break;case 5:Ln(t,Ue,Tt);break;default:throw Error(E(329))}}}return He(t,ue()),t.callbackNode===n?Ag.bind(null,t):null}function Nc(t,e){var n=As;return t.current.memoizedState.isDehydrated&&(Hn(t,e).flags|=256),t=Ho(t,e),t!==2&&(e=Ue,Ue=n,e!==null&&Ic(e)),t}function Ic(t){Ue===null?Ue=t:Ue.push.apply(Ue,t)}function Tx(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!vt(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function en(t,e){for(e&=~$u,e&=~Cl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-pt(e),r=1<<n;t[n]=-1,e&=~r}}function tf(t){if(H&6)throw Error(E(327));Pr();var e=ko(t,0);if(!(e&1))return He(t,ue()),null;var n=Ho(t,e);if(t.tag!==0&&n===2){var r=Za(t);r!==0&&(e=r,n=Nc(t,r))}if(n===1)throw n=si,Hn(t,0),en(t,e),He(t,ue()),n;if(n===6)throw Error(E(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ln(t,Ue,Tt),He(t,ue()),null}function Vu(t,e){var n=H;H|=1;try{return t(e)}finally{H=n,H===0&&($r=ue()+500,wl&&Rn())}}function Jn(t){ln!==null&&ln.tag===0&&!(H&6)&&Pr();var e=H;H|=1;var n=nt.transition,r=K;try{if(nt.transition=null,K=1,t)return t()}finally{K=r,nt.transition=n,H=e,!(H&6)&&Rn()}}function qu(){Ge=br.current,te(br)}function Hn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,ix(n)),de!==null)for(n=de.return;n!==null;){var r=n;switch(ku(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Po();break;case 3:Br(),te(We),te(Ae),Ou();break;case 5:Du(r);break;case 4:Br();break;case 13:te(re);break;case 19:te(re);break;case 10:Ru(r.type._context);break;case 22:case 23:qu()}n=n.return}if(Se=t,de=t=gn(t.current,null),Ee=Ge=e,ge=0,si=null,$u=Cl=Xn=0,Ue=As=null,zn!==null){for(e=0;e<zn.length;e++)if(n=zn[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}zn=null}return t}function jg(t,e){do{var n=de;try{if(Tu(),co.current=zo,Uo){for(var r=se.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Uo=!1}if(Yn=0,_e=fe=se=null,Rs=!1,ti=0,Wu.current=null,n===null||n.return===null){ge=1,si=e,de=null;break}e:{var i=t,o=n.return,l=n,a=e;if(e=Ee,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,h=l,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var v=Wh(o);if(v!==null){v.flags&=-257,$h(v,o,l,i,e),v.mode&1&&Bh(i,u,e),e=v,a=u;var y=e.updateQueue;if(y===null){var _=new Set;_.add(a),e.updateQueue=_}else y.add(a);break e}else{if(!(e&1)){Bh(i,u,e),Gu();break e}a=Error(E(426))}}else if(ne&&l.mode&1){var S=Wh(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),$h(S,o,l,i,e),Nu(Wr(a,l));break e}}i=a=Wr(a,l),ge!==4&&(ge=2),As===null?As=[i]:As.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var m=gg(i,a,e);Oh(i,m);break e;case 1:l=a;var p=i.type,g=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(pn===null||!pn.has(g)))){i.flags|=65536,e&=-e,i.lanes|=e;var x=yg(i,l,e);Oh(i,x);break e}}i=i.return}while(i!==null)}Lg(n)}catch(C){e=C,de===n&&n!==null&&(de=n=n.return);continue}break}while(!0)}function Dg(){var t=Bo.current;return Bo.current=zo,t===null?zo:t}function Gu(){(ge===0||ge===3||ge===2)&&(ge=4),Se===null||!(Xn&268435455)&&!(Cl&268435455)||en(Se,Ee)}function Ho(t,e){var n=H;H|=2;var r=Dg();(Se!==t||Ee!==e)&&(Tt=null,Hn(t,e));do try{Rx();break}catch(s){jg(t,s)}while(!0);if(Tu(),H=n,Bo.current=r,de!==null)throw Error(E(261));return Se=null,Ee=0,ge}function Rx(){for(;de!==null;)Og(de)}function Px(){for(;de!==null&&!n0();)Og(de)}function Og(t){var e=Fg(t.alternate,t,Ge);t.memoizedProps=t.pendingProps,e===null?Lg(t):de=e,Wu.current=null}function Lg(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Ex(n,e),n!==null){n.flags&=32767,de=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ge=6,de=null;return}}else if(n=bx(n,e,Ge),n!==null){de=n;return}if(e=e.sibling,e!==null){de=e;return}de=e=t}while(e!==null);ge===0&&(ge=5)}function Ln(t,e,n){var r=K,s=nt.transition;try{nt.transition=null,K=1,Ax(t,e,n,r)}finally{nt.transition=s,K=r}return null}function Ax(t,e,n,r){do Pr();while(ln!==null);if(H&6)throw Error(E(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(E(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(h0(t,i),t===Se&&(de=Se=null,Ee=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ji||(Ji=!0,Ug(Co,function(){return Pr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=nt.transition,nt.transition=null;var o=K;K=1;var l=H;H|=4,Wu.current=null,kx(t,n),Rg(n,t),J0(ic),No=!!sc,ic=sc=null,t.current=n,Nx(n),r0(),H=l,K=o,nt.transition=i}else t.current=n;if(Ji&&(Ji=!1,ln=t,$o=s),i=t.pendingLanes,i===0&&(pn=null),o0(n.stateNode),He(t,ue()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Wo)throw Wo=!1,t=Cc,Cc=null,t;return $o&1&&t.tag!==0&&Pr(),i=t.pendingLanes,i&1?t===kc?js++:(js=0,kc=t):js=0,Rn(),null}function Pr(){if(ln!==null){var t=gm($o),e=nt.transition,n=K;try{if(nt.transition=null,K=16>t?16:t,ln===null)var r=!1;else{if(t=ln,ln=null,$o=0,H&6)throw Error(E(331));var s=H;for(H|=4,P=t.current;P!==null;){var i=P,o=i.child;if(P.flags&16){var l=i.deletions;if(l!==null){for(var a=0;a<l.length;a++){var u=l[a];for(P=u;P!==null;){var h=P;switch(h.tag){case 0:case 11:case 15:Ps(8,h,i)}var d=h.child;if(d!==null)d.return=h,P=d;else for(;P!==null;){h=P;var f=h.sibling,v=h.return;if(Ng(h),h===u){P=null;break}if(f!==null){f.return=v,P=f;break}P=v}}}var y=i.alternate;if(y!==null){var _=y.child;if(_!==null){y.child=null;do{var S=_.sibling;_.sibling=null,_=S}while(_!==null)}}P=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,P=o;else e:for(;P!==null;){if(i=P,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ps(9,i,i.return)}var m=i.sibling;if(m!==null){m.return=i.return,P=m;break e}P=i.return}}var p=t.current;for(P=p;P!==null;){o=P;var g=o.child;if(o.subtreeFlags&2064&&g!==null)g.return=o,P=g;else e:for(o=p;P!==null;){if(l=P,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:El(9,l)}}catch(C){oe(l,l.return,C)}if(l===o){P=null;break e}var x=l.sibling;if(x!==null){x.return=l.return,P=x;break e}P=l.return}}if(H=s,Rn(),bt&&typeof bt.onPostCommitFiberRoot=="function")try{bt.onPostCommitFiberRoot(gl,t)}catch{}r=!0}return r}finally{K=n,nt.transition=e}}return!1}function nf(t,e,n){e=Wr(n,e),e=gg(t,e,1),t=fn(t,e,1),e=Oe(),t!==null&&(_i(t,1,e),He(t,e))}function oe(t,e,n){if(t.tag===3)nf(t,t,n);else for(;e!==null;){if(e.tag===3){nf(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(pn===null||!pn.has(r))){t=Wr(n,t),t=yg(e,t,1),e=fn(e,t,1),t=Oe(),e!==null&&(_i(e,1,t),He(e,t));break}}e=e.return}}function jx(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Oe(),t.pingedLanes|=t.suspendedLanes&n,Se===t&&(Ee&n)===n&&(ge===4||ge===3&&(Ee&130023424)===Ee&&500>ue()-Hu?Hn(t,0):$u|=n),He(t,e)}function Mg(t,e){e===0&&(t.mode&1?(e=Wi,Wi<<=1,!(Wi&130023424)&&(Wi=4194304)):e=1);var n=Oe();t=zt(t,e),t!==null&&(_i(t,e,n),He(t,n))}function Dx(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Mg(t,n)}function Ox(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(E(314))}r!==null&&r.delete(e),Mg(t,n)}var Fg;Fg=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||We.current)ze=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ze=!1,Sx(t,e,n);ze=!!(t.flags&131072)}else ze=!1,ne&&e.flags&1048576&&Wm(e,Do,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ho(t,e),t=e.pendingProps;var s=Fr(e,Ae.current);Rr(e,n),s=Mu(null,e,r,t,s,n);var i=Fu();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,$e(r)?(i=!0,Ao(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Au(e),s.updater=bl,e.stateNode=s,s._reactInternals=e,pc(e,r,t,n),e=yc(null,e,r,!0,i,n)):(e.tag=0,ne&&i&&Cu(e),je(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ho(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Mx(r),t=lt(r,t),s){case 0:e=gc(null,e,r,t,n);break e;case 1:e=qh(null,e,r,t,n);break e;case 11:e=Hh(null,e,r,t,n);break e;case 14:e=Vh(null,e,r,lt(r.type,t),n);break e}throw Error(E(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:lt(r,s),gc(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:lt(r,s),qh(t,e,r,s,n);case 3:e:{if(wg(e),t===null)throw Error(E(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Km(t,e),Mo(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Wr(Error(E(423)),e),e=Gh(t,e,r,n,s);break e}else if(r!==s){s=Wr(Error(E(424)),e),e=Gh(t,e,r,n,s);break e}else for(Ke=hn(e.stateNode.containerInfo.firstChild),Qe=e,ne=!0,ct=null,n=qm(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ur(),r===s){e=Bt(t,e,n);break e}je(t,e,r,n)}e=e.child}return e;case 5:return Qm(e),t===null&&dc(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,oc(r,s)?o=null:i!==null&&oc(r,i)&&(e.flags|=32),xg(t,e),je(t,e,o,n),e.child;case 6:return t===null&&dc(e),null;case 13:return Sg(t,e,n);case 4:return ju(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=zr(e,null,r,n):je(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:lt(r,s),Hh(t,e,r,s,n);case 7:return je(t,e,e.pendingProps,n),e.child;case 8:return je(t,e,e.pendingProps.children,n),e.child;case 12:return je(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,J(Oo,r._currentValue),r._currentValue=o,i!==null)if(vt(i.value,o)){if(i.children===s.children&&!We.current){e=Bt(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(i.tag===1){a=Lt(-1,n&-n),a.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?a.next=a:(a.next=h.next,h.next=a),u.pending=a}}i.lanes|=n,a=i.alternate,a!==null&&(a.lanes|=n),hc(i.return,n,e),l.lanes|=n;break}a=a.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(E(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),hc(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}je(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Rr(e,n),s=rt(s),r=r(s),e.flags|=1,je(t,e,r,n),e.child;case 14:return r=e.type,s=lt(r,e.pendingProps),s=lt(r.type,s),Vh(t,e,r,s,n);case 15:return vg(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:lt(r,s),ho(t,e),e.tag=1,$e(r)?(t=!0,Ao(e)):t=!1,Rr(e,n),mg(e,r,s),pc(e,r,s,n),yc(null,e,r,!0,t,n);case 19:return bg(t,e,n);case 22:return _g(t,e,n)}throw Error(E(156,e.tag))};function Ug(t,e){return hm(t,e)}function Lx(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tt(t,e,n,r){return new Lx(t,e,n,r)}function Ku(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Mx(t){if(typeof t=="function")return Ku(t)?1:0;if(t!=null){if(t=t.$$typeof,t===fu)return 11;if(t===pu)return 14}return 2}function gn(t,e){var n=t.alternate;return n===null?(n=tt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function mo(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Ku(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case fr:return Vn(n.children,s,i,e);case hu:o=8,s|=8;break;case Fa:return t=tt(12,n,e,s|2),t.elementType=Fa,t.lanes=i,t;case Ua:return t=tt(13,n,e,s),t.elementType=Ua,t.lanes=i,t;case za:return t=tt(19,n,e,s),t.elementType=za,t.lanes=i,t;case Qp:return kl(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Gp:o=10;break e;case Kp:o=9;break e;case fu:o=11;break e;case pu:o=14;break e;case Xt:o=16,r=null;break e}throw Error(E(130,t==null?t:typeof t,""))}return e=tt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Vn(t,e,n,r){return t=tt(7,t,r,e),t.lanes=n,t}function kl(t,e,n,r){return t=tt(22,t,r,e),t.elementType=Qp,t.lanes=n,t.stateNode={isHidden:!1},t}function _a(t,e,n){return t=tt(6,t,null,e),t.lanes=n,t}function xa(t,e,n){return e=tt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Fx(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ea(0),this.expirationTimes=ea(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ea(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Qu(t,e,n,r,s,i,o,l,a){return t=new Fx(t,e,n,l,a),e===1?(e=1,i===!0&&(e|=8)):e=0,i=tt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Au(i),t}function Ux(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:hr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function zg(t){if(!t)return En;t=t._reactInternals;e:{if(or(t)!==t||t.tag!==1)throw Error(E(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if($e(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(E(171))}if(t.tag===1){var n=t.type;if($e(n))return zm(t,n,e)}return e}function Bg(t,e,n,r,s,i,o,l,a){return t=Qu(n,r,!0,t,s,i,o,l,a),t.context=zg(null),n=t.current,r=Oe(),s=mn(n),i=Lt(r,s),i.callback=e??null,fn(n,i,s),t.current.lanes=s,_i(t,s,r),He(t,r),t}function Nl(t,e,n,r){var s=e.current,i=Oe(),o=mn(s);return n=zg(n),e.context===null?e.context=n:e.pendingContext=n,e=Lt(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=fn(s,e,o),t!==null&&(mt(t,s,o,i),ao(t,s,o)),o}function Vo(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function rf(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Yu(t,e){rf(t,e),(t=t.alternate)&&rf(t,e)}function zx(){return null}var Wg=typeof reportError=="function"?reportError:function(t){console.error(t)};function Xu(t){this._internalRoot=t}Il.prototype.render=Xu.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(E(409));Nl(t,e,null,null)};Il.prototype.unmount=Xu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Jn(function(){Nl(null,t,null,null)}),e[Ut]=null}};function Il(t){this._internalRoot=t}Il.prototype.unstable_scheduleHydration=function(t){if(t){var e=_m();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Zt.length&&e!==0&&e<Zt[n].priority;n++);Zt.splice(n,0,t),n===0&&wm(t)}};function Ju(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Tl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function sf(){}function Bx(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Vo(o);i.call(u)}}var o=Bg(e,r,t,0,null,!1,!1,"",sf);return t._reactRootContainer=o,t[Ut]=o.current,Ys(t.nodeType===8?t.parentNode:t),Jn(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=Vo(a);l.call(u)}}var a=Qu(t,0,!1,null,null,!1,!1,"",sf);return t._reactRootContainer=a,t[Ut]=a.current,Ys(t.nodeType===8?t.parentNode:t),Jn(function(){Nl(e,a,n,r)}),a}function Rl(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var a=Vo(o);l.call(a)}}Nl(e,o,t,s)}else o=Bx(n,e,t,s,r);return Vo(o)}ym=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=bs(e.pendingLanes);n!==0&&(yu(e,n|1),He(e,ue()),!(H&6)&&($r=ue()+500,Rn()))}break;case 13:Jn(function(){var r=zt(t,1);if(r!==null){var s=Oe();mt(r,t,1,s)}}),Yu(t,1)}};vu=function(t){if(t.tag===13){var e=zt(t,134217728);if(e!==null){var n=Oe();mt(e,t,134217728,n)}Yu(t,134217728)}};vm=function(t){if(t.tag===13){var e=mn(t),n=zt(t,e);if(n!==null){var r=Oe();mt(n,t,e,r)}Yu(t,e)}};_m=function(){return K};xm=function(t,e){var n=K;try{return K=t,e()}finally{K=n}};Ya=function(t,e,n){switch(e){case"input":if($a(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=xl(r);if(!s)throw Error(E(90));Xp(r),$a(r,s)}}}break;case"textarea":Zp(t,n);break;case"select":e=n.value,e!=null&&kr(t,!!n.multiple,e,!1)}};om=Vu;lm=Jn;var Wx={usingClientEntryPoint:!1,Events:[wi,yr,xl,sm,im,Vu]},gs={findFiberByHostInstance:Un,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$x={bundleType:gs.bundleType,version:gs.version,rendererPackageName:gs.rendererPackageName,rendererConfig:gs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:qt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=um(t),t===null?null:t.stateNode},findFiberByHostInstance:gs.findFiberByHostInstance||zx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zi.isDisabled&&Zi.supportsFiber)try{gl=Zi.inject($x),bt=Zi}catch{}}Xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Wx;Xe.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ju(e))throw Error(E(200));return Ux(t,e,null,n)};Xe.createRoot=function(t,e){if(!Ju(t))throw Error(E(299));var n=!1,r="",s=Wg;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Qu(t,1,!1,null,null,n,!1,r,s),t[Ut]=e.current,Ys(t.nodeType===8?t.parentNode:t),new Xu(e)};Xe.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(E(188)):(t=Object.keys(t).join(","),Error(E(268,t)));return t=um(e),t=t===null?null:t.stateNode,t};Xe.flushSync=function(t){return Jn(t)};Xe.hydrate=function(t,e,n){if(!Tl(e))throw Error(E(200));return Rl(null,t,e,!0,n)};Xe.hydrateRoot=function(t,e,n){if(!Ju(t))throw Error(E(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Wg;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Bg(e,null,t,1,n??null,s,!1,i,o),t[Ut]=e.current,Ys(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Il(e)};Xe.render=function(t,e,n){if(!Tl(e))throw Error(E(200));return Rl(null,t,e,!1,n)};Xe.unmountComponentAtNode=function(t){if(!Tl(t))throw Error(E(40));return t._reactRootContainer?(Jn(function(){Rl(null,null,t,!1,function(){t._reactRootContainer=null,t[Ut]=null})}),!0):!1};Xe.unstable_batchedUpdates=Vu;Xe.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Tl(n))throw Error(E(200));if(t==null||t._reactInternals===void 0)throw Error(E(38));return Rl(t,e,n,!1,r)};Xe.version="18.3.1-next-f1338f8080-20240426";function $g(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($g)}catch(t){console.error(t)}}$g(),$p.exports=Xe;var Hx=$p.exports,of=Hx;La.createRoot=of.createRoot,La.hydrateRoot=of.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ii(){return ii=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ii.apply(this,arguments)}var an;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(an||(an={}));const lf="popstate";function Vx(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:l}=r.location;return Tc("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:qo(s)}return Gx(e,n,null,t)}function he(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Zu(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function qx(){return Math.random().toString(36).substr(2,8)}function af(t,e){return{usr:t.state,key:t.key,idx:e}}function Tc(t,e,n,r){return n===void 0&&(n=null),ii({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Zr(e):e,{state:n,key:e&&e.key||r||qx()})}function qo(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Zr(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Gx(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l=an.Pop,a=null,u=h();u==null&&(u=0,o.replaceState(ii({},o.state,{idx:u}),""));function h(){return(o.state||{idx:null}).idx}function d(){l=an.Pop;let S=h(),m=S==null?null:S-u;u=S,a&&a({action:l,location:_.location,delta:m})}function f(S,m){l=an.Push;let p=Tc(_.location,S,m);u=h()+1;let g=af(p,u),x=_.createHref(p);try{o.pushState(g,"",x)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;s.location.assign(x)}i&&a&&a({action:l,location:_.location,delta:1})}function v(S,m){l=an.Replace;let p=Tc(_.location,S,m);u=h();let g=af(p,u),x=_.createHref(p);o.replaceState(g,"",x),i&&a&&a({action:l,location:_.location,delta:0})}function y(S){let m=s.location.origin!=="null"?s.location.origin:s.location.href,p=typeof S=="string"?S:qo(S);return p=p.replace(/ $/,"%20"),he(m,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,m)}let _={get action(){return l},get location(){return t(s,o)},listen(S){if(a)throw new Error("A history only accepts one active listener");return s.addEventListener(lf,d),a=S,()=>{s.removeEventListener(lf,d),a=null}},createHref(S){return e(s,S)},createURL:y,encodeLocation(S){let m=y(S);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:f,replace:v,go(S){return o.go(S)}};return _}var cf;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(cf||(cf={}));function Kx(t,e,n){return n===void 0&&(n="/"),Qx(t,e,n)}function Qx(t,e,n,r){let s=typeof e=="string"?Zr(e):e,i=ed(s.pathname||"/",n);if(i==null)return null;let o=Hg(t);Yx(o);let l=null;for(let a=0;l==null&&a<o.length;++a){let u=aw(i);l=iw(o[a],u)}return l}function Hg(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,l)=>{let a={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};a.relativePath.startsWith("/")&&(he(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),a.relativePath=a.relativePath.slice(r.length));let u=yn([r,a.relativePath]),h=n.concat(a);i.children&&i.children.length>0&&(he(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Hg(i.children,e,h,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:rw(u,i.index),routesMeta:h})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let a of Vg(i.path))s(i,o,a)}),e}function Vg(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=Vg(r.join("/")),l=[];return l.push(...o.map(a=>a===""?i:[i,a].join("/"))),s&&l.push(...o),l.map(a=>t.startsWith("/")&&a===""?"/":a)}function Yx(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:sw(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Xx=/^:[\w-]+$/,Jx=3,Zx=2,ew=1,tw=10,nw=-2,uf=t=>t==="*";function rw(t,e){let n=t.split("/"),r=n.length;return n.some(uf)&&(r+=nw),e&&(r+=Zx),n.filter(s=>!uf(s)).reduce((s,i)=>s+(Xx.test(i)?Jx:i===""?ew:tw),r)}function sw(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function iw(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let l=0;l<r.length;++l){let a=r[l],u=l===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",d=ow({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},h),f=a.route;if(!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:yn([i,d.pathname]),pathnameBase:fw(yn([i,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(i=yn([i,d.pathnameBase]))}return o}function ow(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=lw(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((u,h,d)=>{let{paramName:f,isOptional:v}=h;if(f==="*"){let _=l[d]||"";o=i.slice(0,i.length-_.length).replace(/(.)\/+$/,"$1")}const y=l[d];return v&&!y?u[f]=void 0:u[f]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:t}}function lw(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Zu(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,a)=>(r.push({paramName:l,isOptional:a!=null}),a?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function aw(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Zu(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ed(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const cw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,uw=t=>cw.test(t);function dw(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Zr(t):t,i;if(n)if(uw(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Zu(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=df(n.substring(1),"/"):i=df(n,e)}else i=e;return{pathname:i,search:pw(r),hash:mw(s)}}function df(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function wa(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function hw(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function qg(t,e){let n=hw(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Gg(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Zr(t):(s=ii({},t),he(!s.pathname||!s.pathname.includes("?"),wa("?","pathname","search",s)),he(!s.pathname||!s.pathname.includes("#"),wa("#","pathname","hash",s)),he(!s.search||!s.search.includes("#"),wa("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;s.pathname=f.join("/")}l=d>=0?e[d]:"/"}let a=dw(s,l),u=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&n.endsWith("/");return!a.pathname.endsWith("/")&&(u||h)&&(a.pathname+="/"),a}const yn=t=>t.join("/").replace(/\/\/+/g,"/"),fw=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),pw=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,mw=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function gw(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Kg=["post","put","patch","delete"];new Set(Kg);const yw=["get",...Kg];new Set(yw);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function oi(){return oi=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},oi.apply(this,arguments)}const td=b.createContext(null),vw=b.createContext(null),lr=b.createContext(null),Pl=b.createContext(null),ar=b.createContext({outlet:null,matches:[],isDataRoute:!1}),Qg=b.createContext(null);function _w(t,e){let{relative:n}=e===void 0?{}:e;bi()||he(!1);let{basename:r,navigator:s}=b.useContext(lr),{hash:i,pathname:o,search:l}=Xg(t,{relative:n}),a=o;return r!=="/"&&(a=o==="/"?r:yn([r,o])),s.createHref({pathname:a,search:l,hash:i})}function bi(){return b.useContext(Pl)!=null}function es(){return bi()||he(!1),b.useContext(Pl).location}function Yg(t){b.useContext(lr).static||b.useLayoutEffect(t)}function Al(){let{isDataRoute:t}=b.useContext(ar);return t?Aw():xw()}function xw(){bi()||he(!1);let t=b.useContext(td),{basename:e,future:n,navigator:r}=b.useContext(lr),{matches:s}=b.useContext(ar),{pathname:i}=es(),o=JSON.stringify(qg(s,n.v7_relativeSplatPath)),l=b.useRef(!1);return Yg(()=>{l.current=!0}),b.useCallback(function(u,h){if(h===void 0&&(h={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let d=Gg(u,JSON.parse(o),i,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:yn([e,d.pathname])),(h.replace?r.replace:r.push)(d,h.state,h)},[e,r,o,i,t])}function Xg(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=b.useContext(lr),{matches:s}=b.useContext(ar),{pathname:i}=es(),o=JSON.stringify(qg(s,r.v7_relativeSplatPath));return b.useMemo(()=>Gg(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function ww(t,e){return Sw(t,e)}function Sw(t,e,n,r){bi()||he(!1);let{navigator:s}=b.useContext(lr),{matches:i}=b.useContext(ar),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let a=o?o.pathnameBase:"/";o&&o.route;let u=es(),h;if(e){var d;let S=typeof e=="string"?Zr(e):e;a==="/"||(d=S.pathname)!=null&&d.startsWith(a)||he(!1),h=S}else h=u;let f=h.pathname||"/",v=f;if(a!=="/"){let S=a.replace(/^\//,"").split("/");v="/"+f.replace(/^\//,"").split("/").slice(S.length).join("/")}let y=Kx(t,{pathname:v}),_=Nw(y&&y.map(S=>Object.assign({},S,{params:Object.assign({},l,S.params),pathname:yn([a,s.encodeLocation?s.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?a:yn([a,s.encodeLocation?s.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),i,n,r);return e&&_?b.createElement(Pl.Provider,{value:{location:oi({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:an.Pop}},_):_}function bw(){let t=Pw(),e=gw(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),n?b.createElement("pre",{style:s},n):null,null)}const Ew=b.createElement(bw,null);class Cw extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?b.createElement(ar.Provider,{value:this.props.routeContext},b.createElement(Qg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function kw(t){let{routeContext:e,match:n,children:r}=t,s=b.useContext(td);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),b.createElement(ar.Provider,{value:e},r)}function Nw(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let h=o.findIndex(d=>d.route.id&&(l==null?void 0:l[d.route.id])!==void 0);h>=0||he(!1),o=o.slice(0,Math.min(o.length,h+1))}let a=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=h),d.route.id){let{loaderData:f,errors:v}=n,y=d.route.loader&&f[d.route.id]===void 0&&(!v||v[d.route.id]===void 0);if(d.route.lazy||y){a=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((h,d,f)=>{let v,y=!1,_=null,S=null;n&&(v=l&&d.route.id?l[d.route.id]:void 0,_=d.route.errorElement||Ew,a&&(u<0&&f===0?(jw("route-fallback"),y=!0,S=null):u===f&&(y=!0,S=d.route.hydrateFallbackElement||null)));let m=e.concat(o.slice(0,f+1)),p=()=>{let g;return v?g=_:y?g=S:d.route.Component?g=b.createElement(d.route.Component,null):d.route.element?g=d.route.element:g=h,b.createElement(kw,{match:d,routeContext:{outlet:h,matches:m,isDataRoute:n!=null},children:g})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?b.createElement(Cw,{location:n.location,revalidation:n.revalidation,component:_,error:v,children:p(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):p()},null)}var Jg=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Jg||{}),Zg=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Zg||{});function Iw(t){let e=b.useContext(td);return e||he(!1),e}function Tw(t){let e=b.useContext(vw);return e||he(!1),e}function Rw(t){let e=b.useContext(ar);return e||he(!1),e}function ey(t){let e=Rw(),n=e.matches[e.matches.length-1];return n.route.id||he(!1),n.route.id}function Pw(){var t;let e=b.useContext(Qg),n=Tw(),r=ey();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Aw(){let{router:t}=Iw(Jg.UseNavigateStable),e=ey(Zg.UseNavigateStable),n=b.useRef(!1);return Yg(()=>{n.current=!0}),b.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,oi({fromRouteId:e},i)))},[t,e])}const hf={};function jw(t,e,n){hf[t]||(hf[t]=!0)}function Dw(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function It(t){he(!1)}function Ow(t){let{basename:e="/",children:n=null,location:r,navigationType:s=an.Pop,navigator:i,static:o=!1,future:l}=t;bi()&&he(!1);let a=e.replace(/^\/*/,"/"),u=b.useMemo(()=>({basename:a,navigator:i,static:o,future:oi({v7_relativeSplatPath:!1},l)}),[a,l,i,o]);typeof r=="string"&&(r=Zr(r));let{pathname:h="/",search:d="",hash:f="",state:v=null,key:y="default"}=r,_=b.useMemo(()=>{let S=ed(h,a);return S==null?null:{location:{pathname:S,search:d,hash:f,state:v,key:y},navigationType:s}},[a,h,d,f,v,y,s]);return _==null?null:b.createElement(lr.Provider,{value:u},b.createElement(Pl.Provider,{children:n,value:_}))}function Lw(t){let{children:e,location:n}=t;return ww(Rc(e),n)}new Promise(()=>{});function Rc(t,e){e===void 0&&(e=[]);let n=[];return b.Children.forEach(t,(r,s)=>{if(!b.isValidElement(r))return;let i=[...e,s];if(r.type===b.Fragment){n.push.apply(n,Rc(r.props.children,i));return}r.type!==It&&he(!1),!r.props.index||!r.props.children||he(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Rc(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pc(){return Pc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Pc.apply(this,arguments)}function Mw(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function Fw(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Uw(t,e){return t.button===0&&(!e||e==="_self")&&!Fw(t)}const zw=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Bw="6";try{window.__reactRouterVersion=Bw}catch{}const Ww="startTransition",ff=j_[Ww];function $w(t){let{basename:e,children:n,future:r,window:s}=t,i=b.useRef();i.current==null&&(i.current=Vx({window:s,v5Compat:!0}));let o=i.current,[l,a]=b.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},h=b.useCallback(d=>{u&&ff?ff(()=>a(d)):a(d)},[a,u]);return b.useLayoutEffect(()=>o.listen(h),[o,h]),b.useEffect(()=>Dw(r),[r]),b.createElement(Ow,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const Hw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Vw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ce=b.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:l,target:a,to:u,preventScrollReset:h,viewTransition:d}=e,f=Mw(e,zw),{basename:v}=b.useContext(lr),y,_=!1;if(typeof u=="string"&&Vw.test(u)&&(y=u,Hw))try{let g=new URL(window.location.href),x=u.startsWith("//")?new URL(g.protocol+u):new URL(u),C=ed(x.pathname,v);x.origin===g.origin&&C!=null?u=C+x.search+x.hash:_=!0}catch{}let S=_w(u,{relative:s}),m=qw(u,{replace:o,state:l,target:a,preventScrollReset:h,relative:s,viewTransition:d});function p(g){r&&r(g),g.defaultPrevented||m(g)}return b.createElement("a",Pc({},f,{href:y||S,onClick:_||i?r:p,ref:n,target:a}))});var pf;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(pf||(pf={}));var mf;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(mf||(mf={}));function qw(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:l}=e===void 0?{}:e,a=Al(),u=es(),h=Xg(t,{relative:o});return b.useCallback(d=>{if(Uw(d,n)){d.preventDefault();let f=r!==void 0?r:qo(u)===qo(h);a(t,{replace:f,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[u,a,h,r,s,n,t,i,o,l])}function Gw(){const t=es(),[e,n]=b.useState(!1),r=s=>t.pathname===s;return c.jsxs("nav",{className:"bg-slate-900 border-b border-slate-700 sticky top-0 z-50",children:[c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between h-16 items-center",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("a",{className:"nav-logo mr-6 cursor-pointer",onClick:s=>{s.preventDefault(),window.parent.location.href="/home"},href:"/home","data-discover":"true",children:"CHIRP"}),c.jsx(ce,{to:"/",className:"flex items-center",children:c.jsx("span",{className:"text-cyber-blue text-xl font-bold",children:" Learn with Chirp"})}),c.jsxs("div",{className:"hidden sm:ml-6 sm:flex sm:space-x-4",children:[c.jsx(ce,{to:"/",className:`inline-flex items-center px-3 py-2 rounded-md text-sm font-medium ${r("/")?"bg-slate-800 text-cyber-blue":"text-gray-300 hover:bg-slate-700 hover:text-cyber-blue"}`,children:" Home"}),c.jsx(ce,{to:"/defender",className:`inline-flex items-center px-3 py-2 rounded-md text-sm font-medium ${r("/defender")?"bg-slate-800 text-cyber-green":"text-gray-300 hover:bg-slate-700 hover:text-cyber-green"}`,children:" Defender"}),c.jsx(ce,{to:"/attacker",className:`inline-flex items-center px-3 py-2 rounded-md text-sm font-medium ${r("/attacker")?"bg-slate-800 text-cyber-red":"text-gray-300 hover:bg-slate-700 hover:text-cyber-red"}`,children:" Attacker"}),c.jsx(ce,{to:"/education",className:`inline-flex items-center px-3 py-2 rounded-md text-sm font-medium ${r("/education")?"bg-slate-800 text-cyber-yellow":"text-gray-300 hover:bg-slate-700 hover:text-cyber-yellow"}`,children:" Education"}),c.jsx(ce,{to:"/quiz",className:`inline-flex items-center px-3 py-2 rounded-md text-sm font-medium ${r("/quiz")?"bg-slate-800 text-cyber-yellow":"text-gray-300 hover:bg-slate-700 hover:text-cyber-yellow"}`,children:" Quiz"}),c.jsx(ce,{to:"/challenges",className:`inline-flex items-center px-3 py-2 rounded-md text-sm font-medium ${r("/challenges")?"bg-slate-800 text-cyber-yellow":"text-gray-300 hover:bg-slate-700 hover:text-cyber-yellow"}`,children:" Challenges"}),c.jsx(ce,{to:"/services",className:`inline-flex items-center px-3 py-2 rounded-md text-sm font-medium ${r("/services")?"bg-slate-800 text-cyber-blue":"text-gray-300 hover:bg-slate-700 hover:text-cyber-blue"}`,children:" Services"})]})]}),c.jsx("div",{className:"flex items-center",children:c.jsx("div",{className:"sm:hidden",children:c.jsxs("button",{type:"button",className:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white","aria-controls":"mobile-menu","aria-expanded":"false",onClick:()=>n(!e),children:[c.jsx("span",{className:"sr-only",children:"Open main menu"}),e?c.jsx("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}):c.jsx("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})]})})})]})}),e&&c.jsx("div",{className:"sm:hidden",id:"mobile-menu",children:c.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1",children:[c.jsx(ce,{to:"/",className:`block px-3 py-2 rounded-md text-base font-medium ${r("/")?"bg-slate-800 text-cyber-blue":"text-gray-300 hover:bg-slate-700 hover:text-cyber-blue"}`,children:" Home"}),c.jsx(ce,{to:"/defender",className:`block px-3 py-2 rounded-md text-base font-medium ${r("/defender")?"bg-slate-800 text-cyber-green":"text-gray-300 hover:bg-slate-700 hover:text-cyber-green"}`,children:" Defender"}),c.jsx(ce,{to:"/attacker",className:`block px-3 py-2 rounded-md text-base font-medium ${r("/attacker")?"bg-slate-800 text-cyber-red":"text-gray-300 hover:bg-slate-700 hover:text-cyber-red"}`,children:" Attacker"}),c.jsx(ce,{to:"/education",className:`block px-3 py-2 rounded-md text-base font-medium ${r("/education")?"bg-slate-800 text-cyber-yellow":"text-gray-300 hover:bg-slate-700 hover:text-cyber-yellow"}`,children:" Education"}),c.jsx(ce,{to:"/quiz",className:`block px-3 py-2 rounded-md text-base font-medium ${r("/quiz")?"bg-slate-800 text-cyber-yellow":"text-gray-300 hover:bg-slate-700 hover:text-cyber-yellow"}`,children:" Quiz"}),c.jsx(ce,{to:"/challenges",className:`block px-3 py-2 rounded-md text-base font-medium ${r("/challenges")?"bg-slate-800 text-cyber-yellow":"text-gray-300 hover:bg-slate-700 hover:text-cyber-yellow"}`,children:" Challenges"}),c.jsx(ce,{to:"/services",className:`block px-3 py-2 rounded-md text-base font-medium ${r("/services")?"bg-slate-800 text-cyber-blue":"text-gray-300 hover:bg-slate-700 hover:text-cyber-blue"}`,children:" Services"})]})})]})}function gf(){return c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[c.jsxs("div",{className:"text-center mb-16",children:[c.jsx("h1",{className:"text-5xl font-bold text-white mb-4",children:"Cybersecurity Platform"}),c.jsx("p",{className:"text-xl text-gray-400 mb-8",children:"Learn cybersecurity through interactive defense and attack simulations"}),c.jsxs("div",{className:"flex gap-4 justify-center flex-wrap",children:[c.jsx(ce,{to:"/defender",className:"bg-cyber-green hover:bg-green-600 text-white font-bold py-3 px-8 rounded-lg transition duration-200",children:" Play as Defender"}),c.jsx(ce,{to:"/attacker",className:"bg-cyber-red hover:bg-red-600 text-white font-bold py-3 px-8 rounded-lg transition duration-200",children:" Play as Attacker"}),c.jsx(ce,{to:"/challenges",className:"bg-cyber-yellow hover:bg-yellow-600 text-white font-bold py-3 px-8 rounded-lg transition duration-200",children:" Challenges"})]})]}),c.jsxs("div",{className:"grid md:grid-cols-2 gap-8 mb-12",children:[c.jsxs("div",{className:"bg-slate-800 rounded-lg p-6 border border-slate-700",children:[c.jsx("h2",{className:"text-2xl font-bold text-cyber-green mb-4",children:" Defender Mode"}),c.jsx("p",{className:"text-gray-300 mb-4",children:"Set up security measures to protect your system from attacks. Configure firewalls, implement authentication, enable encryption, and monitor threats in real-time."}),c.jsxs("ul",{className:"list-disc list-inside text-gray-400 space-y-2",children:[c.jsx("li",{children:"Configure firewall rules"}),c.jsx("li",{children:"Set up authentication systems"}),c.jsx("li",{children:"Enable encryption protocols"}),c.jsx("li",{children:"Monitor security logs"}),c.jsx("li",{children:"Implement rate limiting"})]})]}),c.jsxs("div",{className:"bg-slate-800 rounded-lg p-6 border border-slate-700",children:[c.jsx("h2",{className:"text-2xl font-bold text-cyber-red mb-4",children:" Attacker Mode"}),c.jsx("p",{className:"text-gray-300 mb-4",children:"Test security defenses by attempting various attack vectors. Learn about common vulnerabilities and how attackers exploit them."}),c.jsxs("ul",{className:"list-disc list-inside text-gray-400 space-y-2",children:[c.jsx("li",{children:"SQL Injection attacks"}),c.jsx("li",{children:"XSS (Cross-Site Scripting)"}),c.jsx("li",{children:"Brute force attempts"}),c.jsx("li",{children:"DDoS simulation"}),c.jsx("li",{children:"API endpoint exploitation"})]})]})]}),c.jsxs("div",{className:"bg-gradient-to-r from-cyber-blue/20 to-cyber-green/20 rounded-lg p-8 border border-cyber-blue/30",children:[c.jsx("h2",{className:"text-3xl font-bold text-white mb-4 text-center",children:"How It Works"}),c.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mt-8",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-4xl mb-4",children:"1"}),c.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Choose Your Role"}),c.jsx("p",{className:"text-gray-300",children:"Play as a Defender to secure systems or as an Attacker to test defenses"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-4xl mb-4",children:"2"}),c.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Configure & Attack"}),c.jsx("p",{className:"text-gray-300",children:"Defenders set up security measures. Attackers attempt to breach them"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-4xl mb-4",children:"3"}),c.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Learn & Improve"}),c.jsx("p",{className:"text-gray-300",children:"Understand what works, what doesn't, and how to improve your security"})]})]})]})]})}const Kw=()=>{};var yf={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ty={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k=function(t,e){if(!t)throw ts(e)},ts=function(t){return new Error("Firebase Database ("+ty.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ny=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Qw=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],a=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(a&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},nd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,a=s+2<t.length,u=a?t[s+2]:0,h=i>>2,d=(i&3)<<4|l>>4;let f=(l&15)<<2|u>>6,v=u&63;a||(v=64,o||(f=64)),r.push(n[h],n[d],n[f],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ny(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Qw(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||u==null||d==null)throw new Yw;const f=i<<2|l>>4;if(r.push(f),u!==64){const v=l<<4&240|u>>2;if(r.push(v),d!==64){const y=u<<6&192|d;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Yw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ry=function(t){const e=ny(t);return nd.encodeByteArray(e,!0)},Go=function(t){return ry(t).replace(/\./g,"")},Ko=function(t){try{return nd.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xw(t){return sy(void 0,t)}function sy(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Jw(n)||(t[n]=sy(t[n],e[n]));return t}function Jw(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eS=()=>Zw().__FIREBASE_DEFAULTS__,tS=()=>{if(typeof process>"u"||typeof yf>"u")return;const t=yf.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},nS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Ko(t[1]);return e&&JSON.parse(e)},rd=()=>{try{return Kw()||eS()||tS()||nS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},iy=t=>{var e,n;return(n=(e=rd())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},rS=t=>{const e=iy(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},oy=()=>{var t;return(t=rd())==null?void 0:t.config},ly=t=>{var e;return(e=rd())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ns(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ay(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Go(JSON.stringify(n)),Go(JSON.stringify(o)),""].join(".")}const Ds={};function iS(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ds))Ds[e]?t.emulator.push(e):t.prod.push(e);return t}function oS(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let vf=!1;function cy(t,e){if(typeof window>"u"||typeof document>"u"||!ns(window.location.host)||Ds[t]===e||Ds[t]||vf)return;Ds[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",i=iS().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function l(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function a(f,v){f.setAttribute("width","24"),f.setAttribute("id",v),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function u(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{vf=!0,o()},f}function h(f,v){f.setAttribute("id",v),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){const f=oS(r),v=n("text"),y=document.getElementById(v)||document.createElement("span"),_=n("learnmore"),S=document.getElementById(_)||document.createElement("a"),m=n("preprendIcon"),p=document.getElementById(m)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const g=f.element;l(g),h(S,_);const x=u();a(p,m),g.append(p,y,S,x),document.body.appendChild(g)}i?(y.innerText="Preview backend disconnected.",p.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(p.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,y.innerText="Preview backend running in this workspace."),y.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Le(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function sd(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Le())}function lS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function aS(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function uy(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cS(){const t=Le();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function uS(){return ty.NODE_ADMIN===!0}function dS(){try{return typeof indexedDB=="object"}catch{return!1}}function hS(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS="FirebaseError";class Pn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=fS,Object.setPrototypeOf(this,Pn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ei.prototype.create)}}class Ei{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?pS(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Pn(s,l,r)}}function pS(t,e){return t.replace(mS,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const mS=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function li(t){return JSON.parse(t)}function pe(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dy=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=li(Ko(i[0])||""),n=li(Ko(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},gS=function(t){const e=dy(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},yS=function(t){const e=dy(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Hr(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Ac(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Qo(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function Zn(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(_f(i)&&_f(o)){if(!Zn(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function _f(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rs(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const f=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(f<<1|f>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],l=this.chain_[3],a=this.chain_[4],u,h;for(let d=0;d<80;d++){d<40?d<20?(u=l^i&(o^l),h=1518500249):(u=i^o^l,h=1859775393):d<60?(u=i&o|l&(i|o),h=2400959708):(u=i^o^l,h=3395469782);const f=(s<<5|s>>>27)+u+a+h+r[d]&4294967295;a=l,l=o,o=(i<<30|i>>>2)&4294967295,i=s,s=f}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+a&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function _S(t,e){const n=new xS(t,e);return n.subscribe.bind(n)}class xS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");wS(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Sa),s.error===void 0&&(s.error=Sa),s.complete===void 0&&(s.complete=Sa);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wS(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Sa(){}function id(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,k(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Dl=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function it(t){return t&&t._delegate?t._delegate:t}class er{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new jl;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(CS(e))try{this.getOrInitializeService({instanceIdentifier:Mn})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Mn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Mn){return this.instances.has(e)}getOptions(e=Mn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ES(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Mn){return this.component?this.component.multipleInstances?e:Mn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ES(t){return t===Mn?void 0:t}function CS(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new bS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Q;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Q||(Q={}));const NS={debug:Q.DEBUG,verbose:Q.VERBOSE,info:Q.INFO,warn:Q.WARN,error:Q.ERROR,silent:Q.SILENT},IS=Q.INFO,TS={[Q.DEBUG]:"log",[Q.VERBOSE]:"log",[Q.INFO]:"info",[Q.WARN]:"warn",[Q.ERROR]:"error"},RS=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=TS[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class od{constructor(e){this.name=e,this._logLevel=IS,this._logHandler=RS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Q))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?NS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Q.DEBUG,...e),this._logHandler(this,Q.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Q.VERBOSE,...e),this._logHandler(this,Q.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Q.INFO,...e),this._logHandler(this,Q.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Q.WARN,...e),this._logHandler(this,Q.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Q.ERROR,...e),this._logHandler(this,Q.ERROR,...e)}}const PS=(t,e)=>e.some(n=>t instanceof n);let xf,wf;function AS(){return xf||(xf=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jS(){return wf||(wf=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const hy=new WeakMap,jc=new WeakMap,fy=new WeakMap,ba=new WeakMap,ld=new WeakMap;function DS(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(vn(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&hy.set(n,t)}).catch(()=>{}),ld.set(e,t),e}function OS(t){if(jc.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});jc.set(t,e)}let Dc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return jc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||fy.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return vn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function LS(t){Dc=t(Dc)}function MS(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ea(this),e,...n);return fy.set(r,e.sort?e.sort():[e]),vn(r)}:jS().includes(t)?function(...e){return t.apply(Ea(this),e),vn(hy.get(this))}:function(...e){return vn(t.apply(Ea(this),e))}}function FS(t){return typeof t=="function"?MS(t):(t instanceof IDBTransaction&&OS(t),PS(t,AS())?new Proxy(t,Dc):t)}function vn(t){if(t instanceof IDBRequest)return DS(t);if(ba.has(t))return ba.get(t);const e=FS(t);return e!==t&&(ba.set(t,e),ld.set(e,t)),e}const Ea=t=>ld.get(t);function US(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=vn(o);return r&&o.addEventListener("upgradeneeded",a=>{r(vn(o.result),a.oldVersion,a.newVersion,vn(o.transaction),a)}),n&&o.addEventListener("blocked",a=>n(a.oldVersion,a.newVersion,a)),l.then(a=>{i&&a.addEventListener("close",()=>i()),s&&a.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const zS=["get","getKey","getAll","getAllKeys","count"],BS=["put","add","delete","clear"],Ca=new Map;function Sf(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ca.get(e))return Ca.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=BS.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||zS.includes(n)))return;const i=async function(o,...l){const a=this.transaction(o,s?"readwrite":"readonly");let u=a.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),s&&a.done]))[0]};return Ca.set(e,i),i}LS(t=>({...t,get:(e,n,r)=>Sf(e,n)||t.get(e,n,r),has:(e,n)=>!!Sf(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if($S(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function $S(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Oc="@firebase/app",bf="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wt=new od("@firebase/app"),HS="@firebase/app-compat",VS="@firebase/analytics-compat",qS="@firebase/analytics",GS="@firebase/app-check-compat",KS="@firebase/app-check",QS="@firebase/auth",YS="@firebase/auth-compat",XS="@firebase/database",JS="@firebase/data-connect",ZS="@firebase/database-compat",eb="@firebase/functions",tb="@firebase/functions-compat",nb="@firebase/installations",rb="@firebase/installations-compat",sb="@firebase/messaging",ib="@firebase/messaging-compat",ob="@firebase/performance",lb="@firebase/performance-compat",ab="@firebase/remote-config",cb="@firebase/remote-config-compat",ub="@firebase/storage",db="@firebase/storage-compat",hb="@firebase/firestore",fb="@firebase/ai",pb="@firebase/firestore-compat",mb="firebase",gb="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lc="[DEFAULT]",yb={[Oc]:"fire-core",[HS]:"fire-core-compat",[qS]:"fire-analytics",[VS]:"fire-analytics-compat",[KS]:"fire-app-check",[GS]:"fire-app-check-compat",[QS]:"fire-auth",[YS]:"fire-auth-compat",[XS]:"fire-rtdb",[JS]:"fire-data-connect",[ZS]:"fire-rtdb-compat",[eb]:"fire-fn",[tb]:"fire-fn-compat",[nb]:"fire-iid",[rb]:"fire-iid-compat",[sb]:"fire-fcm",[ib]:"fire-fcm-compat",[ob]:"fire-perf",[lb]:"fire-perf-compat",[ab]:"fire-rc",[cb]:"fire-rc-compat",[ub]:"fire-gcs",[db]:"fire-gcs-compat",[hb]:"fire-fst",[pb]:"fire-fst-compat",[fb]:"fire-vertex","fire-js":"fire-js",[mb]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yo=new Map,vb=new Map,Mc=new Map;function Ef(t,e){try{t.container.addComponent(e)}catch(n){Wt.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Vr(t){const e=t.name;if(Mc.has(e))return Wt.debug(`There were multiple attempts to register component ${e}.`),!1;Mc.set(e,t);for(const n of Yo.values())Ef(n,t);for(const n of vb.values())Ef(n,t);return!0}function ad(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function St(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _b={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_n=new Ei("app","Firebase",_b);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new er("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _n.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ss=gb;function py(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Lc,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw _n.create("bad-app-name",{appName:String(s)});if(n||(n=oy()),!n)throw _n.create("no-options");const i=Yo.get(s);if(i){if(Zn(n,i.options)&&Zn(r,i.config))return i;throw _n.create("duplicate-app",{appName:s})}const o=new kS(s);for(const a of Mc.values())o.addComponent(a);const l=new xb(n,r,o);return Yo.set(s,l),l}function my(t=Lc){const e=Yo.get(t);if(!e&&t===Lc&&oy())return py();if(!e)throw _n.create("no-app",{appName:t});return e}function xn(t,e,n){let r=yb[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Wt.warn(o.join(" "));return}Vr(new er(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wb="firebase-heartbeat-database",Sb=1,ai="firebase-heartbeat-store";let ka=null;function gy(){return ka||(ka=US(wb,Sb,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ai)}catch(n){console.warn(n)}}}}).catch(t=>{throw _n.create("idb-open",{originalErrorMessage:t.message})})),ka}async function bb(t){try{const n=(await gy()).transaction(ai),r=await n.objectStore(ai).get(yy(t));return await n.done,r}catch(e){if(e instanceof Pn)Wt.warn(e.message);else{const n=_n.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Wt.warn(n.message)}}}async function Cf(t,e){try{const r=(await gy()).transaction(ai,"readwrite");await r.objectStore(ai).put(e,yy(t)),await r.done}catch(n){if(n instanceof Pn)Wt.warn(n.message);else{const r=_n.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Wt.warn(r.message)}}}function yy(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb=1024,Cb=30;class kb{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Ib(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=kf();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>Cb){const o=Tb(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Wt.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=kf(),{heartbeatsToSend:r,unsentEntries:s}=Nb(this._heartbeatsCache.heartbeats),i=Go(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Wt.warn(n),""}}}function kf(){return new Date().toISOString().substring(0,10)}function Nb(t,e=Eb){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Nf(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Nf(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Ib{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return dS()?hS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await bb(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Cf(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Cf(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Nf(t){return Go(JSON.stringify({version:2,heartbeats:t})).length}function Tb(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rb(t){Vr(new er("platform-logger",e=>new WS(e),"PRIVATE")),Vr(new er("heartbeat",e=>new kb(e),"PRIVATE")),xn(Oc,bf,t),xn(Oc,bf,"esm2020"),xn("fire-js","")}Rb("");var Pb="firebase",Ab="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xn(Pb,Ab,"app");var If={};const Tf="@firebase/database",Rf="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vy="";function jb(t){vy=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),pe(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:li(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Gt(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _y=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Db(e)}}catch{}return new Ob},Wn=_y("localStorage"),Lb=_y("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ar=new od("@firebase/database"),Mb=function(){let t=1;return function(){return t++}}(),xy=function(t){const e=SS(t),n=new vS;n.update(e);const r=n.digest();return nd.encodeByteArray(r)},Ci=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Ci.apply(null,r):typeof r=="object"?e+=pe(r):e+=r,e+=" "}return e};let Os=null,Pf=!0;const Fb=function(t,e){k(!0,"Can't turn on custom loggers persistently."),Ar.logLevel=Q.VERBOSE,Os=Ar.log.bind(Ar)},Pe=function(...t){if(Pf===!0&&(Pf=!1,Os===null&&Lb.get("logging_enabled")===!0&&Fb()),Os){const e=Ci.apply(null,t);Os(e)}},ki=function(t){return function(...e){Pe(t,...e)}},Fc=function(...t){const e="FIREBASE INTERNAL ERROR: "+Ci(...t);Ar.error(e)},$t=function(...t){const e=`FIREBASE FATAL ERROR: ${Ci(...t)}`;throw Ar.error(e),new Error(e)},Ve=function(...t){const e="FIREBASE WARNING: "+Ci(...t);Ar.warn(e)},Ub=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Ve("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},wy=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},zb=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},qr="[MIN_NAME]",tr="[MAX_NAME]",is=function(t,e){if(t===e)return 0;if(t===qr||e===tr)return-1;if(e===qr||t===tr)return 1;{const n=Af(t),r=Af(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},Bb=function(t,e){return t===e?0:t<e?-1:1},ys=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+pe(e))},cd=function(t){if(typeof t!="object"||t===null)return pe(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=pe(e[r]),n+=":",n+=cd(t[e[r]]);return n+="}",n},Sy=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function qe(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const by=function(t){k(!wy(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,l,a;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(l=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=l+r,o=Math.round(t*Math.pow(2,n-l)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const u=[];for(a=n;a;a-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(a=e;a;a-=1)u.push(i%2?1:0),i=Math.floor(i/2);u.push(s?1:0),u.reverse();const h=u.join("");let d="";for(a=0;a<64;a+=8){let f=parseInt(h.substr(a,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},Wb=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},$b=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Hb(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const Vb=new RegExp("^-?(0*)\\d{1,10}$"),qb=-2147483648,Gb=2147483647,Af=function(t){if(Vb.test(t)){const e=Number(t);if(e>=qb&&e<=Gb)return e}return null},os=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Ve("Exception was thrown by user callback.",n),e},Math.floor(0))}},Kb=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ls=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,St(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)==null||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Ve(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Pe("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ve(e)}}class go{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}go.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ud="5",Ey="v",Cy="s",ky="r",Ny="f",Iy=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Ty="ls",Ry="p",Uc="ac",Py="websocket",Ay="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{constructor(e,n,r,s,i=!1,o="",l=!1,a=!1,u=null){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=l,this.isUsingEmulator=a,this.emulatorOptions=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Wn.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Wn.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function Xb(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Dy(t,e,n){k(typeof e=="string","typeof type must == string"),k(typeof n=="object","typeof params must == object");let r;if(e===Py)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Ay)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Xb(t)&&(n.ns=t.namespace);const s=[];return qe(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(){this.counters_={}}incrementCounter(e,n=1){Gt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Xw(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na={},Ia={};function dd(t){const e=t.toString();return Na[e]||(Na[e]=new Jb),Na[e]}function Zb(t,e){const n=t.toString();return Ia[n]||(Ia[n]=e()),Ia[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&os(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jf="start",tE="close",nE="pLPCommand",rE="pRTLPCB",Oy="id",Ly="pw",My="ser",sE="cb",iE="seg",oE="ts",lE="d",aE="dframe",Fy=1870,Uy=30,cE=Fy-Uy,uE=25e3,dE=3e4;class Er{constructor(e,n,r,s,i,o,l){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ki(e),this.stats_=dd(n),this.urlFn=a=>(this.appCheckToken&&(a[Uc]=this.appCheckToken),Dy(n,Ay,a))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new eE(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(dE)),zb(()=>{if(this.isClosed_)return;this.scriptTagHolder=new hd((...i)=>{const[o,l,a,u,h]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===jf)this.id=l,this.password=a;else if(o===tE)l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,l]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,l)},()=>{this.onClosed_()},this.urlFn);const r={};r[jf]="t",r[My]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[sE]=this.scriptTagHolder.uniqueCallbackIdentifier),r[Ey]=ud,this.transportSessionId&&(r[Cy]=this.transportSessionId),this.lastSessionId&&(r[Ty]=this.lastSessionId),this.applicationId&&(r[Ry]=this.applicationId),this.appCheckToken&&(r[Uc]=this.appCheckToken),typeof location<"u"&&location.hostname&&Iy.test(location.hostname)&&(r[ky]=Ny);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Er.forceAllow_=!0}static forceDisallow(){Er.forceDisallow_=!0}static isAvailable(){return Er.forceAllow_?!0:!Er.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Wb()&&!$b()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=pe(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=ry(n),s=Sy(r,cE);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[aE]="t",r[Oy]=e,r[Ly]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=pe(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class hd{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Mb(),window[nE+this.uniqueCallbackIdentifier]=e,window[rE+this.uniqueCallbackIdentifier]=n,this.myIFrame=hd.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(l){Pe("frame writing exception"),l.stack&&Pe(l.stack),Pe(l)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Pe("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[Oy]=this.myID,e[Ly]=this.myPW,e[My]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Uy+r.length<=Fy;){const o=this.pendingSegs.shift();r=r+"&"+iE+s+"="+o.seg+"&"+oE+s+"="+o.ts+"&"+lE+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(uE)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Pe("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE=16384,fE=45e3;let Xo=null;typeof MozWebSocket<"u"?Xo=MozWebSocket:typeof WebSocket<"u"&&(Xo=WebSocket);class ut{constructor(e,n,r,s,i,o,l){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ki(this.connId),this.stats_=dd(n),this.connURL=ut.connectionURL_(n,o,l,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[Ey]=ud,typeof location<"u"&&location.hostname&&Iy.test(location.hostname)&&(o[ky]=Ny),n&&(o[Cy]=n),r&&(o[Ty]=r),s&&(o[Uc]=s),i&&(o[Ry]=i),Dy(e,Py,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Wn.set("previous_websocket_failure",!0);try{let r;uS(),this.mySock=new Xo(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){ut.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Xo!==null&&!ut.forceDisallow_}static previouslyFailed(){return Wn.isInMemoryStorage||Wn.get("previous_websocket_failure")===!0}markConnectionHealthy(){Wn.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=li(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(k(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=pe(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Sy(n,hE);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(fE))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}ut.responsesRequiredToBeHealthy=2;ut.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{static get ALL_TRANSPORTS(){return[Er,ut]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=ut&&ut.isAvailable();let r=n&&!ut.previouslyFailed();if(e.webSocketOnly&&(n||Ve("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[ut];else{const s=this.transports_=[];for(const i of ci.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);ci.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}ci.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE=6e4,mE=5e3,gE=10*1024,yE=100*1024,Ta="t",Df="d",vE="s",Of="r",_E="e",Lf="o",Mf="a",Ff="n",Uf="p",xE="h";class wE{constructor(e,n,r,s,i,o,l,a,u,h){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=l,this.onDisconnect_=a,this.onKill_=u,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ki("c:"+this.id+":"),this.transportManager_=new ci(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=Ls(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>yE?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>gE?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Ta in e){const n=e[Ta];n===Mf?this.upgradeIfSecondaryHealthy_():n===Of?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Lf&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=ys("t",e),r=ys("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Uf,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Mf,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Ff,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=ys("t",e),r=ys("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=ys(Ta,e);if(Df in e){const r=e[Df];if(n===xE){const s={...r};this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===Ff){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===vE?this.onConnectionShutdown_(r):n===Of?this.onReset_(r):n===_E?Fc("Server Error: "+r):n===Lf?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Fc("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),ud!==r&&Ve("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Ls(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(pE))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ls(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(mE))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Uf,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Wn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class By{constructor(e){this.allowedEvents_=e,this.listeners_={},k(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){k(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo extends By{static getInstance(){return new Jo}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!sd()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return k(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zf=32,Bf=768;class Y{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function V(){return new Y("")}function $(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Cn(t){return t.pieces_.length-t.pieceNum_}function X(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Y(t.pieces_,e)}function Wy(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function SE(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function $y(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function Hy(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Y(e,0)}function me(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Y)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new Y(n,0)}function B(t){return t.pieceNum_>=t.pieces_.length}function De(t,e){const n=$(t),r=$(e);if(n===null)return e;if(n===r)return De(X(t),X(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Vy(t,e){if(Cn(t)!==Cn(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function dt(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Cn(t)>Cn(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class bE{constructor(e,n){this.errorPrefix_=n,this.parts_=$y(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Dl(this.parts_[r]);qy(this)}}function EE(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Dl(e),qy(t)}function CE(t){const e=t.parts_.pop();t.byteLength_-=Dl(e),t.parts_.length>0&&(t.byteLength_-=1)}function qy(t){if(t.byteLength_>Bf)throw new Error(t.errorPrefix_+"has a key path longer than "+Bf+" bytes ("+t.byteLength_+").");if(t.parts_.length>zf)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+zf+") or object contains a cycle "+Fn(t))}function Fn(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd extends By{static getInstance(){return new fd}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return k(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs=1e3,kE=60*5*1e3,Wf=30*1e3,NE=1.3,IE=3e4,TE="server_kill",$f=3;class Mt extends zy{constructor(e,n,r,s,i,o,l,a){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=l,this.authOverride_=a,this.id=Mt.nextPersistentConnectionId_++,this.log_=ki("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=vs,this.maxReconnectDelay_=kE,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");fd.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Jo.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(pe(i)),k(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new jl,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const l=o.d;o.s==="ok"?n.resolve(l):n.reject(l)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),k(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),k(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const l={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,l),this.connected_&&this.sendListen_(l)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,l=>{const a=l.d,u=l.s;Mt.warnOnListenWarnings_(a,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",l),u!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(u,a))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Gt(e,"w")){const r=Hr(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();Ve(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||yS(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Wf)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=gS(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),k(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+pe(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Fc("Unrecognized action received from server: "+pe(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){k(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=vs,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=vs,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>IE&&(this.reconnectDelay_=vs),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*NE)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+Mt.nextConnectionId_++,i=this.lastSessionId;let o=!1,l=null;const a=function(){l?l.close():(o=!0,r())},u=function(d){k(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(d)};this.realtime_={close:a,sendRequest:u};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,f]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);o?Pe("getToken() completed but was canceled"):(Pe("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=f&&f.token,l=new wE(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,v=>{Ve(v+" ("+this.repoInfo_.toString()+")"),this.interrupt(TE)},i))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&Ve(d),a())}}}interrupt(e){Pe("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Pe("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Ac(this.interruptReasons_)&&(this.reconnectDelay_=vs,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>cd(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new Y(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){Pe("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=$f&&(this.reconnectDelay_=Wf,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Pe("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=$f&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+vy.replace(/\./g,"-")]=1,sd()?e["framework.cordova"]=1:uy()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Jo.getInstance().currentlyOnline();return Ac(this.interruptReasons_)&&e}}Mt.nextPersistentConnectionId_=0;Mt.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new z(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new z(qr,e),s=new z(qr,n);return this.compare(r,s)!==0}minPost(){return z.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eo;class Gy extends Ol{static get __EMPTY_NODE(){return eo}static set __EMPTY_NODE(e){eo=e}compare(e,n){return is(e.name,n.name)}isDefinedOn(e){throw ts("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return z.MIN}maxPost(){return new z(tr,eo)}makePost(e,n){return k(typeof e=="string","KeyIndex indexValue must always be a string."),new z(e,eo)}toString(){return".key"}}const jr=new Gy;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class xe{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??xe.RED,this.left=s??Be.EMPTY_NODE,this.right=i??Be.EMPTY_NODE}copy(e,n,r,s,i){return new xe(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Be.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Be.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,xe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,xe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}xe.RED=!0;xe.BLACK=!1;class RE{copy(e,n,r,s,i){return this}insert(e,n,r){return new xe(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Be{constructor(e,n=Be.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Be(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,xe.BLACK,null,null))}remove(e){return new Be(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,xe.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new to(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new to(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new to(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new to(this.root_,null,this.comparator_,!0,e)}}Be.EMPTY_NODE=new RE;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PE(t,e){return is(t.name,e.name)}function pd(t,e){return is(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zc;function AE(t){zc=t}const Ky=function(t){return typeof t=="number"?"number:"+by(t):"string:"+t},Qy=function(t){if(t.isLeafNode()){const e=t.val();k(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Gt(e,".sv"),"Priority must be a string or number.")}else k(t===zc||t.isEmpty(),"priority of unexpected type.");k(t===zc||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hf;class ve{static set __childrenNodeConstructor(e){Hf=e}static get __childrenNodeConstructor(){return Hf}constructor(e,n=ve.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,k(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Qy(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new ve(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:ve.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return B(e)?this:$(e)===".priority"?this.priorityNode_:ve.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:ve.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=$(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(k(r!==".priority"||Cn(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,ve.__childrenNodeConstructor.EMPTY_NODE.updateChild(X(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Ky(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=by(this.value_):e+=this.value_,this.lazyHash_=xy(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===ve.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof ve.__childrenNodeConstructor?-1:(k(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=ve.VALUE_TYPE_ORDER.indexOf(n),i=ve.VALUE_TYPE_ORDER.indexOf(r);return k(s>=0,"Unknown leaf type: "+n),k(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}ve.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yy,Xy;function jE(t){Yy=t}function DE(t){Xy=t}class OE extends Ol{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?is(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return z.MIN}maxPost(){return new z(tr,new ve("[PRIORITY-POST]",Xy))}makePost(e,n){const r=Yy(e);return new z(n,new ve("[PRIORITY-POST]",r))}toString(){return".priority"}}const le=new OE;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE=Math.log(2);class ME{constructor(e){const n=i=>parseInt(Math.log(i)/LE,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Zo=function(t,e,n,r){t.sort(e);const s=function(a,u){const h=u-a;let d,f;if(h===0)return null;if(h===1)return d=t[a],f=n?n(d):d,new xe(f,d.node,xe.BLACK,null,null);{const v=parseInt(h/2,10)+a,y=s(a,v),_=s(v+1,u);return d=t[v],f=n?n(d):d,new xe(f,d.node,xe.BLACK,y,_)}},i=function(a){let u=null,h=null,d=t.length;const f=function(y,_){const S=d-y,m=d;d-=y;const p=s(S+1,m),g=t[S],x=n?n(g):g;v(new xe(x,g.node,_,null,p))},v=function(y){u?(u.left=y,u=y):(h=y,u=y)};for(let y=0;y<a.count;++y){const _=a.nextBitIsOne(),S=Math.pow(2,a.count-(y+1));_?f(S,xe.BLACK):(f(S,xe.BLACK),f(S,xe.RED))}return h},o=new ME(t.length),l=i(o);return new Be(r||e,l)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ra;const dr={};class jt{static get Default(){return k(dr&&le,"ChildrenNode.ts has not been loaded"),Ra=Ra||new jt({".priority":dr},{".priority":le}),Ra}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=Hr(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Be?n:null}hasIndex(e){return Gt(this.indexSet_,e.toString())}addIndex(e,n){k(e!==jr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(z.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let l;s?l=Zo(r,e.getCompare()):l=dr;const a=e.toString(),u={...this.indexSet_};u[a]=e;const h={...this.indexes_};return h[a]=l,new jt(h,u)}addToIndexes(e,n){const r=Qo(this.indexes_,(s,i)=>{const o=Hr(this.indexSet_,i);if(k(o,"Missing index implementation for "+i),s===dr)if(o.isDefinedOn(e.node)){const l=[],a=n.getIterator(z.Wrap);let u=a.getNext();for(;u;)u.name!==e.name&&l.push(u),u=a.getNext();return l.push(e),Zo(l,o.getCompare())}else return dr;else{const l=n.get(e.name);let a=s;return l&&(a=a.remove(new z(e.name,l))),a.insert(e,e.node)}});return new jt(r,this.indexSet_)}removeFromIndexes(e,n){const r=Qo(this.indexes_,s=>{if(s===dr)return s;{const i=n.get(e.name);return i?s.remove(new z(e.name,i)):s}});return new jt(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _s;class D{static get EMPTY_NODE(){return _s||(_s=new D(new Be(pd),null,jt.Default))}constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Qy(this.priorityNode_),this.children_.isEmpty()&&k(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||_s}updatePriority(e){return this.children_.isEmpty()?this:new D(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?_s:n}}getChild(e){const n=$(e);return n===null?this:this.getImmediateChild(n).getChild(X(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(k(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new z(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?_s:this.priorityNode_;return new D(s,o,i)}}updateChild(e,n){const r=$(e);if(r===null)return n;{k($(e)!==".priority"||Cn(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(X(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(le,(o,l)=>{n[o]=l.val(e),r++,i&&D.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const l in n)o[l]=n[l];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+Ky(this.getPriority().val())+":"),this.forEachChild(le,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":xy(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new z(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new z(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new z(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,z.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,z.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Ni?-1:0}withIndex(e){if(e===jr||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new D(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===jr||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(le),s=n.getIterator(le);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===jr?null:this.indexMap_.get(e.toString())}}D.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class FE extends D{constructor(){super(new Be(pd),D.EMPTY_NODE,jt.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return D.EMPTY_NODE}isEmpty(){return!1}}const Ni=new FE;Object.defineProperties(z,{MIN:{value:new z(qr,D.EMPTY_NODE)},MAX:{value:new z(tr,Ni)}});Gy.__EMPTY_NODE=D.EMPTY_NODE;ve.__childrenNodeConstructor=D;AE(Ni);DE(Ni);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UE=!0;function we(t,e=null){if(t===null)return D.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),k(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new ve(n,we(e))}if(!(t instanceof Array)&&UE){const n=[];let r=!1;if(qe(t,(o,l)=>{if(o.substring(0,1)!=="."){const a=we(l);a.isEmpty()||(r=r||!a.getPriority().isEmpty(),n.push(new z(o,a)))}}),n.length===0)return D.EMPTY_NODE;const i=Zo(n,PE,o=>o.name,pd);if(r){const o=Zo(n,le.getCompare());return new D(i,we(e),new jt({".priority":o},{".priority":le}))}else return new D(i,we(e),jt.Default)}else{let n=D.EMPTY_NODE;return qe(t,(r,s)=>{if(Gt(t,r)&&r.substring(0,1)!=="."){const i=we(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(we(e))}}jE(we);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE extends Ol{constructor(e){super(),this.indexPath_=e,k(!B(e)&&$(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?is(e.name,n.name):i}makePost(e,n){const r=we(e),s=D.EMPTY_NODE.updateChild(this.indexPath_,r);return new z(n,s)}maxPost(){const e=D.EMPTY_NODE.updateChild(this.indexPath_,Ni);return new z(tr,e)}toString(){return $y(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE extends Ol{compare(e,n){const r=e.node.compareTo(n.node);return r===0?is(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return z.MIN}maxPost(){return z.MAX}makePost(e,n){const r=we(e);return new z(n,r)}toString(){return".value"}}const WE=new BE;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jy(t){return{type:"value",snapshotNode:t}}function Gr(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function ui(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function di(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function $E(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e){this.index_=e}updateChild(e,n,r,s,i,o){k(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const l=e.getImmediateChild(n);return l.getChild(s).equals(r.getChild(s))&&l.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(ui(n,l)):k(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):l.isEmpty()?o.trackChildChange(Gr(n,r)):o.trackChildChange(di(n,r,l))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(le,(s,i)=>{n.hasChild(s)||r.trackChildChange(ui(s,i))}),n.isLeafNode()||n.forEachChild(le,(s,i)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(i)||r.trackChildChange(di(s,i,o))}else r.trackChildChange(Gr(s,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?D.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this.indexedFilter_=new md(e.getIndex()),this.index_=e.getIndex(),this.startPost_=hi.getStartPost_(e),this.endPost_=hi.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,s,i,o){return this.matches(new z(n,r))||(r=D.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,s,i,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=D.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(D.EMPTY_NODE);const i=this;return n.forEachChild(le,(o,l)=>{i.matches(new z(o,l))||(s=s.updateImmediateChild(o,D.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new hi(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,s,i,o){return this.rangedFilter_.matches(new z(n,r))||(r=D.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,s,i,o):this.fullLimitUpdateChild_(e,n,r,i,o)}updateFullNode(e,n,r){let s;if(n.isLeafNode()||n.isEmpty())s=D.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=D.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const l=i.getNext();if(this.withinDirectionalStart(l))if(this.withinDirectionalEnd(l))s=s.updateImmediateChild(l.name,l.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(D.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let o=0;for(;i.hasNext();){const l=i.getNext();o<this.limit_&&this.withinDirectionalStart(l)&&this.withinDirectionalEnd(l)?o++:s=s.updateImmediateChild(l.name,D.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,s,i){let o;if(this.reverse_){const d=this.index_.getCompare();o=(f,v)=>d(v,f)}else o=this.index_.getCompare();const l=e;k(l.numChildren()===this.limit_,"");const a=new z(n,r),u=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),h=this.rangedFilter_.matches(a);if(l.hasChild(n)){const d=l.getImmediateChild(n);let f=s.getChildAfterChild(this.index_,u,this.reverse_);for(;f!=null&&(f.name===n||l.hasChild(f.name));)f=s.getChildAfterChild(this.index_,f,this.reverse_);const v=f==null?1:o(f,a);if(h&&!r.isEmpty()&&v>=0)return i!=null&&i.trackChildChange(di(n,r,d)),l.updateImmediateChild(n,r);{i!=null&&i.trackChildChange(ui(n,d));const _=l.updateImmediateChild(n,D.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(i!=null&&i.trackChildChange(Gr(f.name,f.node)),_.updateImmediateChild(f.name,f.node)):_}}else return r.isEmpty()?e:h&&o(u,a)>=0?(i!=null&&(i.trackChildChange(ui(u.name,u.node)),i.trackChildChange(Gr(n,r))),l.updateImmediateChild(n,r).updateImmediateChild(u.name,D.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=le}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return k(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return k(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:qr}hasEnd(){return this.endSet_}getIndexEndValue(){return k(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return k(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:tr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return k(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===le}copy(){const e=new gd;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function VE(t){return t.loadsAllData()?new md(t.getIndex()):t.hasLimit()?new HE(t):new hi(t)}function Vf(t){const e={};if(t.isDefault())return e;let n;if(t.index_===le?n="$priority":t.index_===WE?n="$value":t.index_===jr?n="$key":(k(t.index_ instanceof zE,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=pe(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=pe(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+pe(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=pe(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+pe(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function qf(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==le&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el extends zy{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(k(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=ki("p:rest:"),this.listens_={}}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=el.getListenId_(e,r),l={};this.listens_[o]=l;const a=Vf(e._queryParams);this.restRequest_(i+".json",a,(u,h)=>{let d=h;if(u===404&&(d=null,u=null),u===null&&this.onDataUpdate_(i,d,!1,r),Hr(this.listens_,o)===l){let f;u?u===401?f="permission_denied":f="rest_error:"+u:f="ok",s(f,null)}})}unlisten(e,n){const r=el.getListenId_(e,n);delete this.listens_[r]}get(e){const n=Vf(e._queryParams),r=e._path.toString(),s=new jl;return this.restRequest_(r+".json",n,(i,o)=>{let l=o;i===404&&(l=null,i=null),i===null?(this.onDataUpdate_(r,l,!1,null),s.resolve(l)):s.reject(new Error(l))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+rs(n);this.log_("Sending REST request for "+o);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(r&&l.readyState===4){this.log_("REST Response for "+o+" received. status:",l.status,"response:",l.responseText);let a=null;if(l.status>=200&&l.status<300){try{a=li(l.responseText)}catch{Ve("Failed to parse JSON response for "+o+": "+l.responseText)}r(null,a)}else l.status!==401&&l.status!==404&&Ve("Got unsuccessful REST response for "+o+" Status: "+l.status),r(l.status);r=null}},l.open("GET",o,!0),l.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(){this.rootNode_=D.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tl(){return{value:null,children:new Map}}function Zy(t,e,n){if(B(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=$(e);t.children.has(r)||t.children.set(r,tl());const s=t.children.get(r);e=X(e),Zy(s,e,n)}}function Bc(t,e,n){t.value!==null?n(e,t.value):GE(t,(r,s)=>{const i=new Y(e.toString()+"/"+r);Bc(s,i,n)})}function GE(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&qe(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gf=10*1e3,QE=30*1e3,YE=5*60*1e3;class XE{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new KE(e);const r=Gf+(QE-Gf)*Math.random();Ls(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;qe(e,(s,i)=>{i>0&&Gt(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),Ls(this.reportStats_.bind(this),Math.floor(Math.random()*2*YE))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ht;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(ht||(ht={}));function ev(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function yd(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function vd(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=ht.ACK_USER_WRITE,this.source=ev()}operationForChild(e){if(B(this.path)){if(this.affectedTree.value!=null)return k(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Y(e));return new nl(V(),n,this.revert)}}else return k($(this.path)===e,"operationForChild called for unrelated child."),new nl(X(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e,n){this.source=e,this.path=n,this.type=ht.LISTEN_COMPLETE}operationForChild(e){return B(this.path)?new fi(this.source,V()):new fi(this.source,X(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=ht.OVERWRITE}operationForChild(e){return B(this.path)?new nr(this.source,V(),this.snap.getImmediateChild(e)):new nr(this.source,X(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=ht.MERGE}operationForChild(e){if(B(this.path)){const n=this.children.subtree(new Y(e));return n.isEmpty()?null:n.value?new nr(this.source,V(),n.value):new pi(this.source,V(),n)}else return k($(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new pi(this.source,X(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(B(e))return this.isFullyInitialized()&&!this.filtered_;const n=$(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function ZE(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push($E(o.childName,o.snapshotNode))}),xs(t,s,"child_removed",e,r,n),xs(t,s,"child_added",e,r,n),xs(t,s,"child_moved",i,r,n),xs(t,s,"child_changed",e,r,n),xs(t,s,"value",e,r,n),s}function xs(t,e,n,r,s,i){const o=r.filter(l=>l.type===n);o.sort((l,a)=>tC(t,l,a)),o.forEach(l=>{const a=eC(t,l,i);s.forEach(u=>{u.respondsTo(l.type)&&e.push(u.createEvent(a,t.query_))})})}function eC(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function tC(t,e,n){if(e.childName==null||n.childName==null)throw ts("Should only compare child_ events.");const r=new z(e.childName,e.snapshotNode),s=new z(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ll(t,e){return{eventCache:t,serverCache:e}}function Ms(t,e,n,r){return Ll(new kn(e,n,r),t.serverCache)}function tv(t,e,n,r){return Ll(t.eventCache,new kn(e,n,r))}function rl(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function rr(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pa;const nC=()=>(Pa||(Pa=new Be(Bb)),Pa);class ee{static fromObject(e){let n=new ee(null);return qe(e,(r,s)=>{n=n.set(new Y(r),s)}),n}constructor(e,n=nC()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:V(),value:this.value};if(B(e))return null;{const r=$(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(X(e),n);return i!=null?{path:me(new Y(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(B(e))return this;{const n=$(e),r=this.children.get(n);return r!==null?r.subtree(X(e)):new ee(null)}}set(e,n){if(B(e))return new ee(n,this.children);{const r=$(e),i=(this.children.get(r)||new ee(null)).set(X(e),n),o=this.children.insert(r,i);return new ee(this.value,o)}}remove(e){if(B(e))return this.children.isEmpty()?new ee(null):new ee(null,this.children);{const n=$(e),r=this.children.get(n);if(r){const s=r.remove(X(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new ee(null):new ee(this.value,i)}else return this}}get(e){if(B(e))return this.value;{const n=$(e),r=this.children.get(n);return r?r.get(X(e)):null}}setTree(e,n){if(B(e))return n;{const r=$(e),i=(this.children.get(r)||new ee(null)).setTree(X(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new ee(this.value,o)}}fold(e){return this.fold_(V(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(me(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,V(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(B(e))return null;{const i=$(e),o=this.children.get(i);return o?o.findOnPath_(X(e),me(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,V(),n)}foreachOnPath_(e,n,r){if(B(e))return this;{this.value&&r(n,this.value);const s=$(e),i=this.children.get(s);return i?i.foreachOnPath_(X(e),me(n,s),r):new ee(null)}}foreach(e){this.foreach_(V(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(me(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.writeTree_=e}static empty(){return new gt(new ee(null))}}function Fs(t,e,n){if(B(e))return new gt(new ee(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=De(s,e);return i=i.updateChild(o,n),new gt(t.writeTree_.set(s,i))}else{const s=new ee(n),i=t.writeTree_.setTree(e,s);return new gt(i)}}}function Kf(t,e,n){let r=t;return qe(n,(s,i)=>{r=Fs(r,me(e,s),i)}),r}function Qf(t,e){if(B(e))return gt.empty();{const n=t.writeTree_.setTree(e,new ee(null));return new gt(n)}}function Wc(t,e){return cr(t,e)!=null}function cr(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(De(n.path,e)):null}function Yf(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(le,(r,s)=>{e.push(new z(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new z(r,s.value))}),e}function wn(t,e){if(B(e))return t;{const n=cr(t,e);return n!=null?new gt(new ee(n)):new gt(t.writeTree_.subtree(e))}}function $c(t){return t.writeTree_.isEmpty()}function Kr(t,e){return nv(V(),t.writeTree_,e)}function nv(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(k(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=nv(me(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(me(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ml(t,e){return ov(e,t)}function rC(t,e,n,r,s){k(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=Fs(t.visibleWrites,e,n)),t.lastWriteId=r}function sC(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function iC(t,e){const n=t.allWrites.findIndex(l=>l.writeId===e);k(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const l=t.allWrites[o];l.visible&&(o>=n&&oC(l,r.path)?s=!1:dt(r.path,l.path)&&(i=!0)),o--}if(s){if(i)return lC(t),!0;if(r.snap)t.visibleWrites=Qf(t.visibleWrites,r.path);else{const l=r.children;qe(l,a=>{t.visibleWrites=Qf(t.visibleWrites,me(r.path,a))})}return!0}else return!1}function oC(t,e){if(t.snap)return dt(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&dt(me(t.path,n),e))return!0;return!1}function lC(t){t.visibleWrites=rv(t.allWrites,aC,V()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function aC(t){return t.visible}function rv(t,e,n){let r=gt.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let l;if(i.snap)dt(n,o)?(l=De(n,o),r=Fs(r,l,i.snap)):dt(o,n)&&(l=De(o,n),r=Fs(r,V(),i.snap.getChild(l)));else if(i.children){if(dt(n,o))l=De(n,o),r=Kf(r,l,i.children);else if(dt(o,n))if(l=De(o,n),B(l))r=Kf(r,V(),i.children);else{const a=Hr(i.children,$(l));if(a){const u=a.getChild(X(l));r=Fs(r,V(),u)}}}else throw ts("WriteRecord should have .snap or .children")}}return r}function sv(t,e,n,r,s){if(!r&&!s){const i=cr(t.visibleWrites,e);if(i!=null)return i;{const o=wn(t.visibleWrites,e);if($c(o))return n;if(n==null&&!Wc(o,V()))return null;{const l=n||D.EMPTY_NODE;return Kr(o,l)}}}else{const i=wn(t.visibleWrites,e);if(!s&&$c(i))return n;if(!s&&n==null&&!Wc(i,V()))return null;{const o=function(u){return(u.visible||s)&&(!r||!~r.indexOf(u.writeId))&&(dt(u.path,e)||dt(e,u.path))},l=rv(t.allWrites,o,e),a=n||D.EMPTY_NODE;return Kr(l,a)}}}function cC(t,e,n){let r=D.EMPTY_NODE;const s=cr(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(le,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=wn(t.visibleWrites,e);return n.forEachChild(le,(o,l)=>{const a=Kr(wn(i,new Y(o)),l);r=r.updateImmediateChild(o,a)}),Yf(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=wn(t.visibleWrites,e);return Yf(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function uC(t,e,n,r,s){k(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=me(e,n);if(Wc(t.visibleWrites,i))return null;{const o=wn(t.visibleWrites,i);return $c(o)?s.getChild(n):Kr(o,s.getChild(n))}}function dC(t,e,n,r){const s=me(e,n),i=cr(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=wn(t.visibleWrites,s);return Kr(o,r.getNode().getImmediateChild(n))}else return null}function hC(t,e){return cr(t.visibleWrites,e)}function fC(t,e,n,r,s,i,o){let l;const a=wn(t.visibleWrites,e),u=cr(a,V());if(u!=null)l=u;else if(n!=null)l=Kr(a,n);else return[];if(l=l.withIndex(o),!l.isEmpty()&&!l.isLeafNode()){const h=[],d=o.getCompare(),f=i?l.getReverseIteratorFrom(r,o):l.getIteratorFrom(r,o);let v=f.getNext();for(;v&&h.length<s;)d(v,r)!==0&&h.push(v),v=f.getNext();return h}else return[]}function pC(){return{visibleWrites:gt.empty(),allWrites:[],lastWriteId:-1}}function sl(t,e,n,r){return sv(t.writeTree,t.treePath,e,n,r)}function _d(t,e){return cC(t.writeTree,t.treePath,e)}function Xf(t,e,n,r){return uC(t.writeTree,t.treePath,e,n,r)}function il(t,e){return hC(t.writeTree,me(t.treePath,e))}function mC(t,e,n,r,s,i){return fC(t.writeTree,t.treePath,e,n,r,s,i)}function xd(t,e,n){return dC(t.writeTree,t.treePath,e,n)}function iv(t,e){return ov(me(t.treePath,e),t.writeTree)}function ov(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;k(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),k(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,di(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,ui(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,Gr(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,di(r,e.snapshotNode,s.oldSnap));else throw ts("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const lv=new yC;class wd{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new kn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return xd(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:rr(this.viewCache_),i=mC(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vC(t){return{filter:t}}function _C(t,e){k(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),k(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function xC(t,e,n,r,s){const i=new gC;let o,l;if(n.type===ht.OVERWRITE){const u=n;u.source.fromUser?o=Hc(t,e,u.path,u.snap,r,s,i):(k(u.source.fromServer,"Unknown source."),l=u.source.tagged||e.serverCache.isFiltered()&&!B(u.path),o=ol(t,e,u.path,u.snap,r,s,l,i))}else if(n.type===ht.MERGE){const u=n;u.source.fromUser?o=SC(t,e,u.path,u.children,r,s,i):(k(u.source.fromServer,"Unknown source."),l=u.source.tagged||e.serverCache.isFiltered(),o=Vc(t,e,u.path,u.children,r,s,l,i))}else if(n.type===ht.ACK_USER_WRITE){const u=n;u.revert?o=CC(t,e,u.path,r,s,i):o=bC(t,e,u.path,u.affectedTree,r,s,i)}else if(n.type===ht.LISTEN_COMPLETE)o=EC(t,e,n.path,r,i);else throw ts("Unknown operation type: "+n.type);const a=i.getChanges();return wC(e,o,a),{viewCache:o,changes:a}}function wC(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=rl(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(Jy(rl(e)))}}function av(t,e,n,r,s,i){const o=e.eventCache;if(il(r,n)!=null)return e;{let l,a;if(B(n))if(k(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=rr(e),h=u instanceof D?u:D.EMPTY_NODE,d=_d(r,h);l=t.filter.updateFullNode(e.eventCache.getNode(),d,i)}else{const u=sl(r,rr(e));l=t.filter.updateFullNode(e.eventCache.getNode(),u,i)}else{const u=$(n);if(u===".priority"){k(Cn(n)===1,"Can't have a priority with additional path components");const h=o.getNode();a=e.serverCache.getNode();const d=Xf(r,n,h,a);d!=null?l=t.filter.updatePriority(h,d):l=o.getNode()}else{const h=X(n);let d;if(o.isCompleteForChild(u)){a=e.serverCache.getNode();const f=Xf(r,n,o.getNode(),a);f!=null?d=o.getNode().getImmediateChild(u).updateChild(h,f):d=o.getNode().getImmediateChild(u)}else d=xd(r,u,e.serverCache);d!=null?l=t.filter.updateChild(o.getNode(),u,d,h,s,i):l=o.getNode()}}return Ms(e,l,o.isFullyInitialized()||B(n),t.filter.filtersNodes())}}function ol(t,e,n,r,s,i,o,l){const a=e.serverCache;let u;const h=o?t.filter:t.filter.getIndexedFilter();if(B(n))u=h.updateFullNode(a.getNode(),r,null);else if(h.filtersNodes()&&!a.isFiltered()){const v=a.getNode().updateChild(n,r);u=h.updateFullNode(a.getNode(),v,null)}else{const v=$(n);if(!a.isCompleteForPath(n)&&Cn(n)>1)return e;const y=X(n),S=a.getNode().getImmediateChild(v).updateChild(y,r);v===".priority"?u=h.updatePriority(a.getNode(),S):u=h.updateChild(a.getNode(),v,S,y,lv,null)}const d=tv(e,u,a.isFullyInitialized()||B(n),h.filtersNodes()),f=new wd(s,d,i);return av(t,d,n,s,f,l)}function Hc(t,e,n,r,s,i,o){const l=e.eventCache;let a,u;const h=new wd(s,e,i);if(B(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),a=Ms(e,u,!0,t.filter.filtersNodes());else{const d=$(n);if(d===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),a=Ms(e,u,l.isFullyInitialized(),l.isFiltered());else{const f=X(n),v=l.getNode().getImmediateChild(d);let y;if(B(f))y=r;else{const _=h.getCompleteChild(d);_!=null?Wy(f)===".priority"&&_.getChild(Hy(f)).isEmpty()?y=_:y=_.updateChild(f,r):y=D.EMPTY_NODE}if(v.equals(y))a=e;else{const _=t.filter.updateChild(l.getNode(),d,y,f,h,o);a=Ms(e,_,l.isFullyInitialized(),t.filter.filtersNodes())}}}return a}function Jf(t,e){return t.eventCache.isCompleteForChild(e)}function SC(t,e,n,r,s,i,o){let l=e;return r.foreach((a,u)=>{const h=me(n,a);Jf(e,$(h))&&(l=Hc(t,l,h,u,s,i,o))}),r.foreach((a,u)=>{const h=me(n,a);Jf(e,$(h))||(l=Hc(t,l,h,u,s,i,o))}),l}function Zf(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function Vc(t,e,n,r,s,i,o,l){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let a=e,u;B(n)?u=r:u=new ee(null).setTree(n,r);const h=e.serverCache.getNode();return u.children.inorderTraversal((d,f)=>{if(h.hasChild(d)){const v=e.serverCache.getNode().getImmediateChild(d),y=Zf(t,v,f);a=ol(t,a,new Y(d),y,s,i,o,l)}}),u.children.inorderTraversal((d,f)=>{const v=!e.serverCache.isCompleteForChild(d)&&f.value===null;if(!h.hasChild(d)&&!v){const y=e.serverCache.getNode().getImmediateChild(d),_=Zf(t,y,f);a=ol(t,a,new Y(d),_,s,i,o,l)}}),a}function bC(t,e,n,r,s,i,o){if(il(s,n)!=null)return e;const l=e.serverCache.isFiltered(),a=e.serverCache;if(r.value!=null){if(B(n)&&a.isFullyInitialized()||a.isCompleteForPath(n))return ol(t,e,n,a.getNode().getChild(n),s,i,l,o);if(B(n)){let u=new ee(null);return a.getNode().forEachChild(jr,(h,d)=>{u=u.set(new Y(h),d)}),Vc(t,e,n,u,s,i,l,o)}else return e}else{let u=new ee(null);return r.foreach((h,d)=>{const f=me(n,h);a.isCompleteForPath(f)&&(u=u.set(h,a.getNode().getChild(f)))}),Vc(t,e,n,u,s,i,l,o)}}function EC(t,e,n,r,s){const i=e.serverCache,o=tv(e,i.getNode(),i.isFullyInitialized()||B(n),i.isFiltered());return av(t,o,n,r,lv,s)}function CC(t,e,n,r,s,i){let o;if(il(r,n)!=null)return e;{const l=new wd(r,e,s),a=e.eventCache.getNode();let u;if(B(n)||$(n)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=sl(r,rr(e));else{const d=e.serverCache.getNode();k(d instanceof D,"serverChildren would be complete if leaf node"),h=_d(r,d)}h=h,u=t.filter.updateFullNode(a,h,i)}else{const h=$(n);let d=xd(r,h,e.serverCache);d==null&&e.serverCache.isCompleteForChild(h)&&(d=a.getImmediateChild(h)),d!=null?u=t.filter.updateChild(a,h,d,X(n),l,i):e.eventCache.getNode().hasChild(h)?u=t.filter.updateChild(a,h,D.EMPTY_NODE,X(n),l,i):u=a,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=sl(r,rr(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,i)))}return o=e.serverCache.isFullyInitialized()||il(r,V())!=null,Ms(e,u,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new md(r.getIndex()),i=VE(r);this.processor_=vC(i);const o=n.serverCache,l=n.eventCache,a=s.updateFullNode(D.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(D.EMPTY_NODE,l.getNode(),null),h=new kn(a,o.isFullyInitialized(),s.filtersNodes()),d=new kn(u,l.isFullyInitialized(),i.filtersNodes());this.viewCache_=Ll(d,h),this.eventGenerator_=new JE(this.query_)}get query(){return this.query_}}function NC(t){return t.viewCache_.serverCache.getNode()}function IC(t){return rl(t.viewCache_)}function TC(t,e){const n=rr(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!B(e)&&!n.getImmediateChild($(e)).isEmpty())?n.getChild(e):null}function ep(t){return t.eventRegistrations_.length===0}function RC(t,e){t.eventRegistrations_.push(e)}function tp(t,e,n){const r=[];if(n){k(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,s);o&&r.push(o)})}if(e){let s=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function np(t,e,n,r){e.type===ht.MERGE&&e.source.queryId!==null&&(k(rr(t.viewCache_),"We should always have a full cache before handling merges"),k(rl(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=xC(t.processor_,s,e,n,r);return _C(t.processor_,i.viewCache),k(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,cv(t,i.changes,i.viewCache.eventCache.getNode(),null)}function PC(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(le,(i,o)=>{r.push(Gr(i,o))}),n.isFullyInitialized()&&r.push(Jy(n.getNode())),cv(t,r,n.getNode(),e)}function cv(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return ZE(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ll;class uv{constructor(){this.views=new Map}}function AC(t){k(!ll,"__referenceConstructor has already been defined"),ll=t}function jC(){return k(ll,"Reference.ts has not been loaded"),ll}function DC(t){return t.views.size===0}function Sd(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return k(i!=null,"SyncTree gave us an op for an invalid query."),np(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(np(o,e,n,r));return i}}function dv(t,e,n,r,s){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let l=sl(n,s?r:null),a=!1;l?a=!0:r instanceof D?(l=_d(n,r),a=!1):(l=D.EMPTY_NODE,a=!1);const u=Ll(new kn(l,a,!1),new kn(r,s,!1));return new kC(e,u)}return o}function OC(t,e,n,r,s,i){const o=dv(t,e,r,s,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),RC(o,n),PC(o,n)}function LC(t,e,n,r){const s=e._queryIdentifier,i=[];let o=[];const l=Nn(t);if(s==="default")for(const[a,u]of t.views.entries())o=o.concat(tp(u,n,r)),ep(u)&&(t.views.delete(a),u.query._queryParams.loadsAllData()||i.push(u.query));else{const a=t.views.get(s);a&&(o=o.concat(tp(a,n,r)),ep(a)&&(t.views.delete(s),a.query._queryParams.loadsAllData()||i.push(a.query)))}return l&&!Nn(t)&&i.push(new(jC())(e._repo,e._path)),{removed:i,events:o}}function hv(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Sn(t,e){let n=null;for(const r of t.views.values())n=n||TC(r,e);return n}function fv(t,e){if(e._queryParams.loadsAllData())return Fl(t);{const r=e._queryIdentifier;return t.views.get(r)}}function pv(t,e){return fv(t,e)!=null}function Nn(t){return Fl(t)!=null}function Fl(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let al;function MC(t){k(!al,"__referenceConstructor has already been defined"),al=t}function FC(){return k(al,"Reference.ts has not been loaded"),al}let UC=1;class rp{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ee(null),this.pendingWriteTree_=pC(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function mv(t,e,n,r,s){return rC(t.pendingWriteTree_,e,n,r,s),s?Ti(t,new nr(ev(),e,n)):[]}function $n(t,e,n=!1){const r=sC(t.pendingWriteTree_,e);if(iC(t.pendingWriteTree_,e)){let i=new ee(null);return r.snap!=null?i=i.set(V(),!0):qe(r.children,o=>{i=i.set(new Y(o),!0)}),Ti(t,new nl(r.path,i,n))}else return[]}function Ii(t,e,n){return Ti(t,new nr(yd(),e,n))}function zC(t,e,n){const r=ee.fromObject(n);return Ti(t,new pi(yd(),e,r))}function BC(t,e){return Ti(t,new fi(yd(),e))}function WC(t,e,n){const r=Ed(t,n);if(r){const s=Cd(r),i=s.path,o=s.queryId,l=De(i,e),a=new fi(vd(o),l);return kd(t,i,a)}else return[]}function gv(t,e,n,r,s=!1){const i=e._path,o=t.syncPointTree_.get(i);let l=[];if(o&&(e._queryIdentifier==="default"||pv(o,e))){const a=LC(o,e,n,r);DC(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const u=a.removed;if(l=a.events,!s){const h=u.findIndex(f=>f._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(i,(f,v)=>Nn(v));if(h&&!d){const f=t.syncPointTree_.subtree(i);if(!f.isEmpty()){const v=qC(f);for(let y=0;y<v.length;++y){const _=v[y],S=_.query,m=xv(t,_);t.listenProvider_.startListening(Us(S),mi(t,S),m.hashFn,m.onComplete)}}}!d&&u.length>0&&!r&&(h?t.listenProvider_.stopListening(Us(e),null):u.forEach(f=>{const v=t.queryToTagMap.get(Ul(f));t.listenProvider_.stopListening(Us(f),v)}))}GC(t,u)}return l}function yv(t,e,n,r){const s=Ed(t,r);if(s!=null){const i=Cd(s),o=i.path,l=i.queryId,a=De(o,e),u=new nr(vd(l),a,n);return kd(t,o,u)}else return[]}function $C(t,e,n,r){const s=Ed(t,r);if(s){const i=Cd(s),o=i.path,l=i.queryId,a=De(o,e),u=ee.fromObject(n),h=new pi(vd(l),a,u);return kd(t,o,h)}else return[]}function HC(t,e,n,r=!1){const s=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(s,(f,v)=>{const y=De(f,s);i=i||Sn(v,y),o=o||Nn(v)});let l=t.syncPointTree_.get(s);l?(o=o||Nn(l),i=i||Sn(l,V())):(l=new uv,t.syncPointTree_=t.syncPointTree_.set(s,l));let a;i!=null?a=!0:(a=!1,i=D.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((v,y)=>{const _=Sn(y,V());_&&(i=i.updateImmediateChild(v,_))}));const u=pv(l,e);if(!u&&!e._queryParams.loadsAllData()){const f=Ul(e);k(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");const v=KC();t.queryToTagMap.set(f,v),t.tagToQueryMap.set(v,f)}const h=Ml(t.pendingWriteTree_,s);let d=OC(l,e,n,h,i,a);if(!u&&!o&&!r){const f=fv(l,e);d=d.concat(QC(t,e,f))}return d}function bd(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,l)=>{const a=De(o,e),u=Sn(l,a);if(u)return u});return sv(s,e,i,n,!0)}function VC(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(u,h)=>{const d=De(u,n);r=r||Sn(h,d)});let s=t.syncPointTree_.get(n);s?r=r||Sn(s,V()):(s=new uv,t.syncPointTree_=t.syncPointTree_.set(n,s));const i=r!=null,o=i?new kn(r,!0,!1):null,l=Ml(t.pendingWriteTree_,e._path),a=dv(s,e,l,i?o.getNode():D.EMPTY_NODE,i);return IC(a)}function Ti(t,e){return vv(e,t.syncPointTree_,null,Ml(t.pendingWriteTree_,V()))}function vv(t,e,n,r){if(B(t.path))return _v(t,e,n,r);{const s=e.get(V());n==null&&s!=null&&(n=Sn(s,V()));let i=[];const o=$(t.path),l=t.operationForChild(o),a=e.children.get(o);if(a&&l){const u=n?n.getImmediateChild(o):null,h=iv(r,o);i=i.concat(vv(l,a,u,h))}return s&&(i=i.concat(Sd(s,t,r,n))),i}}function _v(t,e,n,r){const s=e.get(V());n==null&&s!=null&&(n=Sn(s,V()));let i=[];return e.children.inorderTraversal((o,l)=>{const a=n?n.getImmediateChild(o):null,u=iv(r,o),h=t.operationForChild(o);h&&(i=i.concat(_v(h,l,a,u)))}),s&&(i=i.concat(Sd(s,t,r,n))),i}function xv(t,e){const n=e.query,r=mi(t,n);return{hashFn:()=>(NC(e)||D.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?WC(t,n._path,r):BC(t,n._path);{const i=Hb(s,n);return gv(t,n,null,i)}}}}function mi(t,e){const n=Ul(e);return t.queryToTagMap.get(n)}function Ul(t){return t._path.toString()+"$"+t._queryIdentifier}function Ed(t,e){return t.tagToQueryMap.get(e)}function Cd(t){const e=t.indexOf("$");return k(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Y(t.substr(0,e))}}function kd(t,e,n){const r=t.syncPointTree_.get(e);k(r,"Missing sync point for query tag that we're tracking");const s=Ml(t.pendingWriteTree_,e);return Sd(r,n,s,null)}function qC(t){return t.fold((e,n,r)=>{if(n&&Nn(n))return[Fl(n)];{let s=[];return n&&(s=hv(n)),qe(r,(i,o)=>{s=s.concat(o)}),s}})}function Us(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(FC())(t._repo,t._path):t}function GC(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const s=Ul(r),i=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(i)}}}function KC(){return UC++}function QC(t,e,n){const r=e._path,s=mi(t,e),i=xv(t,n),o=t.listenProvider_.startListening(Us(e),s,i.hashFn,i.onComplete),l=t.syncPointTree_.subtree(r);if(s)k(!Nn(l.value),"If we're adding a query, it shouldn't be shadowed");else{const a=l.fold((u,h,d)=>{if(!B(u)&&h&&Nn(h))return[Fl(h).query];{let f=[];return h&&(f=f.concat(hv(h).map(v=>v.query))),qe(d,(v,y)=>{f=f.concat(y)}),f}});for(let u=0;u<a.length;++u){const h=a[u];t.listenProvider_.stopListening(Us(h),mi(t,h))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Nd(n)}node(){return this.node_}}class Id{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=me(this.path_,e);return new Id(this.syncTree_,n)}node(){return bd(this.syncTree_,this.path_)}}const YC=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},sp=function(t,e,n){if(!t||typeof t!="object")return t;if(k(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return XC(t[".sv"],e,n);if(typeof t[".sv"]=="object")return JC(t[".sv"],e);k(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},XC=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:k(!1,"Unexpected server value: "+t)}},JC=function(t,e,n){t.hasOwnProperty("increment")||k(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&k(!1,"Unexpected increment value: "+r);const s=e.node();if(k(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},ZC=function(t,e,n,r){return Td(e,new Id(n,t),r)},wv=function(t,e,n){return Td(t,new Nd(e),n)};function Td(t,e,n){const r=t.getPriority().val(),s=sp(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,l=sp(o.getValue(),e,n);return l!==o.getValue()||s!==o.getPriority().val()?new ve(l,we(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new ve(s))),o.forEachChild(le,(l,a)=>{const u=Td(a,e.getImmediateChild(l),n);u!==a&&(i=i.updateImmediateChild(l,u))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function Pd(t,e){let n=e instanceof Y?e:new Y(e),r=t,s=$(n);for(;s!==null;){const i=Hr(r.node.children,s)||{children:{},childCount:0};r=new Rd(s,r,i),n=X(n),s=$(n)}return r}function ls(t){return t.node.value}function Sv(t,e){t.node.value=e,qc(t)}function bv(t){return t.node.childCount>0}function ek(t){return ls(t)===void 0&&!bv(t)}function zl(t,e){qe(t.node.children,(n,r)=>{e(new Rd(n,t,r))})}function Ev(t,e,n,r){n&&e(t),zl(t,s=>{Ev(s,e,!0)})}function tk(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Ri(t){return new Y(t.parent===null?t.name:Ri(t.parent)+"/"+t.name)}function qc(t){t.parent!==null&&nk(t.parent,t.name,t)}function nk(t,e,n){const r=ek(n),s=Gt(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,qc(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,qc(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rk=/[\[\].#$\/\u0000-\u001F\u007F]/,sk=/[\[\].#$\u0000-\u001F\u007F]/,Aa=10*1024*1024,Cv=function(t){return typeof t=="string"&&t.length!==0&&!rk.test(t)},kv=function(t){return typeof t=="string"&&t.length!==0&&!sk.test(t)},ik=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),kv(t)},ok=function(t,e,n,r){Ad(id(t,"value"),e,n)},Ad=function(t,e,n){const r=n instanceof Y?new bE(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Fn(r));if(typeof e=="function")throw new Error(t+"contains a function "+Fn(r)+" with contents = "+e.toString());if(wy(e))throw new Error(t+"contains "+e.toString()+" "+Fn(r));if(typeof e=="string"&&e.length>Aa/3&&Dl(e)>Aa)throw new Error(t+"contains a string greater than "+Aa+" utf8 bytes "+Fn(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(qe(e,(o,l)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!Cv(o)))throw new Error(t+" contains an invalid key ("+o+") "+Fn(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);EE(r,o),Ad(t,l,r),CE(r)}),s&&i)throw new Error(t+' contains ".value" child '+Fn(r)+" in addition to actual children.")}},Nv=function(t,e,n,r){if(!kv(n))throw new Error(id(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},lk=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Nv(t,e,n)},ak=function(t,e){if($(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},ck=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Cv(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!ik(n))throw new Error(id(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Iv(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!Vy(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function Nt(t,e,n){Iv(t,n),dk(t,r=>dt(r,e)||dt(e,r))}function dk(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(hk(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function hk(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Os&&Pe("event: "+n.toString()),os(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk="repo_interrupt",pk=25;class mk{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new uk,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=tl(),this.transactionQueueTree_=new Rd,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function gk(t,e,n){if(t.stats_=dd(t.repoInfo_),t.forceRestClient_||Kb())t.server_=new el(t.repoInfo_,(r,s,i,o)=>{ip(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>op(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{pe(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Mt(t.repoInfo_,e,(r,s,i,o)=>{ip(t,r,s,i,o)},r=>{op(t,r)},r=>{vk(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=Zb(t.repoInfo_,()=>new XE(t.stats_,t.server_)),t.infoData_=new qE,t.infoSyncTree_=new rp({startListening:(r,s,i,o)=>{let l=[];const a=t.infoData_.getNode(r._path);return a.isEmpty()||(l=Ii(t.infoSyncTree_,r._path,a),setTimeout(()=>{o("ok")},0)),l},stopListening:()=>{}}),Dd(t,"connected",!1),t.serverSyncTree_=new rp({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(l,a)=>{const u=o(l,a);Nt(t.eventQueue_,r._path,u)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function yk(t){const n=t.infoData_.getNode(new Y(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function jd(t){return YC({timestamp:yk(t)})}function ip(t,e,n,r,s){t.dataUpdateCount++;const i=new Y(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const a=Qo(n,u=>we(u));o=$C(t.serverSyncTree_,i,a,s)}else{const a=we(n);o=yv(t.serverSyncTree_,i,a,s)}else if(r){const a=Qo(n,u=>we(u));o=zC(t.serverSyncTree_,i,a)}else{const a=we(n);o=Ii(t.serverSyncTree_,i,a)}let l=i;o.length>0&&(l=Wl(t,i)),Nt(t.eventQueue_,l,o)}function op(t,e){Dd(t,"connected",e),e===!1&&wk(t)}function vk(t,e){qe(e,(n,r)=>{Dd(t,n,r)})}function Dd(t,e,n){const r=new Y("/.info/"+e),s=we(n);t.infoData_.updateSnapshot(r,s);const i=Ii(t.infoSyncTree_,r,s);Nt(t.eventQueue_,r,i)}function Tv(t){return t.nextWriteId_++}function _k(t,e,n){const r=VC(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(s=>{const i=we(s).withIndex(e._queryParams.getIndex());HC(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=Ii(t.serverSyncTree_,e._path,i);else{const l=mi(t.serverSyncTree_,e);o=yv(t.serverSyncTree_,e._path,i,l)}return Nt(t.eventQueue_,e._path,o),gv(t.serverSyncTree_,e,n,null,!0),i},s=>(Bl(t,"get for query "+pe(e)+" failed: "+s),Promise.reject(new Error(s))))}function xk(t,e,n,r,s){Bl(t,"set",{path:e.toString(),value:n,priority:r});const i=jd(t),o=we(n,r),l=bd(t.serverSyncTree_,e),a=wv(o,l,i),u=Tv(t),h=mv(t.serverSyncTree_,e,a,u,!0);Iv(t.eventQueue_,h),t.server_.put(e.toString(),o.val(!0),(f,v)=>{const y=f==="ok";y||Ve("set at "+e+" failed: "+f);const _=$n(t.serverSyncTree_,u,!y);Nt(t.eventQueue_,e,_),bk(t,s,f,v)});const d=Dv(t,e);Wl(t,d),Nt(t.eventQueue_,d,[])}function wk(t){Bl(t,"onDisconnectEvents");const e=jd(t),n=tl();Bc(t.onDisconnect_,V(),(s,i)=>{const o=ZC(s,i,t.serverSyncTree_,e);Zy(n,s,o)});let r=[];Bc(n,V(),(s,i)=>{r=r.concat(Ii(t.serverSyncTree_,s,i));const o=Dv(t,s);Wl(t,o)}),t.onDisconnect_=tl(),Nt(t.eventQueue_,V(),r)}function Sk(t){t.persistentConnection_&&t.persistentConnection_.interrupt(fk)}function Bl(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Pe(n,...e)}function bk(t,e,n,r){e&&os(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let i=s;r&&(i+=": "+r);const o=new Error(i);o.code=s,e(o)}})}function Rv(t,e,n){return bd(t.serverSyncTree_,e,n)||D.EMPTY_NODE}function Od(t,e=t.transactionQueueTree_){if(e||$l(t,e),ls(e)){const n=Av(t,e);k(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&Ek(t,Ri(e),n)}else bv(e)&&zl(e,n=>{Od(t,n)})}function Ek(t,e,n){const r=n.map(u=>u.currentWriteId),s=Rv(t,e,r);let i=s;const o=s.hash();for(let u=0;u<n.length;u++){const h=n[u];k(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const d=De(e,h.path);i=i.updateChild(d,h.currentOutputSnapshotRaw)}const l=i.val(!0),a=e;t.server_.put(a.toString(),l,u=>{Bl(t,"transaction put response",{path:a.toString(),status:u});let h=[];if(u==="ok"){const d=[];for(let f=0;f<n.length;f++)n[f].status=2,h=h.concat($n(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&d.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();$l(t,Pd(t.transactionQueueTree_,e)),Od(t,t.transactionQueueTree_),Nt(t.eventQueue_,e,h);for(let f=0;f<d.length;f++)os(d[f])}else{if(u==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{Ve("transaction at "+a.toString()+" failed: "+u);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=u}Wl(t,e)}},o)}function Wl(t,e){const n=Pv(t,e),r=Ri(n),s=Av(t,n);return Ck(t,s,r),r}function Ck(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(l=>l.status===0).map(l=>l.currentWriteId);for(let l=0;l<e.length;l++){const a=e[l],u=De(n,a.path);let h=!1,d;if(k(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===4)h=!0,d=a.abortReason,s=s.concat($n(t.serverSyncTree_,a.currentWriteId,!0));else if(a.status===0)if(a.retryCount>=pk)h=!0,d="maxretry",s=s.concat($n(t.serverSyncTree_,a.currentWriteId,!0));else{const f=Rv(t,a.path,o);a.currentInputSnapshot=f;const v=e[l].update(f.val());if(v!==void 0){Ad("transaction failed: Data returned ",v,a.path);let y=we(v);typeof v=="object"&&v!=null&&Gt(v,".priority")||(y=y.updatePriority(f.getPriority()));const S=a.currentWriteId,m=jd(t),p=wv(y,f,m);a.currentOutputSnapshotRaw=y,a.currentOutputSnapshotResolved=p,a.currentWriteId=Tv(t),o.splice(o.indexOf(S),1),s=s.concat(mv(t.serverSyncTree_,a.path,p,a.currentWriteId,a.applyLocally)),s=s.concat($n(t.serverSyncTree_,S,!0))}else h=!0,d="nodata",s=s.concat($n(t.serverSyncTree_,a.currentWriteId,!0))}Nt(t.eventQueue_,n,s),s=[],h&&(e[l].status=2,function(f){setTimeout(f,Math.floor(0))}(e[l].unwatcher),e[l].onComplete&&(d==="nodata"?r.push(()=>e[l].onComplete(null,!1,e[l].currentInputSnapshot)):r.push(()=>e[l].onComplete(new Error(d),!1,null))))}$l(t,t.transactionQueueTree_);for(let l=0;l<r.length;l++)os(r[l]);Od(t,t.transactionQueueTree_)}function Pv(t,e){let n,r=t.transactionQueueTree_;for(n=$(e);n!==null&&ls(r)===void 0;)r=Pd(r,n),e=X(e),n=$(e);return r}function Av(t,e){const n=[];return jv(t,e,n),n.sort((r,s)=>r.order-s.order),n}function jv(t,e,n){const r=ls(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);zl(e,s=>{jv(t,s,n)})}function $l(t,e){const n=ls(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,Sv(e,n.length>0?n:void 0)}zl(e,r=>{$l(t,r)})}function Dv(t,e){const n=Ri(Pv(t,e)),r=Pd(t.transactionQueueTree_,e);return tk(r,s=>{ja(t,s)}),ja(t,r),Ev(r,s=>{ja(t,s)}),n}function ja(t,e){const n=ls(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(k(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(k(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat($n(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?Sv(e,void 0):n.length=i+1,Nt(t.eventQueue_,Ri(e),s);for(let o=0;o<r.length;o++)os(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kk(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function Nk(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Ve(`Invalid query segment '${n}' in query '${t}'`)}return e}const lp=function(t,e){const n=Ik(t),r=n.namespace;n.domain==="firebase.com"&&$t(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&$t("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Ub();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new jy(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new Y(n.pathString)}},Ik=function(t){let e="",n="",r="",s="",i="",o=!0,l="https",a=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(l=t.substring(0,u-1),t=t.substring(u+2));let h=t.indexOf("/");h===-1&&(h=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(s=kk(t.substring(h,d)));const f=Nk(t.substring(Math.min(t.length,d)));u=e.indexOf(":"),u>=0?(o=l==="https"||l==="wss",a=parseInt(e.substring(u+1),10)):u=e.length;const v=e.slice(0,u);if(v.toLowerCase()==="localhost")n="localhost";else if(v.split(".").length<=2)n=v;else{const y=e.indexOf(".");r=e.substring(0,y).toLowerCase(),n=e.substring(y+1),i=r}"ns"in f&&(i=f.ns)}return{host:e,port:a,domain:n,subdomain:r,secure:o,scheme:l,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e,n,r,s){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+pe(this.snapshot.exportVal())}}class Rk{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return k(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return B(this._path)?null:Wy(this._path)}get ref(){return new Kt(this._repo,this._path)}get _queryIdentifier(){const e=qf(this._queryParams),n=cd(e);return n==="{}"?"default":n}get _queryObject(){return qf(this._queryParams)}isEqual(e){if(e=it(e),!(e instanceof Ld))return!1;const n=this._repo===e._repo,r=Vy(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+SE(this._path)}}class Kt extends Ld{constructor(e,n){super(e,n,new gd,!1)}get parent(){const e=Hy(this._path);return e===null?null:new Kt(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class gi{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Y(e),r=Gc(this.ref,e);return new gi(this._node.getChild(n),r,le)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new gi(s,Gc(this.ref,r),le)))}hasChild(e){const n=new Y(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Ov(t,e){return t=it(t),t._checkNotDeleted("ref"),e!==void 0?Gc(t._root,e):t._root}function Gc(t,e){return t=it(t),$(t._path)===null?lk("child","path",e):Nv("child","path",e),new Kt(t._repo,me(t._path,e))}function Ak(t,e){t=it(t),ak("set",t._path),ok("set",e,t._path);const n=new jl;return xk(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function jk(t){t=it(t);const e=new Pk(()=>{}),n=new Md(e);return _k(t._repo,t,n).then(r=>new gi(r,new Kt(t._repo,t._path),t._queryParams.getIndex()))}class Md{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new Tk("value",this,new gi(e.snapshotNode,new Kt(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Rk(this,e,n):null}matches(e){return e instanceof Md?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}AC(Kt);MC(Kt);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk="FIREBASE_DATABASE_EMULATOR_HOST",Kc={};let Ok=!1;function Lk(t,e,n,r){const s=e.lastIndexOf(":"),i=e.substring(0,s),o=ns(i);t.repoInfo_=new jy(e,o,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(t.authTokenProvider_=r)}function Mk(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||$t("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Pe("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=lp(i,s),l=o.repoInfo,a;typeof process<"u"&&If&&(a=If[Dk]),a?(i=`http://${a}?ns=${l.namespace}`,o=lp(i,s),l=o.repoInfo):o.repoInfo.secure;const u=new Yb(t.name,t.options,e);ck("Invalid Firebase Database URL",o),B(o.path)||$t("Database URL must point to the root of a Firebase Database (not including a child path).");const h=Uk(l,t,u,new Qb(t,n));return new zk(h,t)}function Fk(t,e){const n=Kc[e];(!n||n[t.key]!==t)&&$t(`Database ${e}(${t.repoInfo_}) has already been deleted.`),Sk(t),delete n[t.key]}function Uk(t,e,n,r){let s=Kc[e.name];s||(s={},Kc[e.name]=s);let i=s[t.toURLString()];return i&&$t("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new mk(t,Ok,n,r),s[t.toURLString()]=i,i}class zk{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(gk(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Kt(this._repo,V())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Fk(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&$t("Cannot call "+e+" on a deleted database.")}}function Bk(t=my(),e){const n=ad(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=rS("database");r&&Wk(n,...r)}return n}function Wk(t,e,n,r={}){t=it(t),t._checkNotDeleted("useEmulator");const s=`${e}:${n}`,i=t._repoInternal;if(t._instanceStarted){if(s===t._repoInternal.repoInfo_.host&&Zn(r,i.repoInfo_.emulatorOptions))return;$t("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&$t('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new go(go.OWNER);else if(r.mockUserToken){const l=typeof r.mockUserToken=="string"?r.mockUserToken:sS(r.mockUserToken,t.app.options.projectId);o=new go(l)}ns(e)&&(ay(e),cy("Database",!0)),Lk(i,s,r,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $k(t){jb(ss),Vr(new er("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return Mk(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),xn(Tf,Rf,t),xn(Tf,Rf,"esm2020")}Mt.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Mt.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};$k();function Lv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Hk=Lv,Mv=new Ei("auth","Firebase",Lv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cl=new od("@firebase/auth");function Vk(t,...e){cl.logLevel<=Q.WARN&&cl.warn(`Auth (${ss}): ${t}`,...e)}function yo(t,...e){cl.logLevel<=Q.ERROR&&cl.error(`Auth (${ss}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(t,...e){throw Fd(t,...e)}function Ct(t,...e){return Fd(t,...e)}function Fv(t,e,n){const r={...Hk(),[e]:n};return new Ei("auth","Firebase",r).create(e,{appName:t.name})}function qn(t){return Fv(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Fd(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Mv.create(t,...e)}function L(t,e,...n){if(!t)throw Fd(e,...n)}function Dt(t){const e="INTERNAL ASSERTION FAILED: "+t;throw yo(e),new Error(e)}function Vt(t,e){t||Dt(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qc(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function qk(){return ap()==="http:"||ap()==="https:"}function ap(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(qk()||aS()||"connection"in navigator)?navigator.onLine:!0}function Kk(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e,n){this.shortDelay=e,this.longDelay=n,Vt(n>e,"Short delay should be less than long delay!"),this.isMobile=sd()||uy()}get(){return Gk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ud(t,e){Vt(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Dt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Dt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Dt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Xk=new Pi(3e4,6e4);function zd(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function as(t,e,n,r,s={}){return zv(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=rs({key:t.config.apiKey,...o}).slice(1),a=await t._getAdditionalHeaders();a["Content-Type"]="application/json",t.languageCode&&(a["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:a,...i};return lS()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&ns(t.emulatorConfig.host)&&(u.credentials="include"),Uv.fetch()(await Bv(t,t.config.apiHost,n,l),u)})}async function zv(t,e,n){t._canInitEmulator=!1;const r={...Qk,...e};try{const s=new Zk(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw no(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[a,u]=l.split(" : ");if(a==="FEDERATED_USER_ID_ALREADY_LINKED")throw no(t,"credential-already-in-use",o);if(a==="EMAIL_EXISTS")throw no(t,"email-already-in-use",o);if(a==="USER_DISABLED")throw no(t,"user-disabled",o);const h=r[a]||a.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Fv(t,h,u);Ht(t,h)}}catch(s){if(s instanceof Pn)throw s;Ht(t,"network-request-failed",{message:String(s)})}}async function Jk(t,e,n,r,s={}){const i=await as(t,e,n,r,s);return"mfaPendingCredential"in i&&Ht(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function Bv(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?Ud(t.config,s):`${t.config.apiScheme}://${s}`;return Yk.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class Zk{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ct(this.auth,"network-request-failed")),Xk.get())})}}function no(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Ct(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eN(t,e){return as(t,"POST","/v1/accounts:delete",e)}async function ul(t,e){return as(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zs(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function tN(t,e=!1){const n=it(t),r=await n.getIdToken(e),s=Bd(r);L(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:zs(Da(s.auth_time)),issuedAtTime:zs(Da(s.iat)),expirationTime:zs(Da(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Da(t){return Number(t)*1e3}function Bd(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return yo("JWT malformed, contained fewer than 3 sections"),null;try{const s=Ko(n);return s?JSON.parse(s):(yo("Failed to decode base64 JWT payload"),null)}catch(s){return yo("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function cp(t){const e=Bd(t);return L(e,"internal-error"),L(typeof e.exp<"u","internal-error"),L(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yi(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Pn&&nN(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function nN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=zs(this.lastLoginAt),this.creationTime=zs(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dl(t){var d;const e=t.auth,n=await t.getIdToken(),r=await yi(t,ul(e,{idToken:n}));L(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(d=s.providerUserInfo)!=null&&d.length?Wv(s.providerUserInfo):[],o=iN(t.providerData,i),l=t.isAnonymous,a=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),u=l?a:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Yc(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function sN(t){const e=it(t);await dl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function iN(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Wv(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oN(t,e){const n=await zv(t,{},async()=>{const r=rs({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await Bv(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const a={method:"POST",headers:l,body:r};return t.emulatorConfig&&ns(t.emulatorConfig.host)&&(a.credentials="include"),Uv.fetch()(o,a)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function lN(t,e){return as(t,"POST","/v2/accounts:revokeToken",zd(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){L(e.idToken,"internal-error"),L(typeof e.idToken<"u","internal-error"),L(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):cp(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){L(e.length!==0,"internal-error");const n=cp(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(L(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await oN(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Dr;return r&&(L(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(L(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(L(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Dr,this.toJSON())}_performRefresh(){return Dt("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(t,e){L(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ft{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new rN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Yc(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await yi(this,this.stsTokenManager.getToken(this.auth,e));return L(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return tN(this,e)}reload(){return sN(this)}_assign(e){this!==e&&(L(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ft({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){L(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await dl(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(St(this.auth.app))return Promise.reject(qn(this.auth));const e=await this.getIdToken();return await yi(this,eN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,a=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:v,providerData:y,stsTokenManager:_}=n;L(d&&_,e,"internal-error");const S=Dr.fromJSON(this.name,_);L(typeof d=="string",e,"internal-error"),Yt(r,e.name),Yt(s,e.name),L(typeof f=="boolean",e,"internal-error"),L(typeof v=="boolean",e,"internal-error"),Yt(i,e.name),Yt(o,e.name),Yt(l,e.name),Yt(a,e.name),Yt(u,e.name),Yt(h,e.name);const m=new ft({uid:d,auth:e,email:s,emailVerified:f,displayName:r,isAnonymous:v,photoURL:o,phoneNumber:i,tenantId:l,stsTokenManager:S,createdAt:u,lastLoginAt:h});return y&&Array.isArray(y)&&(m.providerData=y.map(p=>({...p}))),a&&(m._redirectEventId=a),m}static async _fromIdTokenResponse(e,n,r=!1){const s=new Dr;s.updateFromServerResponse(n);const i=new ft({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await dl(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];L(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Wv(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new Dr;l.updateFromIdToken(r);const a=new ft({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Yc(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(a,u),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const up=new Map;function Ot(t){Vt(t instanceof Function,"Expected a class definition");let e=up.get(t);return e?(Vt(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,up.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}$v.type="NONE";const dp=$v;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vo(t,e,n){return`firebase:${t}:${e}:${n}`}class Or{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=vo(this.userKey,s.apiKey,i),this.fullPersistenceKey=vo("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await ul(this.auth,{idToken:e}).catch(()=>{});return n?ft._fromGetAccountInfoResponse(this.auth,n,e):null}return ft._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Or(Ot(dp),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||Ot(dp);const o=vo(r,e.config.apiKey,e.name);let l=null;for(const u of n)try{const h=await u._get(o);if(h){let d;if(typeof h=="string"){const f=await ul(e,{idToken:h}).catch(()=>{});if(!f)break;d=await ft._fromGetAccountInfoResponse(e,f,h)}else d=ft._fromJSON(e,h);u!==i&&(l=d),i=u;break}}catch{}const a=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!a.length?new Or(i,e,r):(i=a[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new Or(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hp(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Gv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Hv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Qv(e))return"Blackberry";if(Yv(e))return"Webos";if(Vv(e))return"Safari";if((e.includes("chrome/")||qv(e))&&!e.includes("edge/"))return"Chrome";if(Kv(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Hv(t=Le()){return/firefox\//i.test(t)}function Vv(t=Le()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function qv(t=Le()){return/crios\//i.test(t)}function Gv(t=Le()){return/iemobile/i.test(t)}function Kv(t=Le()){return/android/i.test(t)}function Qv(t=Le()){return/blackberry/i.test(t)}function Yv(t=Le()){return/webos/i.test(t)}function Wd(t=Le()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function aN(t=Le()){var e;return Wd(t)&&!!((e=window.navigator)!=null&&e.standalone)}function cN(){return cS()&&document.documentMode===10}function Xv(t=Le()){return Wd(t)||Kv(t)||Yv(t)||Qv(t)||/windows phone/i.test(t)||Gv(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jv(t,e=[]){let n;switch(t){case"Browser":n=hp(Le());break;case"Worker":n=`${hp(Le())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ss}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const a=e(i);o(a)}catch(a){l(a)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dN(t,e={}){return as(t,"GET","/v2/passwordPolicy",zd(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hN=6;class fN{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??hN,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fp(this),this.idTokenSubscription=new fp(this),this.beforeStateQueue=new uN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Mv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ot(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Or.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ul(this,{idToken:e}),r=await ft._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(St(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=r==null?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);(!o||o===l)&&(a!=null&&a.user)&&(r=a.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return L(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await dl(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Kk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(St(this.app))return Promise.reject(qn(this));const n=e?it(e):null;return n&&L(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&L(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return St(this.app)?Promise.reject(qn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return St(this.app)?Promise.reject(qn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ot(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await dN(this),n=new fN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ei("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await lN(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ot(e)||this._popupRedirectResolver;L(n,this,"argument-error"),this.redirectPersistenceManager=await Or.create(this,[Ot(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(L(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const a=e.addObserver(n,r,s);return()=>{o=!0,a()}}else{const a=e.addObserver(n);return()=>{o=!0,a()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return L(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Jv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(St(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&Vk(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function $d(t){return it(t)}class fp{constructor(e){this.auth=e,this.observer=null,this.addObserver=_S(n=>this.observer=n)}get next(){return L(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function mN(t){Hd=t}function gN(t){return Hd.loadJS(t)}function yN(){return Hd.gapiScript}function vN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _N(t,e){const n=ad(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Zn(i,e??{}))return s;Ht(s,"already-initialized")}return n.initialize({options:e})}function xN(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ot);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function wN(t,e,n){const r=$d(t);L(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=Zv(e),{host:o,port:l}=SN(e),a=l===null?"":`:${l}`,u={url:`${i}//${o}${a}/`},h=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){L(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),L(Zn(u,r.config.emulator)&&Zn(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,ns(o)?(ay(`${i}//${o}${a}`),cy("Auth",!0)):bN()}function Zv(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function SN(t){const e=Zv(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:pp(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:pp(o)}}}function pp(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function bN(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Dt("not implemented")}_getIdTokenResponse(e){return Dt("not implemented")}_linkToIdToken(e,n){return Dt("not implemented")}_getReauthenticationResolver(e){return Dt("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lr(t,e){return Jk(t,"POST","/v1/accounts:signInWithIdp",zd(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN="http://localhost";class sr extends e_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new sr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ht("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new sr(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Lr(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Lr(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Lr(e,n)}buildRequest(){const e={requestUri:EN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=rs(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai extends t_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn extends Ai{constructor(){super("facebook.com")}static credential(e){return sr._fromParams({providerId:tn.PROVIDER_ID,signInMethod:tn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return tn.credentialFromTaggedObject(e)}static credentialFromError(e){return tn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return tn.credential(e.oauthAccessToken)}catch{return null}}}tn.FACEBOOK_SIGN_IN_METHOD="facebook.com";tn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn extends Ai{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return sr._fromParams({providerId:nn.PROVIDER_ID,signInMethod:nn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return nn.credentialFromTaggedObject(e)}static credentialFromError(e){return nn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return nn.credential(n,r)}catch{return null}}}nn.GOOGLE_SIGN_IN_METHOD="google.com";nn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn extends Ai{constructor(){super("github.com")}static credential(e){return sr._fromParams({providerId:rn.PROVIDER_ID,signInMethod:rn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rn.credentialFromTaggedObject(e)}static credentialFromError(e){return rn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rn.credential(e.oauthAccessToken)}catch{return null}}}rn.GITHUB_SIGN_IN_METHOD="github.com";rn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn extends Ai{constructor(){super("twitter.com")}static credential(e,n){return sr._fromParams({providerId:sn.PROVIDER_ID,signInMethod:sn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return sn.credentialFromTaggedObject(e)}static credentialFromError(e){return sn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return sn.credential(n,r)}catch{return null}}}sn.TWITTER_SIGN_IN_METHOD="twitter.com";sn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await ft._fromIdTokenResponse(e,r,s),o=mp(r);return new Qr({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=mp(r);return new Qr({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function mp(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl extends Pn{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,hl.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new hl(e,n,r,s)}}function n_(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?hl._fromErrorAndOperation(t,i,e,r):i})}async function CN(t,e,n=!1){const r=await yi(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Qr._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kN(t,e,n=!1){const{auth:r}=t;if(St(r.app))return Promise.reject(qn(r));const s="reauthenticate";try{const i=await yi(t,n_(r,s,e,t),n);L(i.idToken,r,"internal-error");const o=Bd(i.idToken);L(o,r,"internal-error");const{sub:l}=o;return L(t.uid===l,r,"user-mismatch"),Qr._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Ht(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NN(t,e,n=!1){if(St(t.app))return Promise.reject(qn(t));const r="signIn",s=await n_(t,r,e),i=await Qr._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function IN(t,e,n,r){return it(t).onIdTokenChanged(e,n,r)}function TN(t,e,n){return it(t).beforeAuthStateChanged(e,n)}const fl="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(fl,"1"),this.storage.removeItem(fl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN=1e3,PN=10;class s_ extends r_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Xv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,a)=>{this.notifyListeners(o,a)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);cN()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,PN):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},RN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}s_.type="LOCAL";const AN=s_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_ extends r_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}i_.type="SESSION";const o_=i_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jN(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Hl(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async u=>u(n.origin,i)),a=await jN(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:a})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Hl.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vd(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,a)=>{const u=Vd("",20);s.port1.start();const h=setTimeout(()=>{a(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(d){const f=d;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(f.data.response);break;default:clearTimeout(h),clearTimeout(i),a(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(){return window}function ON(t){kt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l_(){return typeof kt().WorkerGlobalScope<"u"&&typeof kt().importScripts=="function"}async function LN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function MN(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function FN(){return l_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a_="firebaseLocalStorageDb",UN=1,pl="firebaseLocalStorage",c_="fbase_key";class ji{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Vl(t,e){return t.transaction([pl],e?"readwrite":"readonly").objectStore(pl)}function zN(){const t=indexedDB.deleteDatabase(a_);return new ji(t).toPromise()}function Xc(){const t=indexedDB.open(a_,UN);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(pl,{keyPath:c_})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(pl)?e(r):(r.close(),await zN(),e(await Xc()))})})}async function gp(t,e,n){const r=Vl(t,!0).put({[c_]:e,value:n});return new ji(r).toPromise()}async function BN(t,e){const n=Vl(t,!1).get(e),r=await new ji(n).toPromise();return r===void 0?null:r.value}function yp(t,e){const n=Vl(t,!0).delete(e);return new ji(n).toPromise()}const WN=800,$N=3;class u_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Xc(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>$N)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return l_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Hl._getInstance(FN()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await LN(),!this.activeServiceWorker)return;this.sender=new DN(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||MN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Xc();return await gp(e,fl,"1"),await yp(e,fl),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>gp(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>BN(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>yp(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Vl(s,!1).getAll();return new ji(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),WN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}u_.type="LOCAL";const HN=u_;new Pi(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VN(t,e){return e?Ot(e):(L(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd extends e_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Lr(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Lr(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Lr(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function qN(t){return NN(t.auth,new qd(t),t.bypassAuthState)}function GN(t){const{auth:e,user:n}=t;return L(n,e,"internal-error"),kN(n,new qd(t),t.bypassAuthState)}async function KN(t){const{auth:e,user:n}=t;return L(n,e,"internal-error"),CN(n,new qd(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const a={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(a))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return qN;case"linkViaPopup":case"linkViaRedirect":return KN;case"reauthViaPopup":case"reauthViaRedirect":return GN;default:Ht(this.auth,"internal-error")}}resolve(e){Vt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Vt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN=new Pi(2e3,1e4);class Cr extends d_{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Cr.currentPopupAction&&Cr.currentPopupAction.cancel(),Cr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return L(e,this.auth,"internal-error"),e}async onExecution(){Vt(this.filter.length===1,"Popup operations only handle one event");const e=Vd();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ct(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ct(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Cr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ct(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,QN.get())};e()}}Cr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YN="pendingRedirect",_o=new Map;class XN extends d_{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=_o.get(this.auth._key());if(!e){try{const r=await JN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}_o.set(this.auth._key(),e)}return this.bypassAuthState||_o.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function JN(t,e){const n=t1(e),r=e1(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function ZN(t,e){_o.set(t._key(),e)}function e1(t){return Ot(t._redirectPersistence)}function t1(t){return vo(YN,t.config.apiKey,t.name)}async function n1(t,e,n=!1){if(St(t.app))return Promise.reject(qn(t));const r=$d(t),s=VN(r,e),o=await new XN(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1=10*60*1e3;class s1{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!i1(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!h_(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ct(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=r1&&this.cachedEventUids.clear(),this.cachedEventUids.has(vp(e))}saveEventToCache(e){this.cachedEventUids.add(vp(e)),this.lastProcessedEventTime=Date.now()}}function vp(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function h_({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function i1(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return h_(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o1(t,e={}){return as(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,a1=/^https?/;async function c1(t){if(t.config.emulator)return;const{authorizedDomains:e}=await o1(t);for(const n of e)try{if(u1(n))return}catch{}Ht(t,"unauthorized-domain")}function u1(t){const e=Qc(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!a1.test(n))return!1;if(l1.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1=new Pi(3e4,6e4);function _p(){const t=kt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function h1(t){return new Promise((e,n)=>{var s,i,o;function r(){_p(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{_p(),n(Ct(t,"network-request-failed"))},timeout:d1.get()})}if((i=(s=kt().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=kt().gapi)!=null&&o.load)r();else{const l=vN("iframefcb");return kt()[l]=()=>{gapi.load?r():n(Ct(t,"network-request-failed"))},gN(`${yN()}?onload=${l}`).catch(a=>n(a))}}).catch(e=>{throw xo=null,e})}let xo=null;function f1(t){return xo=xo||h1(t),xo}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1=new Pi(5e3,15e3),m1="__/auth/iframe",g1="emulator/auth/iframe",y1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},v1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _1(t){const e=t.config;L(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Ud(e,g1):`https://${t.config.authDomain}/${m1}`,r={apiKey:e.apiKey,appName:t.name,v:ss},s=v1.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${rs(r).slice(1)}`}async function x1(t){const e=await f1(t),n=kt().gapi;return L(n,t,"internal-error"),e.open({where:document.body,url:_1(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:y1,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Ct(t,"network-request-failed"),l=kt().setTimeout(()=>{i(o)},p1.get());function a(){kt().clearTimeout(l),s(r)}r.ping(a).then(a,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},S1=500,b1=600,E1="_blank",C1="http://localhost";class xp{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function k1(t,e,n,r=S1,s=b1){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const a={...w1,width:r.toString(),height:s.toString(),top:i,left:o},u=Le().toLowerCase();n&&(l=qv(u)?E1:n),Hv(u)&&(e=e||C1,a.scrollbars="yes");const h=Object.entries(a).reduce((f,[v,y])=>`${f}${v}=${y},`,"");if(aN(u)&&l!=="_self")return N1(e||"",l),new xp(null);const d=window.open(e||"",l,h);L(d,t,"popup-blocked");try{d.focus()}catch{}return new xp(d)}function N1(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I1="__/auth/handler",T1="emulator/auth/handler",R1=encodeURIComponent("fac");async function wp(t,e,n,r,s,i){L(t.config.authDomain,t,"auth-domain-config-required"),L(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ss,eventId:s};if(e instanceof t_){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Ac(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof Ai){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const a=await t._getAppCheckToken(),u=a?`#${R1}=${encodeURIComponent(a)}`:"";return`${P1(t)}?${rs(l).slice(1)}${u}`}function P1({config:t}){return t.emulator?Ud(t,T1):`https://${t.authDomain}/${I1}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa="webStorageSupport";class A1{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=o_,this._completeRedirectFn=n1,this._overrideRedirectResult=ZN}async _openPopup(e,n,r,s){var o;Vt((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await wp(e,n,r,Qc(),s);return k1(e,i,Vd())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await wp(e,n,r,Qc(),s);return ON(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Vt(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await x1(e),r=new s1(e);return n.register("authEvent",s=>(L(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Oa,{type:Oa},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[Oa];i!==void 0&&n(!!i),Ht(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=c1(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Xv()||Vv()||Wd()}}const j1=A1;var Sp="@firebase/auth",bp="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){L(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O1(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function L1(t){Vr(new er("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;L(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const a={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Jv(t)},u=new pN(r,s,i,a);return xN(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Vr(new er("auth-internal",e=>{const n=$d(e.getProvider("auth").getImmediate());return(r=>new D1(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),xn(Sp,bp,O1(t)),xn(Sp,bp,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M1=5*60,F1=ly("authIdTokenMaxAge")||M1;let Ep=null;const U1=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>F1)return;const s=n==null?void 0:n.token;Ep!==s&&(Ep=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function z1(t=my()){const e=ad(t,"auth");if(e.isInitialized())return e.getImmediate();const n=_N(t,{popupRedirectResolver:j1,persistence:[HN,AN,o_]}),r=ly("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=U1(i.toString());TN(n,o,()=>o(n.currentUser)),IN(n,l=>o(l))}}const s=iy("auth");return s&&wN(n,`http://${s}`),n}function B1(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}mN({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Ct("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",B1().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});L1("Browser");const W1={apiKey:"AIzaSyCiawZvKguK0HK8isnXBTbmEFDq073DQYk",authDomain:"cybersecuritytine.firebaseapp.com",projectId:"cybersecuritytine",storageBucket:"cybersecuritytine.firebasestorage.app",messagingSenderId:"893416088432",appId:"1:893416088432:web:5bf42b290ebba72a37a5b5",databaseURL:"https://cybersecuritytine-default-rtdb.firebaseio.com/"},f_=py(W1),p_=Bk(f_);z1(f_);const yt=()=>{try{let t=localStorage.getItem("current_room_id");return(!t||t==="null"||t==="undefined")&&(t="default_room",localStorage.setItem("current_room_id",t)),t}catch(t){return console.error("Error getting room ID:",t),"default_room"}},Di=async t=>{try{const e=Ov(p_,`rooms/${t}`),n=await jk(e);return n.exists()?n.val():null}catch(e){return console.error("Error getting room data:",e),null}},Jc=async(t,e)=>{try{const n=Ov(p_,`rooms/${t}`);return await Ak(n,e),!0}catch(n){return console.error("Error saving room data:",n),!1}},Zc=async t=>{const e=yt();try{const s={...await Di(e)||{id:e,createdAt:new Date().toISOString(),defenderState:{defenses:{},lastUpdated:null},attackHistory:[],activeAttacks:[]},defenderState:{defenses:t,lastUpdated:new Date().toISOString()}};return await Jc(e,s)}catch(n){return console.error("Error updating defender state:",n),!1}},m_=async()=>{const t=yt();if(!t)return{defenses:{},lastUpdated:null};const e=await Di(t);return(e==null?void 0:e.defenderState)||{defenses:{},lastUpdated:null}},$1=()=>`${Math.floor(Math.random()*255)}.${Math.floor(Math.random()*255)}.${Math.floor(Math.random()*255)}.${Math.floor(Math.random()*255)}`,H1=async t=>{const e=yt();if(!e)return!1;try{const n=await Di(e);if(!n){const l={id:e,createdAt:new Date().toISOString(),defenderState:{defenses:{},lastUpdated:null},attackHistory:[],activeAttacks:[]};return await Jc(e,l),!1}const r=Date.now()+Math.random(),s={type:t.attackType||"Unknown Attack",description:t.message||"Attack detected",blocked:!t.success&&t.defenses&&t.defenses.length>0,severity:t.success?"high":"medium",ip:$1(),timestamp:new Date().toLocaleTimeString(),id:r,attackId:t.attackType,success:t.success,defenses:t.defenses||[],details:t.details||"",damage:t.damage||0},i=n.activeAttacks||[];if(!i.some(l=>l.id===r||l.type===s.type&&l.attackId===s.attackId&&Math.abs((l.id&&typeof l.id=="number"?l.id:0)-r)<1e3)){const l=[...i,s],a=[...n.attackHistory||[],{...t,id:r,timestamp:new Date().toISOString()}],u=l.slice(-100),h=a.slice(-100),d={...n,activeAttacks:u,attackHistory:h};return await Jc(e,d)}return!1}catch(n){return console.error("Error adding room attack:",n),!1}},Gd=async()=>{const t=yt();if(!t)return[];const e=await Di(t);return(e==null?void 0:e.attackHistory)||[]},Kd=(t=1e3)=>new Promise(e=>setTimeout(e,t)),An=()=>yt()?!0:(console.warn("No room found. Please create or join a room first."),!1),wo=async t=>An()?await Zc(t):!1,Cp=t=>{try{localStorage.setItem("defender_state",JSON.stringify({defenses:t,lastUpdated:new Date().toISOString()}))}catch(e){console.error("Error saving defender state:",e)}},V1=async()=>{if(!An())return null;const t=await m_();if(t&&t.defenses&&Object.keys(t.defenses).length>0)return t;try{const n=localStorage.getItem("defender_state");if(n){const r=JSON.parse(n);if(r.defenses)return await Zc(r.defenses),{defenses:r.defenses||{},lastUpdated:r.lastUpdated||new Date().toISOString()}}}catch(n){console.error("Error loading defender state:",n)}const e=localStorage.getItem("defender_defenses");if(e)try{const n=JSON.parse(e);return await Zc(n),{defenses:n,lastUpdated:new Date().toISOString()}}catch(n){console.error("Error parsing saved defenses:",n)}return null},Qd=async()=>{if(!An())return{defenses:{},lastUpdated:null};const t=await m_();return{defenses:t.defenses||{},lastUpdated:t.lastUpdated||null}},kp=async t=>{if(!An())return{attacks:[],defenseStatus:t};await Kd(500),await wo(t);const e=yt(),n=await Di(e);if(!n)return{attacks:[],defenseStatus:t};const r=n.activeAttacks||[],s=new Map;return r.forEach(o=>{const l=o.id||`${o.type}-${o.timestamp}-${o.ip}`;s.has(l)||s.set(l,o)}),{attacks:Array.from(s.values()).sort((o,l)=>{try{let a=0,u=0;if(o.id&&typeof o.id=="number")a=o.id;else if(o.timestamp){const h=new Date(o.timestamp);a=isNaN(h.getTime())?0:h.getTime()}if(l.id&&typeof l.id=="number")u=l.id;else if(l.timestamp){const h=new Date(l.timestamp);u=isNaN(h.getTime())?0:h.getTime()}return u-a}catch{return 0}}),defenseStatus:t}},q1=async(t,e)=>(await Kd(300),{success:!0,defenseType:t,enabled:e}),G1=async t=>{if(!An())return{success:!1,message:"No room found. Please create or join a room first.",details:"Room required to launch attacks",defenses:[],attackType:t,timestamp:new Date().toISOString(),damage:0};await Kd(1500);const n=(await Qd()).defenses||{},r={"sql-injection":{baseSuccess:.6,blockedBy:["waf","firewall"],requiredDefenses:["waf"]},xss:{baseSuccess:.65,blockedBy:["waf","monitoring"],requiredDefenses:["waf"]},"brute-force":{baseSuccess:.5,blockedBy:["rateLimit","authentication"],requiredDefenses:["rateLimit"]},ddos:{baseSuccess:.55,blockedBy:["rateLimit","firewall"],requiredDefenses:["rateLimit","firewall"]},"api-exploit":{baseSuccess:.7,blockedBy:["authentication","encryption","waf"],requiredDefenses:["authentication"]},csrf:{baseSuccess:.6,blockedBy:["authentication","waf"],requiredDefenses:["authentication"]},phishing:{baseSuccess:.45,blockedBy:["authentication","monitoring"],requiredDefenses:["authentication"]},malware:{baseSuccess:.4,blockedBy:["firewall","monitoring"],requiredDefenses:["firewall"]},"session-hijack":{baseSuccess:.5,blockedBy:["authentication","encryption"],requiredDefenses:["authentication","encryption"]},"zero-day":{baseSuccess:.3,blockedBy:["waf","monitoring","firewall"],requiredDefenses:["waf","monitoring"]}},s=r[t]||r["sql-injection"],i=s.requiredDefenses.some(v=>n[v]);let o=s.baseSuccess;s.blockedBy.forEach(v=>{n[v]&&(o*=.3)}),i&&(o*=.2);const l=Math.random()<o,a=!l&&(i||s.blockedBy.some(v=>n[v])),u=s.blockedBy.filter(v=>n[v]),h={"sql-injection":l?"SQL injection successful! Database accessed. Sensitive data exposed.":a?"SQL injection blocked by active defenses":"SQL injection failed - no vulnerable endpoint found",xss:l?"XSS payload executed successfully. User sessions compromised.":a?"XSS attack blocked by security filters":"XSS attack failed - no injection point found","brute-force":l?"Password cracked! Admin access granted.":a?"Brute force blocked by rate limiting and authentication":"Brute force failed - account locked",ddos:l?"DDoS successful! Server overwhelmed and offline.":a?"DDoS mitigated by firewall and rate limiting":"DDoS failed - insufficient traffic","api-exploit":l?"API endpoint exploited! User data accessed.":a?"API exploit blocked by authentication and encryption":"API exploit failed - endpoint secured",csrf:l?"CSRF attack successful! Unauthorized action executed.":a?"CSRF blocked by authentication tokens":"CSRF failed - no valid session found",phishing:l?"Phishing successful! Credentials harvested.":a?"Phishing attempt detected and blocked":"Phishing failed - user awareness prevented",malware:l?"Malware deployed! System compromised.":a?"Malware blocked by firewall and monitoring":"Malware failed - no entry point","session-hijack":l?"Session hijacked! User impersonation successful.":a?"Session hijack prevented by encryption":"Session hijack failed - secure session","zero-day":l?"Zero-day exploit successful! Critical vulnerability exploited.":a?"Zero-day attack detected and mitigated":"Zero-day failed - no vulnerability found"},d={"sql-injection":"Payload: SELECT * FROM users WHERE id = 1 OR 1=1; DROP TABLE users;",xss:'Payload: <script>document.cookie="admin=true"<\/script>',"brute-force":"Attempted 10,000 password combinations in 5 minutes",ddos:"Sent 50,000 requests per second from 1,000+ IPs","api-exploit":"Accessed: GET /api/users/1 without authentication token",csrf:"Forged POST request to /api/transfer?amount=10000&to=attacker",phishing:"Sent 1,000 emails with malicious login link",malware:"Deployed trojan via email attachment","session-hijack":"Intercepted session cookie via MITM attack","zero-day":"Exploited unpatched vulnerability in web framework"},f={success:l&&!a,message:h[t],details:d[t],defenses:a?u:[],attackType:t,timestamp:new Date().toISOString(),damage:l?Math.floor(Math.random()*50)+10:0};return await H1(f),f},Yd=async()=>{if(!An())return{total:0,successful:0,blocked:0,failed:0,successRate:0,blockRate:0,byType:{}};const t=await Gd(),e=t.length,n=t.filter(o=>o.success).length,r=t.filter(o=>!o.success&&o.defenses&&o.defenses.length>0).length,s=t.filter(o=>!o.success&&(!o.defenses||o.defenses.length===0)).length,i={};return t.forEach(o=>{const l=o.attackType||o.attackId||"unknown";i[l]||(i[l]={total:0,successful:0,blocked:0}),i[l].total++,o.success?i[l].successful++:o.defenses&&o.defenses.length>0&&i[l].blocked++}),{total:e,successful:n,blocked:r,failed:s,successRate:e>0?(n/e*100).toFixed(1):0,blockRate:e>0?(r/e*100).toFixed(1):0,byType:i}},K1=async t=>{if(!An())return{};try{const e=await Gd(),n=Object.entries(t).filter(([s,i])=>i),r={};return n.forEach(([s,i])=>{const o=e.filter(l=>l.defenses&&Array.isArray(l.defenses)&&l.defenses.includes(s));r[s]={blocks:o.length,effectiveness:o.length>0?(o.filter(l=>!l.success).length/o.length*100).toFixed(1):0}}),r}catch(e){return console.error("Error getting defense effectiveness:",e),{}}},Q1=async(t,e=null)=>{if(!An())return[];try{const n=e||await Gd(),r=[],s=Object.entries(t).filter(([a,u])=>u).map(([a])=>a);return n.filter(a=>(a.attackType==="sql-injection"||a.attackId==="sql-injection")&&a.success).length>0&&!s.includes("waf")&&r.push({type:"critical",title:"Enable WAF",description:"SQL injection attacks are succeeding. Enable Web Application Firewall to block them.",defense:"waf"}),n.filter(a=>(a.attackType==="brute-force"||a.attackId==="brute-force")&&a.success).length>0&&!s.includes("rateLimit")&&r.push({type:"high",title:"Enable Rate Limiting",description:"Brute force attacks are successful. Enable rate limiting to prevent them.",defense:"rateLimit"}),n.filter(a=>(a.attackType==="ddos"||a.attackId==="ddos")&&a.success).length>0&&!s.includes("firewall")&&r.push({type:"high",title:"Enable Firewall",description:"DDoS attacks are overwhelming your system. Enable firewall protection.",defense:"firewall"}),s.length<3&&r.push({type:"medium",title:"Enable More Defenses",description:"Your security score is low. Enable more defenses to improve protection.",defense:null}),r}catch(n){return console.error("Error getting recommendations:",n),[]}},ql=()=>{try{const t=localStorage.getItem("completed_challenges");return t?JSON.parse(t):[]}catch(t){return console.error("Error loading completed challenges:",t),[]}},Gn=t=>{try{const e=ql();return e.includes(t)||(e.push(t),localStorage.setItem("completed_challenges",JSON.stringify(e))),!0}catch(e){return console.error("Error saving completed challenge:",e),!1}},Bs=t=>ql().includes(t),eu=(t,e)=>{const n=[{id:"firewall",text:"Enable Firewall",completed:t.firewall||!1},{id:"authentication",text:"Enable Authentication",completed:t.authentication||!1},{id:"waf",text:"Enable WAF",completed:t.waf||!1}],r=n.filter(o=>o.completed).length,s=n.length;return{completed:r===s,progress:Math.round(r/s*100),objectives:n}},tu=(t,e,n)=>{const r=Object.values(t).every(u=>u===!0),s=(e==null?void 0:e.blocked)||0,i=[{id:"all-defenses",text:"Enable all defenses",completed:r},{id:"block-5",text:"Block 5 attacks successfully",completed:s>=5},{id:"score-100",text:"Maintain 100% security score",completed:n>=100}],o=i.filter(u=>u.completed).length,l=i.length;return{completed:o===l,progress:Math.round(o/l*100),objectives:i}},nu=t=>{var l,a,u,h;const e=(t==null?void 0:t.byType)||{},n=Object.values(e).filter(d=>d.blocked>0).length,r=[{id:"block-sql",text:"Block SQL Injection",completed:((l=e["sql-injection"])==null?void 0:l.blocked)>0},{id:"block-xss",text:"Block XSS attacks",completed:((a=e.xss)==null?void 0:a.blocked)>0},{id:"block-ddos",text:"Block DDoS attempts",completed:((u=e.ddos)==null?void 0:u.blocked)>0},{id:"block-brute",text:"Block Brute Force",completed:((h=e["brute-force"])==null?void 0:h.blocked)>0},{id:"block-10",text:"Block all 10 attack types",completed:n>=10}],s=r.filter(d=>d.completed).length,i=r.length;return{completed:s===i,progress:Math.round(s/i*100),objectives:r}},ru=t=>{const e=new Set(t.map(l=>l.attackType)),n=t.filter(l=>l.success).length,r=[{id:"launch-5",text:"Launch 5 different attack types",completed:e.size>=5},{id:"breach-2",text:"Successfully breach at least 2",completed:n>=2},{id:"analyze",text:"Analyze which defenses blocked you",completed:t.some(l=>l.defenses&&l.defenses.length>0)}],s=r.filter(l=>l.completed).length,i=r.length;return{completed:s===i,progress:Math.round(s/i*100),objectives:r}},su=(t,e)=>{const n=Object.values(t).every(u=>u===!0),r=e.find(u=>u.attackType==="zero-day"||u.attackId==="zero-day"),s=(r==null?void 0:r.success)||!1,i=[{id:"all-defenses",text:"Target system with all 6 defenses active",completed:n},{id:"use-zero-day",text:"Use zero-day exploit",completed:!!r},{id:"breach",text:"Successfully breach the system",completed:s}],o=i.filter(u=>u.completed).length,l=i.length;return{completed:o===l,progress:Math.round(o/l*100),objectives:i}},Y1=()=>{const t=ql(),e={"beginner-1":{name:"Basic Defender",icon:"",description:"Completed Basic Defense Setup"},"intermediate-1":{name:"Master Defender",icon:"",description:"Completed Complete Protection"},"advanced-1":{name:"Elite Defender",icon:"",description:"Completed Attack Simulation"},"attacker-1":{name:"Security Analyst",icon:"",description:"Completed Penetration Test"},"expert-1":{name:"Elite Hacker",icon:"",description:"Completed Zero-Day Challenge"}};return t.map(n=>e[n]).filter(Boolean)};function Gl({children:t}){return t}const Np=()=>{try{const t=localStorage.getItem("defender_defenses");if(t){const e=JSON.parse(t);return{firewall:e.firewall||!1,authentication:e.authentication||!1,encryption:e.encryption||!1,rateLimit:e.rateLimit||!1,waf:e.waf||!1,monitoring:e.monitoring||!1}}}catch(t){console.error("Error loading saved defenses:",t)}return{firewall:!1,authentication:!1,encryption:!1,rateLimit:!1,waf:!1,monitoring:!1}};function X1(){const t=Al(),[e,n]=b.useState(Np),[r,s]=b.useState(0),[i,o]=b.useState([]),[l,a]=b.useState(new Set),[u,h]=b.useState(!1),[d,f]=b.useState(null),[v,y]=b.useState({}),[_,S]=b.useState([]),[m,p]=b.useState(0),[g,x]=b.useState(0);b.useEffect(()=>{if(!yt())return;(async()=>{const j=await V1();if(j&&j.defenses)n(j.defenses);else{const q=Np();Object.values(q).some(Ne=>Ne===!0)&&(n(q),wo(q),Cp(q))}})()},[]),b.useEffect(()=>{if(!yt())return;(async()=>{try{const j=await kp(e);if(j.attacks.length>0){o(j.attacks);const q=j.attacks.filter(R=>R.blocked).length,G=j.attacks.filter(R=>R.success&&!R.blocked).length;p(q),x(G);const Ne=new Set(j.attacks.map(R=>R.id||`${R.type}-${R.timestamp}-${R.ip}`));a(Ne)}}catch(j){console.error("Error loading attack history:",j)}})()},[e]),b.useEffect(()=>{yt()&&(localStorage.setItem("defender_defenses",JSON.stringify(e)),wo(e),Cp(e),C())},[e]),b.useEffect(()=>{const T=()=>{document.hidden||(I(),w())};document.addEventListener("visibilitychange",T);const A=setInterval(()=>{document.hidden||(I(),w())},2e3);return()=>{clearInterval(A),document.removeEventListener("visibilitychange",T)}},[e]),b.useEffect(()=>{w()},[]);const C=()=>{const T=Object.values(e).filter(Boolean).length,A=Object.keys(e).length;let j=T/A*100;e.firewall&&e.waf&&(j+=5),e.authentication&&e.encryption&&(j+=5),e.rateLimit&&e.monitoring&&(j+=5),s(Math.min(100,Math.round(j)))},I=async()=>{try{const T=await kp(e);T.attacks.length>0?(h(!0),a(A=>{const j=new Set(A),q=T.attacks.filter(G=>{const Ne=G.id||`${G.type}-${G.timestamp}-${G.ip}`;return j.has(Ne)?!1:(j.add(Ne),!0)});return q.length>0&&(o(G=>[...q,...G].slice(0,50)),x(G=>G+q.filter(Ne=>!Ne.blocked).length),p(G=>G+q.filter(Ne=>Ne.blocked).length)),j})):h(!1)}catch(T){console.error("Error checking defense status:",T)}},w=async()=>{try{const T=await Yd();f(T);const A=await K1(e);y(A);const j=await Q1(e);S(j),N(T)}catch(T){console.error("Error updating statistics:",T)}},N=T=>{const A=Object.values(e).filter(Boolean).length,j=Object.keys(e).length;let q=A/j*100;e.firewall&&e.waf&&(q+=5),e.authentication&&e.encryption&&(q+=5),e.rateLimit&&e.monitoring&&(q+=5),q=Math.min(100,Math.round(q)),Bs("beginner-1")||eu(e).completed&&(Gn("beginner-1"),t("/challenges?completed=beginner-1")),Bs("intermediate-1")||tu(e,T,q).completed&&(Gn("intermediate-1"),t("/challenges?completed=intermediate-1")),Bs("advanced-1")||nu(T).completed&&(Gn("advanced-1"),t("/challenges?completed=advanced-1"))},M=async T=>{const A={...e,[T]:!e[T]};n(A),wo(A),await q1(T,A[T]),C(),w()},O=(T,A)=>A?{firewall:"border-red-500 bg-red-500/10",authentication:"border-blue-500 bg-blue-500/10",encryption:"border-green-500 bg-green-500/10",rateLimit:"border-yellow-500 bg-yellow-500/10",waf:"border-purple-500 bg-purple-500/10",monitoring:"border-cyan-500 bg-cyan-500/10"}[T]||"border-slate-500 bg-slate-500/10":"border-slate-700 hover:border-slate-600",ke=[{id:"firewall",name:"Firewall",description:"Blocks unauthorized network traffic and port scans",icon:"",protection:"Network Layer"},{id:"authentication",name:"Authentication",description:"Requires user login and multi-factor verification",icon:"",protection:"Access Control"},{id:"encryption",name:"Encryption",description:"Encrypts data in transit (TLS) and at rest (AES-256)",icon:"",protection:"Data Protection"},{id:"rateLimit",name:"Rate Limiting",description:"Prevents brute force and DDoS attacks (100 req/min)",icon:"",protection:"DoS Protection"},{id:"waf",name:"Web Application Firewall",description:"Protects against SQL injection, XSS, and CSRF",icon:"",protection:"Application Layer"},{id:"monitoring",name:"Security Monitoring",description:"Real-time threat detection and automated alerts",icon:"",protection:"Threat Detection"}];return c.jsx(Gl,{children:c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:" Defender Dashboard"}),c.jsx("p",{className:"text-gray-400",children:"Configure your security defenses to protect against attacks"})]}),c.jsxs("div",{className:"grid md:grid-cols-4 gap-4 mb-8",children:[c.jsxs("div",{className:"bg-slate-800 rounded-lg p-6 border border-slate-700",children:[c.jsx("h3",{className:"text-sm font-semibold text-gray-400 mb-2",children:"Security Score"}),c.jsxs("div",{className:"text-4xl font-bold text-cyber-green",children:[r,"%"]}),c.jsx("div",{className:"w-full bg-slate-700 rounded-full h-2 mt-4",children:c.jsx("div",{className:"bg-cyber-green h-2 rounded-full transition-all duration-300",style:{width:`${r}%`}})}),c.jsx("p",{className:"text-xs text-gray-500 mt-2",children:r>=80?"Excellent":r>=60?"Good":r>=40?"Fair":"Poor"})]}),c.jsxs("div",{className:"bg-slate-800 rounded-lg p-6 border border-slate-700",children:[c.jsx("h3",{className:"text-sm font-semibold text-gray-400 mb-2",children:"Active Defenses"}),c.jsxs("div",{className:"text-4xl font-bold text-cyber-blue",children:[Object.values(e).filter(Boolean).length," / ",Object.keys(e).length]}),c.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Defenses enabled"})]}),c.jsxs("div",{className:"bg-slate-800 rounded-lg p-6 border border-slate-700",children:[c.jsx("h3",{className:"text-sm font-semibold text-gray-400 mb-2",children:"Attacks Blocked"}),c.jsx("div",{className:"text-4xl font-bold text-cyber-green",children:m}),c.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Successfully defended"})]}),c.jsxs("div",{className:`bg-slate-800 rounded-lg p-6 border ${u?"border-cyber-red animate-pulse":"border-slate-700"}`,children:[c.jsx("h3",{className:"text-sm font-semibold text-gray-400 mb-2",children:"Status"}),c.jsx("div",{className:`text-2xl font-bold ${u?"text-cyber-red":"text-cyber-green"}`,children:u?" UNDER ATTACK":" SECURE"}),c.jsx("p",{className:"text-gray-400 text-sm mt-2",children:u?"Active threats detected":"No active threats"})]})]}),_.length>0&&c.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4 mb-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-yellow-400 mb-3",children:" Security Recommendations"}),c.jsx("div",{className:"space-y-2",children:_.map((T,A)=>c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("span",{className:"text-yellow-400",children:""}),c.jsxs("div",{children:[c.jsx("p",{className:"text-white font-medium",children:T.title}),c.jsx("p",{className:"text-gray-400 text-sm",children:T.description})]})]},A))})]}),c.jsxs("div",{className:"mb-8",children:[c.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Security Configurations"}),c.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:ke.map(T=>{const A=v[T.id];return c.jsxs("div",{className:`bg-slate-800 rounded-lg p-6 border-2 transition-all cursor-pointer ${O(T.id,e[T.id])}`,onClick:()=>M(T.id),children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("span",{className:"text-3xl",children:T.icon}),c.jsxs("div",{className:"flex items-center gap-2",children:[A&&c.jsxs("span",{className:"text-xs text-cyber-green",children:[A.effectiveness,"% effective"]}),c.jsx("div",{className:`w-4 h-4 rounded-full ${e[T.id]?"bg-cyber-green":"bg-slate-600"}`})]})]}),c.jsx("h3",{className:"text-xl font-semibold text-white mb-1",children:T.name}),c.jsx("p",{className:"text-gray-400 text-xs mb-2",children:T.protection}),c.jsx("p",{className:"text-gray-400 text-sm mb-4",children:T.description}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:`text-xs px-2 py-1 rounded ${e[T.id]?"bg-cyber-green/20 text-cyber-green":"bg-slate-700 text-gray-400"}`,children:e[T.id]?"ACTIVE":"INACTIVE"}),A&&A.blocks>0&&c.jsxs("span",{className:"text-xs text-gray-500",children:["Blocked ",A.blocks," attacks"]})]})]},T.id)})})]}),i.length>0&&c.jsxs("div",{className:"bg-slate-800 rounded-lg p-6 border border-cyber-red",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h2",{className:"text-2xl font-bold text-cyber-red",children:" Attack Logs"}),c.jsxs("span",{className:"text-sm text-gray-400",children:[i.length," recent attacks"]})]}),c.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:i.map((T,A)=>{const q={"sql-injection":"SQL Injection",xss:"XSS (Cross-Site Scripting)","brute-force":"Brute Force",ddos:"DDoS Attack","api-exploit":"API Exploit",csrf:"CSRF Attack",phishing:"Phishing",malware:"Malware","session-hijack":"Session Hijack","zero-day":"Zero-Day Exploit"}[T.type]||T.type||"Unknown Attack";return c.jsx("div",{className:`bg-slate-900 rounded-lg p-4 border-l-4 ${T.success?"border-cyber-red bg-red-500/5":T.blocked?"border-cyber-green bg-green-500/5":"border-yellow-500 bg-yellow-500/5"}`,children:c.jsx("div",{className:"flex justify-between items-start mb-2",children:c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx("p",{className:"text-white font-bold text-lg",children:q}),c.jsx("span",{className:`text-xs px-2 py-0.5 rounded font-semibold ${T.success?"bg-red-500/30 text-red-300 border border-red-500/50":T.blocked?"bg-green-500/30 text-green-300 border border-green-500/50":"bg-yellow-500/30 text-yellow-300 border border-yellow-500/50"}`,children:T.success?" SUCCESS":T.blocked?" BLOCKED":" FAILED"})]}),c.jsx("p",{className:"text-gray-300 text-sm mb-2",children:T.description}),T.details&&c.jsxs("div",{className:"bg-slate-800/50 rounded p-2 mb-2 mt-2",children:[c.jsx("p",{className:"text-xs text-gray-400 mb-1",children:" Attack Details:"}),c.jsx("code",{className:"text-xs text-cyber-yellow break-all",children:T.details})]}),T.defenses&&T.defenses.length>0&&c.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[c.jsx("span",{className:"text-xs text-gray-400",children:" Blocked by:"}),T.defenses.map((G,Ne)=>{const R={firewall:"Firewall",authentication:"Authentication",encryption:"Encryption",rateLimit:"Rate Limiting",waf:"WAF",monitoring:"Monitoring"};return c.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-cyber-blue/20 text-cyber-blue border border-cyber-blue/30",children:R[G]||G},Ne)})]}),T.success&&T.damage>0&&c.jsx("div",{className:"mt-2",children:c.jsxs("span",{className:"text-xs text-red-400 font-semibold",children:[" Damage: ",T.damage,"%"]})}),c.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-500",children:[T.ip&&c.jsxs("span",{children:[" IP: ",c.jsx("code",{className:"text-cyber-blue",children:T.ip})]}),c.jsxs("span",{children:[" ",T.timestamp]})]})]})})},T.id||A)})})]}),d&&d.total>0&&c.jsxs("div",{className:"mt-8 bg-slate-800 rounded-lg p-6 border border-slate-700",children:[c.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:" Defense Statistics"}),c.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-gray-400 text-sm",children:"Total Attacks"}),c.jsx("p",{className:"text-2xl font-bold text-white",children:d.total})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-gray-400 text-sm",children:"Block Rate"}),c.jsxs("p",{className:"text-2xl font-bold text-cyber-green",children:[d.blockRate,"%"]})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-gray-400 text-sm",children:"Breach Rate"}),c.jsxs("p",{className:"text-2xl font-bold text-cyber-red",children:[d.successRate,"%"]})]})]})]})]})})}function J1({result:t,attackType:e,onClose:n}){var s,i,o,l,a,u,h,d;if(!t)return null;const r=t.success;return c.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-fade-in",children:c.jsxs("div",{className:`bg-slate-800 rounded-lg border-2 max-w-2xl w-full max-h-[90vh] overflow-y-auto ${r?"border-cyber-red":"border-cyber-green"} animate-slide-up`,children:[c.jsx("div",{className:`p-6 border-b ${r?"bg-red-500/10 border-red-500/30":"bg-green-500/10 border-green-500/30"}`,children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:`text-5xl ${r?"animate-bounce":""}`,children:t.attackIcon||""}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-white",children:t.attackType||e}),c.jsx("p",{className:"text-gray-400 text-sm mt-1",children:new Date().toLocaleString()})]})]}),c.jsx("button",{onClick:n,className:"text-gray-400 hover:text-white text-2xl font-bold w-8 h-8 flex items-center justify-center rounded hover:bg-slate-700 transition",children:""})]})}),c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:`inline-flex items-center gap-3 px-6 py-4 rounded-lg mb-6 ${r?"bg-red-500/20 border-2 border-red-500/50":"bg-green-500/20 border-2 border-green-500/50"}`,children:[c.jsx("span",{className:"text-4xl",children:r?"":""}),c.jsxs("div",{children:[c.jsx("p",{className:`text-2xl font-bold ${r?"text-red-400":"text-green-400"}`,children:r?"ATTACK SUCCESSFUL":"ATTACK BLOCKED"}),c.jsx("p",{className:"text-gray-300 text-sm mt-1",children:r?"The target system has been compromised":"The attack was successfully prevented by active defenses"})]})]}),c.jsx("div",{className:"bg-slate-900 rounded-lg p-4 mb-4",children:c.jsx("p",{className:"text-white text-lg",children:t.message})}),t.details&&c.jsxs("div",{className:"bg-slate-900 rounded-lg p-4 mb-4",children:[c.jsx("h3",{className:"text-sm font-semibold text-gray-400 mb-2",children:"Attack Details:"}),c.jsx("div",{className:"bg-slate-800 rounded p-3",children:c.jsx("code",{className:"text-cyber-yellow text-sm font-mono break-all",children:t.details})})]}),r&&t.damage>0&&c.jsx("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-4 mb-4",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"text-3xl",children:""}),c.jsxs("div",{children:[c.jsx("p",{className:"text-red-400 font-semibold",children:"System Damage"}),c.jsxs("p",{className:"text-2xl font-bold text-red-400",children:[t.damage," points"]}),c.jsx("p",{className:"text-gray-400 text-xs mt-1",children:t.damage<20?"Minor breach":t.damage<35?"Moderate breach":"Critical breach"})]})]})}),!r&&t.defenses&&t.defenses.length>0&&c.jsxs("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-4 mb-4",children:[c.jsxs("h3",{className:"text-green-400 font-semibold mb-3 flex items-center gap-2",children:[c.jsx("span",{children:""}),c.jsx("span",{children:"Active Defenses That Blocked This Attack:"})]}),c.jsx("div",{className:"flex flex-wrap gap-2",children:t.defenses.map((f,v)=>c.jsx("span",{className:"px-3 py-2 bg-green-500/20 text-green-400 rounded-lg font-semibold text-sm",children:f.charAt(0).toUpperCase()+f.slice(1)},v))}),c.jsx("p",{className:"text-gray-400 text-xs mt-3",children:"These defenses successfully prevented the attack from compromising the system."})]}),r&&c.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4 mb-4",children:[c.jsxs("h3",{className:"text-yellow-400 font-semibold mb-2 flex items-center gap-2",children:[c.jsx("span",{children:""}),c.jsx("span",{children:"Security Recommendation"})]}),c.jsx("p",{className:"text-gray-300 text-sm",children:(s=t.attackType)!=null&&s.includes("SQL")||(i=t.attackType)!=null&&i.includes("sql")?"Enable Web Application Firewall (WAF) to prevent SQL injection attacks.":(o=t.attackType)!=null&&o.includes("XSS")||(l=t.attackType)!=null&&l.includes("xss")?"Enable WAF and input sanitization to prevent XSS attacks.":(a=t.attackType)!=null&&a.includes("Brute")||(u=t.attackType)!=null&&u.includes("brute")?"Enable Rate Limiting and strong authentication to prevent brute force attacks.":(h=t.attackType)!=null&&h.includes("DDoS")||(d=t.attackType)!=null&&d.includes("ddos")?"Enable Firewall and Rate Limiting to mitigate DDoS attacks.":"Enable additional security defenses to protect against this type of attack."})]}),c.jsx("button",{onClick:n,className:`w-full py-3 px-6 rounded-lg font-semibold transition-all ${r?"bg-red-500 hover:bg-red-600 text-white":"bg-green-500 hover:bg-green-600 text-white"}`,children:"Close"})]})]})})}function Z1(){const t=Al(),[e,n]=b.useState(null),[r,s]=b.useState([]),[i,o]=b.useState(!1),[l,a]=b.useState(null),[u,h]=b.useState(null),[d,f]=b.useState([]),[v,y]=b.useState(!1),[_,S]=b.useState(null);b.useEffect(()=>{if(!yt())return;const N=setInterval(async()=>{const M=await Qd();a(M)},2e3);return m(),()=>clearInterval(N)},[]),b.useEffect(()=>{m()},[r]);const m=()=>{const w=Yd();h(w),p()},p=()=>{if(Bs("attacker-1")||ru(r).completed&&(Gn("attacker-1"),t("/challenges?completed=attacker-1")),!Bs("expert-1")){const w=(l==null?void 0:l.defenses)||{};su(w,r).completed&&(Gn("expert-1"),t("/challenges?completed=expert-1"))}},g=[{id:"sql-injection",name:"SQL Injection",description:"Inject malicious SQL queries to access database",icon:"",difficulty:"Medium",baseSuccess:60,category:"Injection"},{id:"xss",name:"Cross-Site Scripting (XSS)",description:"Inject malicious scripts into web pages",icon:"",difficulty:"Easy",baseSuccess:65,category:"Injection"},{id:"brute-force",name:"Brute Force",description:"Crack passwords through repeated login attempts",icon:"",difficulty:"Hard",baseSuccess:50,category:"Authentication"},{id:"ddos",name:"DDoS Attack",description:"Overwhelm server with excessive traffic",icon:"",difficulty:"Medium",baseSuccess:55,category:"DoS"},{id:"api-exploit",name:"API Exploitation",description:"Exploit vulnerable API endpoints",icon:"",difficulty:"Easy",baseSuccess:70,category:"Exploitation"},{id:"csrf",name:"CSRF Attack",description:"Cross-Site Request Forgery attack",icon:"",difficulty:"Medium",baseSuccess:60,category:"Session"},{id:"phishing",name:"Phishing",description:"Social engineering to harvest credentials",icon:"",difficulty:"Easy",baseSuccess:45,category:"Social"},{id:"malware",name:"Malware Deployment",description:"Deploy trojan or ransomware",icon:"",difficulty:"Hard",baseSuccess:40,category:"Malware"},{id:"session-hijack",name:"Session Hijacking",description:"Steal and use active user sessions",icon:"",difficulty:"Medium",baseSuccess:50,category:"Session"},{id:"zero-day",name:"Zero-Day Exploit",description:"Exploit unknown vulnerabilities",icon:"",difficulty:"Hard",baseSuccess:30,category:"Advanced"}],x=async w=>{o(!0),n(w);try{const M={...await G1(w.id),attackType:w.name,attackIcon:w.icon,timestamp:new Date().toLocaleTimeString(),date:new Date().toLocaleDateString()};s(O=>[M,...O].slice(0,100)),f(O=>[M,...O].slice(0,100)),S(M),y(!0)}catch{const M={success:!1,message:"Attack failed to execute",attackType:w.name,attackIcon:w.icon,timestamp:new Date().toLocaleTimeString(),date:new Date().toLocaleDateString()};s(O=>[M,...O]),S(M),y(!0)}finally{o(!1),n(null),m()}},I=(()=>{if(!l||!l.defenses)return null;const w=Object.entries(l.defenses).filter(([N,M])=>M).map(([N])=>N);return{activeCount:w.length,defenses:w}})();return c.jsx(Gl,{children:c.jsxs(c.Fragment,{children:[v&&_&&c.jsx(J1,{result:_,attackType:_.attackType,onClose:()=>{y(!1),S(null)}}),c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:" Attacker Dashboard"}),c.jsx("p",{className:"text-gray-400",children:"Test security defenses by launching various attack vectors"}),c.jsx("div",{className:"mt-4 bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4",children:c.jsxs("p",{className:"text-yellow-400 text-sm",children:[" ",c.jsx("strong",{children:"Educational Purpose Only:"})," This platform is designed for learning cybersecurity. Only use these techniques on systems you own or have explicit permission to test."]})})]}),I&&c.jsx("div",{className:"bg-slate-800 rounded-lg p-4 border border-slate-700 mb-6",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-white mb-1",children:" Target Status"}),c.jsxs("p",{className:"text-gray-400 text-sm",children:[I.activeCount," active defense",I.activeCount!==1?"s":""," detected"]}),I.defenses.length>0&&c.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:I.defenses.map((w,N)=>c.jsx("span",{className:"text-xs px-2 py-1 bg-cyber-green/20 text-cyber-green rounded",children:w},N))})]}),c.jsx("div",{className:"text-right",children:c.jsx("p",{className:"text-2xl font-bold text-cyber-red",children:I.activeCount===0?" VULNERABLE":I.activeCount<3?" PROTECTED":" SECURED"})})]})}),u&&u.total>0&&c.jsxs("div",{className:"grid md:grid-cols-4 gap-4 mb-8",children:[c.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 border border-slate-700",children:[c.jsx("p",{className:"text-sm text-gray-400",children:"Total Attacks"}),c.jsx("p",{className:"text-2xl font-bold text-white",children:u.total})]}),c.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 border border-slate-700",children:[c.jsx("p",{className:"text-sm text-gray-400",children:"Success Rate"}),c.jsxs("p",{className:"text-2xl font-bold text-cyber-red",children:[u.successRate,"%"]})]}),c.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 border border-slate-700",children:[c.jsx("p",{className:"text-sm text-gray-400",children:"Blocked"}),c.jsx("p",{className:"text-2xl font-bold text-cyber-green",children:u.blocked})]}),c.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 border border-slate-700",children:[c.jsx("p",{className:"text-sm text-gray-400",children:"Successful"}),c.jsx("p",{className:"text-2xl font-bold text-cyber-red",children:u.successful})]})]}),c.jsxs("div",{className:"mb-8",children:[c.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Attack Vectors"}),c.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:g.map(w=>{const N={Injection:"bg-purple-500/20 text-purple-400",Authentication:"bg-red-500/20 text-red-400",DoS:"bg-orange-500/20 text-orange-400",Exploitation:"bg-blue-500/20 text-blue-400",Session:"bg-yellow-500/20 text-yellow-400",Social:"bg-pink-500/20 text-pink-400",Malware:"bg-green-500/20 text-green-400",Advanced:"bg-cyan-500/20 text-cyan-400"};return c.jsxs("div",{className:"bg-slate-800 rounded-lg p-6 border border-slate-700 hover:border-cyber-red transition-all",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("span",{className:"text-3xl",children:w.icon}),c.jsxs("div",{className:"flex flex-col items-end gap-1",children:[c.jsx("span",{className:`text-xs px-2 py-1 rounded ${w.difficulty==="Easy"?"bg-green-500/20 text-green-400":w.difficulty==="Medium"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:w.difficulty}),c.jsx("span",{className:`text-xs px-2 py-1 rounded ${N[w.category]||"bg-gray-500/20 text-gray-400"}`,children:w.category})]})]}),c.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:w.name}),c.jsx("p",{className:"text-gray-400 text-sm mb-4",children:w.description}),c.jsxs("div",{className:"mb-4",children:[c.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[c.jsx("span",{children:"Base Success Rate"}),c.jsxs("span",{children:[w.baseSuccess,"%"]})]}),c.jsx("div",{className:"w-full bg-slate-700 rounded-full h-2",children:c.jsx("div",{className:"bg-cyber-red h-2 rounded-full",style:{width:`${w.baseSuccess}%`}})}),I&&I.activeCount>0&&c.jsx("p",{className:"text-xs text-yellow-400 mt-1",children:" Reduced by active defenses"})]}),c.jsx("button",{onClick:()=>x(w),disabled:i,className:`w-full py-2 px-4 rounded-lg font-semibold transition-all ${i&&(e==null?void 0:e.id)===w.id?"bg-gray-600 cursor-not-allowed":"bg-cyber-red hover:bg-red-600 text-white"}`,children:i&&(e==null?void 0:e.id)===w.id?c.jsxs("span",{className:"flex items-center justify-center gap-2",children:[c.jsx("span",{className:"animate-spin",children:""})," Attacking..."]}):"Launch Attack"})]},w.id)})})]}),r.length>0&&c.jsxs("div",{className:"bg-slate-800 rounded-lg p-6 border border-slate-700",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h2",{className:"text-2xl font-bold text-white",children:" Attack Results"}),c.jsxs("span",{className:"text-sm text-gray-400",children:[r.length," attacks launched"]})]}),c.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:r.map((w,N)=>c.jsxs("div",{className:`bg-slate-900 rounded-lg p-4 border-l-4 ${w.success?"border-cyber-red":"border-cyber-green"}`,children:[c.jsxs("div",{className:"flex justify-between items-start mb-2",children:[c.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[c.jsx("span",{className:"text-2xl",children:w.attackIcon||""}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-white font-semibold",children:w.attackType}),c.jsx("p",{className:"text-gray-400 text-sm mt-1",children:w.message}),w.details&&c.jsx("div",{className:"mt-2 p-2 bg-slate-800 rounded text-xs text-gray-500 font-mono",children:w.details}),w.damage>0&&c.jsxs("p",{className:"text-red-400 text-xs mt-2",children:[" Damage: ",w.damage," points"]})]})]}),c.jsxs("div",{className:"flex flex-col items-end gap-2",children:[c.jsx("span",{className:`px-3 py-1 rounded text-sm font-semibold ${w.success?"bg-cyber-red/20 text-cyber-red":"bg-cyber-green/20 text-cyber-green"}`,children:w.success?" SUCCESS":" BLOCKED"}),c.jsxs("div",{className:"text-right",children:[c.jsx("p",{className:"text-gray-500 text-xs",children:w.date}),c.jsx("p",{className:"text-gray-500 text-xs",children:w.timestamp})]})]})]}),w.defenses&&w.defenses.length>0&&c.jsxs("div",{className:"mt-3 pt-3 border-t border-slate-700",children:[c.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Defenses that blocked this attack:"}),c.jsx("div",{className:"flex flex-wrap gap-2",children:w.defenses.map((M,O)=>c.jsxs("span",{className:"text-xs px-2 py-1 bg-cyber-green/20 text-cyber-green rounded",children:[" ",M]},O))})]})]},N))})]}),u&&u.byType&&Object.keys(u.byType).length>0&&c.jsxs("div",{className:"mt-8 bg-slate-800 rounded-lg p-6 border border-slate-700",children:[c.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:" Attack Performance by Type"}),c.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:Object.entries(u.byType).map(([w,N])=>c.jsxs("div",{className:"bg-slate-900 rounded-lg p-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:w}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsx("span",{className:"text-gray-400",children:"Total:"}),c.jsx("span",{className:"text-white font-semibold",children:N.total})]}),c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsx("span",{className:"text-gray-400",children:"Successful:"}),c.jsx("span",{className:"text-cyber-red font-semibold",children:N.successful})]}),c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsx("span",{className:"text-gray-400",children:"Blocked:"}),c.jsx("span",{className:"text-cyber-green font-semibold",children:N.blocked})]}),c.jsx("div",{className:"w-full bg-slate-700 rounded-full h-2 mt-2",children:c.jsx("div",{className:"bg-cyber-red h-2 rounded-full",style:{width:`${N.successful/N.total*100}%`}})})]})]},w))})]})]})]})})}function eI(){const[t,e]=b.useState(null),n=yt(),r=[{title:"Firewall Basics",description:"Learn how firewalls protect networks by filtering traffic",content:"A firewall is a network security device that monitors and filters incoming and outgoing network traffic based on an organization's previously established security policies. It acts as a barrier between a trusted internal network and untrusted external networks.",icon:""},{title:"Authentication & Authorization",description:"Understanding user verification and access control",content:"Authentication verifies who a user is, while authorization determines what they can access. Common methods include passwords, multi-factor authentication (MFA), biometrics, and OAuth tokens.",icon:""},{title:"Encryption",description:"Protecting data through encryption",content:"Encryption converts readable data (plaintext) into an encoded version (ciphertext) that can only be decoded with the correct key. Types include symmetric (AES) and asymmetric (RSA) encryption.",icon:""},{title:"SQL Injection",description:"Understanding and preventing SQL injection attacks",content:"SQL Injection occurs when attackers insert malicious SQL code into input fields. Prevention includes using parameterized queries, input validation, and least privilege database access.",icon:""},{title:"Cross-Site Scripting (XSS)",description:"Protecting against XSS vulnerabilities",content:"XSS attacks inject malicious scripts into web pages viewed by users. Prevention methods include input sanitization, Content Security Policy (CSP), and output encoding.",icon:""},{title:"DDoS Attacks",description:"Understanding Distributed Denial of Service attacks",content:"DDoS attacks overwhelm servers with traffic from multiple sources. Mitigation includes rate limiting, traffic filtering, CDN services, and scalable infrastructure.",icon:""},{title:"Rate Limiting",description:"Preventing abuse through request throttling",content:"Rate limiting restricts the number of requests a user can make within a time period. This prevents brute force attacks, API abuse, and helps maintain service availability.",icon:""},{title:"Web Application Firewall (WAF)",description:"Protecting web applications from common attacks",content:"A WAF filters, monitors, and blocks HTTP traffic to and from a web application. It protects against SQL injection, XSS, CSRF, and other OWASP Top 10 vulnerabilities.",icon:""},{title:"Security Monitoring",description:"Real-time threat detection and response",content:"Security monitoring involves continuous observation of systems to detect suspicious activities, security breaches, and potential threats. It includes log analysis, intrusion detection, and automated alerts.",icon:""}];return c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:" Cybersecurity Education"}),c.jsx("p",{className:"text-gray-400",children:"Learn about cybersecurity concepts, threats, and defenses"})]}),n&&c.jsx("div",{className:"mb-8 bg-gradient-to-r from-cyber-blue/20 to-cyber-yellow/20 rounded-lg p-6 border border-cyber-blue/30",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:" Test Your Knowledge"}),c.jsx("p",{className:"text-gray-300",children:"Take interactive quizzes to test your cybersecurity knowledge"})]}),c.jsx(ce,{to:"/quiz",className:"bg-cyber-blue hover:bg-blue-600 text-white font-semibold py-3 px-6 rounded-lg transition",children:"Start Quiz "})]})}),c.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map((s,i)=>c.jsxs("div",{className:"bg-slate-800 rounded-lg p-6 border border-slate-700 hover:border-cyber-blue transition-all cursor-pointer",onClick:()=>e(t===i?null:i),children:[c.jsx("div",{className:"text-4xl mb-4",children:s.icon}),c.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:s.title}),c.jsx("p",{className:"text-gray-400 text-sm mb-4",children:s.description}),t===i?c.jsxs("div",{children:[c.jsx("p",{className:"text-gray-300 text-sm leading-relaxed mb-4",children:s.content}),c.jsx("p",{className:"text-cyber-blue text-xs",children:"Click to collapse"})]}):c.jsx("p",{className:"text-gray-300 text-sm leading-relaxed line-clamp-3",children:s.content})]},i))}),c.jsxs("div",{className:"mt-12 bg-slate-800 rounded-lg p-6 border border-slate-700",children:[c.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:" Additional Resources"}),c.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"bg-slate-900 rounded-lg p-4 border border-slate-700",children:[c.jsx("h3",{className:"text-lg font-semibold text-cyber-blue mb-2",children:"OWASP Top 10"}),c.jsx("p",{className:"text-gray-400 text-sm mb-3",children:"The most critical web application security risks"}),c.jsxs("ul",{className:"text-xs text-gray-500 space-y-1",children:[c.jsx("li",{children:" Injection attacks"}),c.jsx("li",{children:" Broken authentication"}),c.jsx("li",{children:" Sensitive data exposure"}),c.jsx("li",{children:" XML external entities"}),c.jsx("li",{children:" Broken access control"})]})]}),c.jsxs("div",{className:"bg-slate-900 rounded-lg p-4 border border-slate-700",children:[c.jsx("h3",{className:"text-lg font-semibold text-cyber-green mb-2",children:"Security Frameworks"}),c.jsx("p",{className:"text-gray-400 text-sm mb-3",children:"Industry-standard security frameworks"}),c.jsxs("ul",{className:"text-xs text-gray-500 space-y-1",children:[c.jsx("li",{children:" NIST Cybersecurity Framework"}),c.jsx("li",{children:" ISO 27001"}),c.jsx("li",{children:" CIS Controls"}),c.jsx("li",{children:" PCI DSS"}),c.jsx("li",{children:" GDPR compliance"})]})]}),c.jsxs("div",{className:"bg-slate-900 rounded-lg p-4 border border-slate-700",children:[c.jsx("h3",{className:"text-lg font-semibold text-cyber-yellow mb-2",children:"Common Vulnerabilities"}),c.jsx("p",{className:"text-gray-400 text-sm mb-3",children:"Most exploited security weaknesses"}),c.jsxs("ul",{className:"text-xs text-gray-500 space-y-1",children:[c.jsx("li",{children:" SQL Injection"}),c.jsx("li",{children:" Cross-Site Scripting (XSS)"}),c.jsx("li",{children:" CSRF attacks"}),c.jsx("li",{children:" Session hijacking"}),c.jsx("li",{children:" Man-in-the-middle"})]})]})]})]}),c.jsxs("div",{className:"mt-8 bg-gradient-to-r from-cyber-blue/20 to-cyber-green/20 rounded-lg p-8 border border-cyber-blue/30",children:[c.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Best Practices"}),c.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-semibold text-cyber-green mb-3",children:" Do's"}),c.jsxs("ul",{className:"space-y-2 text-gray-300",children:[c.jsx("li",{children:" Use strong, unique passwords"}),c.jsx("li",{children:" Enable multi-factor authentication"}),c.jsx("li",{children:" Keep software updated"}),c.jsx("li",{children:" Encrypt sensitive data"}),c.jsx("li",{children:" Implement least privilege access"}),c.jsx("li",{children:" Regular security audits"}),c.jsx("li",{children:" Monitor and log activities"}),c.jsx("li",{children:" Use HTTPS for all connections"})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-semibold text-cyber-red mb-3",children:" Don'ts"}),c.jsxs("ul",{className:"space-y-2 text-gray-300",children:[c.jsx("li",{children:" Don't ignore security updates"}),c.jsx("li",{children:" Don't use default credentials"}),c.jsx("li",{children:" Don't store passwords in plaintext"}),c.jsx("li",{children:" Don't trust user input"}),c.jsx("li",{children:" Don't expose sensitive APIs"}),c.jsx("li",{children:" Don't skip security testing"}),c.jsx("li",{children:" Don't share credentials"}),c.jsx("li",{children:" Don't disable security features"})]})]})]})]}),c.jsxs("div",{className:"mt-8 bg-slate-800 rounded-lg p-6 border border-slate-700",children:[c.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:" Quick Security Tips"}),c.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-cyber-green mb-3",children:"Password Security"}),c.jsxs("ul",{className:"space-y-2 text-gray-300 text-sm",children:[c.jsx("li",{children:" Use at least 12 characters with mixed case, numbers, and symbols"}),c.jsx("li",{children:" Never reuse passwords across different accounts"}),c.jsx("li",{children:" Use a password manager to generate and store strong passwords"}),c.jsx("li",{children:" Enable two-factor authentication whenever possible"})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-cyber-blue mb-3",children:"Network Security"}),c.jsxs("ul",{className:"space-y-2 text-gray-300 text-sm",children:[c.jsx("li",{children:" Always use HTTPS for sensitive transactions"}),c.jsx("li",{children:" Avoid public Wi-Fi for important activities"}),c.jsx("li",{children:" Use a VPN when connecting to untrusted networks"}),c.jsx("li",{children:" Keep your router firmware updated"})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-cyber-yellow mb-3",children:"Email Security"}),c.jsxs("ul",{className:"space-y-2 text-gray-300 text-sm",children:[c.jsx("li",{children:" Be cautious of suspicious links and attachments"}),c.jsx("li",{children:" Verify sender identity before clicking links"}),c.jsx("li",{children:" Don't share sensitive information via email"}),c.jsx("li",{children:" Use email encryption for sensitive communications"})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-cyber-red mb-3",children:"Software Updates"}),c.jsxs("ul",{className:"space-y-2 text-gray-300 text-sm",children:[c.jsx("li",{children:" Keep operating systems and software updated"}),c.jsx("li",{children:" Enable automatic security updates when available"}),c.jsx("li",{children:" Remove unused software and applications"}),c.jsx("li",{children:" Regularly check for security patches"})]})]})]})]})]})}function tI(){const t=[{title:"Security Assessment",description:"Comprehensive evaluation of your security posture",features:["Vulnerability scanning","Penetration testing","Risk analysis","Compliance audit"],icon:""},{title:"Security Implementation",description:"Deploy and configure security solutions",features:["Firewall setup","WAF configuration","Encryption implementation","Access control"],icon:""},{title:"Security Training",description:"Educate your team on cybersecurity best practices",features:["Security awareness","Incident response","Secure coding","Threat intelligence"],icon:""},{title:"24/7 Monitoring",description:"Continuous security monitoring and threat detection",features:["Real-time alerts","Log analysis","Incident response","Threat hunting"],icon:""},{title:"Incident Response",description:"Rapid response to security incidents",features:["Forensic analysis","Containment","Recovery","Post-incident review"],icon:""},{title:"Compliance Consulting",description:"Achieve and maintain regulatory compliance",features:["GDPR compliance","ISO 27001","SOC 2","HIPAA"],icon:""}];return c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c.jsxs("div",{className:"mb-8 text-center",children:[c.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Security Services"}),c.jsx("p",{className:"text-gray-400 text-lg",children:"Comprehensive cybersecurity solutions for your organization"})]}),c.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12",children:t.map((e,n)=>c.jsxs("div",{className:"bg-slate-800 rounded-lg p-6 border border-slate-700 hover:border-cyber-blue transition-all",children:[c.jsx("div",{className:"text-4xl mb-4",children:e.icon}),c.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:e.title}),c.jsx("p",{className:"text-gray-400 text-sm mb-4",children:e.description}),c.jsx("ul",{className:"space-y-2",children:e.features.map((r,s)=>c.jsxs("li",{className:"text-gray-300 text-sm flex items-center",children:[c.jsx("span",{className:"text-cyber-green mr-2",children:""}),r]},s))})]},n))}),c.jsxs("div",{className:"bg-gradient-to-r from-cyber-blue/20 to-cyber-green/20 rounded-lg p-8 border border-cyber-blue/30",children:[c.jsx("h2",{className:"text-3xl font-bold text-white mb-4 text-center",children:"Why Choose Our Services?"}),c.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mt-6",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-4xl mb-4",children:""}),c.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Expert Team"}),c.jsx("p",{className:"text-gray-300",children:"Certified cybersecurity professionals with years of experience"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-4xl mb-4",children:""}),c.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Rapid Response"}),c.jsx("p",{className:"text-gray-300",children:"Quick detection and response to security threats"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-4xl mb-4",children:""}),c.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Proven Results"}),c.jsx("p",{className:"text-gray-300",children:"Track record of successful security implementations"})]})]})]})]})}function Ip({challenge:t,onClose:e}){return t?c.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-fade-in",children:c.jsxs("div",{className:"bg-slate-800 rounded-lg border-2 border-cyber-yellow max-w-md w-full animate-slide-up",children:[c.jsx("div",{className:"bg-gradient-to-r from-yellow-500/20 to-cyber-yellow/20 p-6 border-b border-cyber-yellow/30",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-6xl mb-4 animate-bounce",children:""}),c.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Challenge Completed!"}),c.jsx("p",{className:"text-cyber-yellow text-lg font-semibold",children:t.title})]})}),c.jsxs("div",{className:"p-6",children:[c.jsx("div",{className:"bg-cyber-yellow/10 border border-cyber-yellow/30 rounded-lg p-4 mb-4",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"text-4xl",children:t.rewardIcon||""}),c.jsxs("div",{children:[c.jsx("p",{className:"text-cyber-yellow font-semibold",children:"Reward Unlocked!"}),c.jsx("p",{className:"text-white text-lg font-bold",children:t.rewards})]})]})}),c.jsx("p",{className:"text-gray-300 text-center mb-6",children:"Congratulations! You've successfully completed this challenge and earned your reward."}),c.jsx("button",{onClick:e,className:"w-full bg-cyber-yellow hover:bg-yellow-600 text-white font-semibold py-3 px-6 rounded-lg transition",children:"Awesome!"})]})]})}):null}function nI(){const[t,e]=b.useState(null),[n,r]=b.useState([]),[s,i]=b.useState({}),[o,l]=b.useState(!1),[a,u]=b.useState(null),h=es();b.useEffect(()=>{const y=ql();r(y);const S=new URLSearchParams(h.search).get("completed");if(S){const m=d.find(p=>p.id===S);m&&!y.includes(S)&&(u(m),l(!0),Gn(S),r([...y,S]))}},[h]),b.useEffect(()=>{const y=async()=>{const S=await Qd(),m=await Yd(),p=(S==null?void 0:S.defenses)||{},g=Object.values(p).filter(Boolean).length,x=Object.keys(p).length;let C=g/x*100;p.firewall&&p.waf&&(C+=5),p.authentication&&p.encryption&&(C+=5),p.rateLimit&&p.monitoring&&(C+=5),C=Math.min(100,Math.round(C));const I={"beginner-1":eu(p),"intermediate-1":tu(p,m,C),"advanced-1":nu(m),"attacker-1":ru([]),"expert-1":su(p,[])};i(I),d.forEach(w=>{const N=I[w.id];N!=null&&N.completed&&!n.includes(w.id)&&(Gn(w.id),r(M=>[...M,w.id]),u(w),l(!0))})};y();const _=setInterval(y,2e3);return()=>clearInterval(_)},[n]);const d=[{id:"beginner-1",title:"Basic Defense Setup",difficulty:"Beginner",description:"Enable at least 3 basic defenses to protect against common attacks",objectives:["Enable Firewall","Enable Authentication","Enable WAF"],rewards:"Basic Defender Badge",rewardIcon:"",icon:"",checkFunction:eu},{id:"intermediate-1",title:"Complete Protection",difficulty:"Intermediate",description:"Enable all 6 defenses and maintain 100% security score",objectives:["Enable all defenses","Block 5 attacks successfully","Maintain 100% security score"],rewards:"Master Defender Badge",rewardIcon:"",icon:"",checkFunction:tu},{id:"advanced-1",title:"Attack Simulation",difficulty:"Advanced",description:"Successfully block 10 different attack types",objectives:["Block SQL Injection","Block XSS attacks","Block DDoS attempts","Block Brute Force","Block all 10 attack types"],rewards:"Elite Defender Badge",rewardIcon:"",icon:"",checkFunction:nu},{id:"attacker-1",title:"Penetration Test",difficulty:"Intermediate",description:"Successfully breach a system with 3 active defenses",objectives:["Launch 5 different attack types","Successfully breach at least 2","Analyze which defenses blocked you"],rewards:"Security Analyst Badge",rewardIcon:"",icon:"",checkFunction:ru},{id:"expert-1",title:"Zero-Day Challenge",difficulty:"Expert",description:"Exploit a fully defended system using zero-day attack",objectives:["Target system with all 6 defenses active","Use zero-day exploit","Successfully breach the system"],rewards:"Elite Hacker Badge",rewardIcon:"",icon:"",checkFunction:su}],f=y=>({Beginner:"bg-green-500/20 text-green-400",Intermediate:"bg-yellow-500/20 text-yellow-400",Advanced:"bg-orange-500/20 text-orange-400",Expert:"bg-red-500/20 text-red-400"})[y]||"bg-gray-500/20 text-gray-400",v=Y1();return c.jsx(Gl,{children:c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:" Challenges & Scenarios"}),c.jsx("p",{className:"text-gray-400",children:"Test your skills with guided cybersecurity challenges"})]}),v.length>0&&c.jsxs("div",{className:"bg-slate-800 rounded-lg p-6 border border-slate-700 mb-8",children:[c.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:" Your Badges"}),c.jsx("div",{className:"grid md:grid-cols-5 gap-4",children:v.map((y,_)=>c.jsxs("div",{className:"bg-slate-900 rounded-lg p-4 border border-cyber-yellow/30 text-center",children:[c.jsx("div",{className:"text-4xl mb-2",children:y.icon}),c.jsx("p",{className:"text-white font-semibold text-sm",children:y.name}),c.jsx("p",{className:"text-gray-400 text-xs mt-1",children:y.description})]},_))})]}),c.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(y=>{const _=n.includes(y.id),S=s[y.id]||{progress:0,objectives:[]};return c.jsxs("div",{className:`bg-slate-800 rounded-lg p-6 border-2 transition-all cursor-pointer ${_?"border-cyber-yellow bg-cyber-yellow/10":"border-slate-700 hover:border-cyber-blue"}`,onClick:()=>e(y),children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("span",{className:"text-4xl",children:y.icon}),c.jsxs("div",{className:"flex flex-col items-end gap-2",children:[_&&c.jsx("span",{className:"text-xs px-2 py-1 rounded bg-cyber-yellow/20 text-cyber-yellow",children:" Completed"}),c.jsx("span",{className:`text-xs px-2 py-1 rounded ${f(y.difficulty)}`,children:y.difficulty})]})]}),c.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:y.title}),c.jsx("p",{className:"text-gray-400 text-sm mb-4",children:y.description}),!_&&S.progress>0&&c.jsxs("div",{className:"mb-4",children:[c.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[c.jsx("span",{children:"Progress"}),c.jsxs("span",{children:[S.progress,"%"]})]}),c.jsx("div",{className:"w-full bg-slate-700 rounded-full h-2",children:c.jsx("div",{className:"bg-cyber-blue h-2 rounded-full transition-all",style:{width:`${S.progress}%`}})})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Objectives:"}),c.jsxs("ul",{className:"space-y-1",children:[y.objectives.slice(0,2).map((m,p)=>{var C;const g=(C=S.objectives)==null?void 0:C.find(I=>I.text===m),x=(g==null?void 0:g.completed)||!1;return c.jsxs("li",{className:"text-xs flex items-center gap-2",children:[c.jsx("span",{className:x?"text-cyber-green":"text-gray-400",children:x?"":""}),c.jsx("span",{className:x?"text-cyber-green line-through":"text-gray-400",children:m})]},p)}),y.objectives.length>2&&c.jsxs("li",{className:"text-xs text-gray-500",children:["+",y.objectives.length-2," more..."]})]})]}),c.jsx("div",{className:"pt-4 border-t border-slate-700",children:c.jsxs("p",{className:"text-xs text-cyber-yellow",children:[" Reward: ",y.rewards]})})]},y.id)})}),t&&c.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-slate-800 rounded-lg p-6 border border-slate-700 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:t.title}),c.jsx("span",{className:`text-xs px-2 py-1 rounded ${f(t.difficulty)}`,children:t.difficulty})]}),c.jsx("button",{onClick:()=>e(null),className:"text-gray-400 hover:text-white",children:""})]}),c.jsx("p",{className:"text-gray-300 mb-6",children:t.description}),c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Objectives:"}),c.jsx("ul",{className:"space-y-2",children:(()=>{const y=s[t.id]||{objectives:[]};return t.objectives.map((_,S)=>{var g;const m=(g=y.objectives)==null?void 0:g.find(x=>x.text===_),p=(m==null?void 0:m.completed)||!1;return c.jsxs("li",{className:"flex items-start gap-3",children:[c.jsx("span",{className:p?"text-cyber-green text-xl":"text-cyber-blue mt-1",children:p?"":""}),c.jsx("span",{className:`text-gray-300 ${p?"line-through":""}`,children:_})]},S)})})()})]}),(()=>{const y=s[t.id]||{progress:0};return c.jsxs("div",{className:"mb-6",children:[c.jsxs("div",{className:"flex justify-between text-sm text-gray-400 mb-2",children:[c.jsx("span",{children:"Overall Progress"}),c.jsxs("span",{children:[y.progress,"%"]})]}),c.jsx("div",{className:"w-full bg-slate-700 rounded-full h-3",children:c.jsx("div",{className:"bg-cyber-blue h-3 rounded-full transition-all",style:{width:`${y.progress}%`}})})]})})(),c.jsx("div",{className:"bg-cyber-yellow/10 border border-cyber-yellow/30 rounded-lg p-4 mb-6",children:c.jsxs("p",{className:"text-cyber-yellow font-semibold",children:[" Reward: ",t.rewards]})}),c.jsxs("div",{className:"flex gap-4",children:[c.jsx(ce,{to:t.id.includes("attacker")?"/attacker":"/defender",className:"flex-1 bg-cyber-blue hover:bg-blue-600 text-white font-semibold py-3 px-6 rounded-lg text-center transition",children:"Start Challenge"}),c.jsx("button",{onClick:()=>e(null),className:"px-6 py-3 border border-slate-600 text-gray-300 rounded-lg hover:bg-slate-700 transition",children:"Close"})]})]})}),o&&a&&c.jsx(Ip,{challenge:a,onClose:()=>{l(!1),u(null)}}),c.jsxs("div",{className:"mt-12 bg-gradient-to-r from-cyber-blue/20 to-cyber-green/20 rounded-lg p-8 border border-cyber-blue/30",children:[c.jsx("h2",{className:"text-3xl font-bold text-white mb-4 text-center",children:"How Challenges Work"}),c.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mt-6",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-4xl mb-4",children:"1"}),c.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Select Challenge"}),c.jsx("p",{className:"text-gray-300",children:"Choose a challenge that matches your skill level"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-4xl mb-4",children:"2"}),c.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Complete Objectives"}),c.jsx("p",{className:"text-gray-300",children:"Follow the objectives to complete the challenge"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-4xl mb-4",children:"3"}),c.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Earn Rewards"}),c.jsx("p",{className:"text-gray-300",children:"Unlock badges and improve your security skills"})]})]})]})]}),t&&c.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-slate-800 rounded-lg p-6 border border-slate-700 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:t.title}),c.jsx("span",{className:`text-xs px-2 py-1 rounded ${f(t.difficulty)}`,children:t.difficulty})]}),c.jsx("button",{onClick:()=>e(null),className:"text-gray-400 hover:text-white",children:""})]}),c.jsx("p",{className:"text-gray-300 mb-6",children:t.description}),c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Objectives:"}),c.jsx("ul",{className:"space-y-2",children:(()=>{const y=s[t.id]||{objectives:[]};return t.objectives.map((_,S)=>{var g;const m=(g=y.objectives)==null?void 0:g.find(x=>x.text===_),p=(m==null?void 0:m.completed)||!1;return c.jsxs("li",{className:"flex items-start gap-3",children:[c.jsx("span",{className:p?"text-cyber-green text-xl":"text-cyber-blue mt-1",children:p?"":""}),c.jsx("span",{className:`text-gray-300 ${p?"line-through":""}`,children:_})]},S)})})()})]}),(()=>{const y=s[t.id]||{progress:0};return c.jsxs("div",{className:"mb-6",children:[c.jsxs("div",{className:"flex justify-between text-sm text-gray-400 mb-2",children:[c.jsx("span",{children:"Overall Progress"}),c.jsxs("span",{children:[y.progress,"%"]})]}),c.jsx("div",{className:"w-full bg-slate-700 rounded-full h-3",children:c.jsx("div",{className:"bg-cyber-blue h-3 rounded-full transition-all",style:{width:`${y.progress}%`}})})]})})(),c.jsx("div",{className:"bg-cyber-yellow/10 border border-cyber-yellow/30 rounded-lg p-4 mb-6",children:c.jsxs("p",{className:"text-cyber-yellow font-semibold",children:[" Reward: ",t.rewards]})}),c.jsxs("div",{className:"flex gap-4",children:[c.jsx(ce,{to:t.id.includes("attacker")?"/attacker":"/defender",className:"flex-1 bg-cyber-blue hover:bg-blue-600 text-white font-semibold py-3 px-6 rounded-lg text-center transition",children:"Start Challenge"}),c.jsx("button",{onClick:()=>e(null),className:"px-6 py-3 border border-slate-600 text-gray-300 rounded-lg hover:bg-slate-700 transition",children:"Close"})]})]})}),o&&a&&c.jsx(Ip,{challenge:a,onClose:()=>{l(!1),u(null)}})]})})}function rI({isOpen:t,message:e,type:n="info",onClose:r}){if(!t)return null;const s={success:{icon:"",bg:"bg-gradient-to-r from-green-500/20 to-green-600/10",border:"border-green-500/50",text:"text-green-400",iconBg:"bg-green-500/20",buttonBg:"bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700",glow:"shadow-green-500/50",iconEmoji:""},error:{icon:"",bg:"bg-gradient-to-r from-red-500/20 to-red-600/10",border:"border-red-500/50",text:"text-red-400",iconBg:"bg-red-500/20",buttonBg:"bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700",glow:"shadow-red-500/50",iconEmoji:""},warning:{icon:"",bg:"bg-gradient-to-r from-yellow-500/20 to-yellow-600/10",border:"border-yellow-500/50",text:"text-yellow-400",iconBg:"bg-yellow-500/20",buttonBg:"bg-gradient-to-r from-yellow-500 to-yellow-600 hover:from-yellow-600 hover:to-yellow-700",glow:"shadow-yellow-500/50",iconEmoji:""},info:{icon:"",bg:"bg-gradient-to-r from-blue-500/20 to-blue-600/10",border:"border-blue-500/50",text:"text-blue-400",iconBg:"bg-blue-500/20",buttonBg:"bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700",glow:"shadow-blue-500/50",iconEmoji:""}},i=s[n]||s.info;return c.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-md z-50 flex items-center justify-center p-4 animate-fade-in",children:c.jsx("div",{className:`bg-gradient-to-br from-slate-800 to-slate-900 rounded-xl border-2 ${i.border} max-w-md w-full animate-slide-up shadow-2xl ${i.glow}`,children:c.jsx("div",{className:`bg-gradient-to-r ${i.bg} p-1 rounded-t-xl`,children:c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[c.jsx("div",{className:`${i.iconBg} p-4 rounded-full animate-bounce`,children:c.jsx("div",{className:"text-5xl",children:i.icon})}),c.jsx("div",{className:"flex-1",children:c.jsx("p",{className:`${i.text} font-semibold text-lg leading-relaxed`,children:e})}),c.jsx("button",{onClick:r,className:"text-gray-400 hover:text-white text-2xl font-bold w-10 h-10 flex items-center justify-center rounded-lg hover:bg-slate-700 transition-all transform hover:rotate-90",children:""})]}),c.jsxs("button",{onClick:r,className:`w-full py-3 px-4 ${i.buttonBg} text-white rounded-lg font-bold transition-all shadow-lg hover:shadow-xl transform hover:scale-105 flex items-center justify-center gap-2`,children:[c.jsx("span",{children:i.iconEmoji}),c.jsx("span",{children:"Got it!"})]})]})})})})}const Tp={basics:{name:"Cybersecurity Basics",icon:"",color:"cyber-blue"},attacks:{name:"Attack Types",icon:"",color:"cyber-red"},defenses:{name:"Defense Mechanisms",icon:"",color:"cyber-green"},advanced:{name:"Advanced Topics",icon:"",color:"cyber-yellow"}},Rp={basics:[{id:1,question:"What is the primary purpose of a firewall?",options:["To encrypt data","To filter and control network traffic","To authenticate users","To store passwords securely"],correct:1,explanation:"A firewall monitors and filters incoming and outgoing network traffic based on security policies, acting as a barrier between trusted and untrusted networks."},{id:2,question:"What does HTTPS stand for?",options:["HyperText Transfer Protocol Secure","HyperText Transfer Protocol Standard","HyperText Transfer Protocol System","HyperText Transfer Protocol Service"],correct:0,explanation:"HTTPS (HyperText Transfer Protocol Secure) uses SSL/TLS encryption to secure data transmission between a web browser and server."},{id:3,question:"What is the difference between authentication and authorization?",options:["Authentication determines access, authorization verifies identity","Authentication verifies identity, authorization determines access","They are the same thing","Authentication is for users, authorization is for systems"],correct:1,explanation:"Authentication verifies who a user is (e.g., login), while authorization determines what resources they can access based on their role."},{id:4,question:"What is encryption?",options:["Storing data in a database","Converting readable data into encoded format","Deleting sensitive information","Backing up data to cloud storage"],correct:1,explanation:"Encryption converts plaintext (readable data) into ciphertext (encoded data) that can only be decoded with the correct key."},{id:5,question:"What is multi-factor authentication (MFA)?",options:["Using multiple passwords","Using two or more verification methods","Logging in from multiple devices","Having multiple user accounts"],correct:1,explanation:"MFA requires two or more verification factors (something you know, something you have, something you are) to enhance security."}],attacks:[{id:6,question:"What is SQL Injection?",options:["A type of encryption method","Injecting malicious SQL code into input fields","A firewall configuration","A type of authentication"],correct:1,explanation:"SQL Injection occurs when attackers insert malicious SQL code into input fields to manipulate databases and access unauthorized data."},{id:7,question:"What does XSS stand for?",options:["Cross-Site Scripting","Cross-Site Security","Cross-Site System","Cross-Site Service"],correct:0,explanation:"XSS (Cross-Site Scripting) attacks inject malicious scripts into web pages viewed by users, potentially stealing cookies or session data."},{id:8,question:"What is a DDoS attack?",options:["Distributed Denial of Service - overwhelming servers with traffic","Data Destruction of Service","Direct Denial of Service","Database Denial of Service"],correct:0,explanation:"DDoS attacks overwhelm servers with traffic from multiple sources, making services unavailable to legitimate users."},{id:9,question:"What is a brute force attack?",options:["Physically breaking into a server room","Trying many password combinations to gain access","Encrypting data forcefully","Deleting files from a system"],correct:1,explanation:"Brute force attacks systematically try many password combinations until finding the correct one to gain unauthorized access."},{id:10,question:"What is phishing?",options:["A type of encryption","Deceptive emails or messages to steal credentials","A firewall technique","A backup method"],correct:1,explanation:"Phishing uses deceptive emails, messages, or websites to trick users into revealing sensitive information like passwords or credit card numbers."}],defenses:[{id:11,question:"What does WAF stand for?",options:["Web Application Firewall","Wide Area Firewall","Wireless Application Firewall","Web Access Firewall"],correct:0,explanation:"WAF (Web Application Firewall) filters, monitors, and blocks HTTP traffic to protect web applications from common attacks."},{id:12,question:"What is rate limiting used for?",options:["To increase network speed","To restrict the number of requests per time period","To encrypt data faster","To authenticate users quicker"],correct:1,explanation:"Rate limiting restricts the number of requests a user can make within a time period, preventing brute force attacks and API abuse."},{id:13,question:"What is the purpose of security monitoring?",options:["To increase system performance","To detect suspicious activities and threats","To store user passwords","To encrypt network traffic"],correct:1,explanation:"Security monitoring continuously observes systems to detect suspicious activities, security breaches, and potential threats in real-time."},{id:14,question:"What is input validation?",options:["Checking if data meets certain criteria before processing","Encrypting user input","Storing user data","Authenticating users"],correct:0,explanation:"Input validation checks and sanitizes user input to ensure it meets expected criteria and prevents malicious data from being processed."},{id:15,question:"What is the principle of least privilege?",options:["Giving users maximum access","Giving users only the minimum access needed","Requiring multiple passwords","Using encryption for everything"],correct:1,explanation:"Least privilege means users should only have the minimum access necessary to perform their tasks, reducing the attack surface."}],advanced:[{id:16,question:"What is a zero-day vulnerability?",options:["A vulnerability that is fixed immediately","A previously unknown vulnerability with no patch available","A vulnerability that only occurs at midnight","A vulnerability in old systems"],correct:1,explanation:"A zero-day vulnerability is a security flaw that is unknown to the vendor and has no patch available, making it highly dangerous."},{id:17,question:"What is CSRF?",options:["Cross-Site Request Forgery - unauthorized actions on behalf of users","Cross-Site Request Function","Cross-Site Request Filter","Cross-Site Request Format"],correct:0,explanation:"CSRF (Cross-Site Request Forgery) tricks users into performing unwanted actions on websites where they are authenticated."},{id:18,question:"What is the difference between symmetric and asymmetric encryption?",options:["Symmetric uses one key, asymmetric uses two keys (public/private)","Symmetric is faster, asymmetric is slower","They are the same","Symmetric is for data, asymmetric is for passwords"],correct:0,explanation:"Symmetric encryption uses one key for both encryption and decryption, while asymmetric uses a public key for encryption and private key for decryption."},{id:19,question:"What is session hijacking?",options:["Stealing a user's session token to impersonate them","Taking control of a server","Encrypting session data","Backing up session information"],correct:0,explanation:"Session hijacking involves stealing a user's session token (often from cookies) to impersonate them and gain unauthorized access."},{id:20,question:"What is the OWASP Top 10?",options:["Top 10 programming languages","Top 10 most critical web application security risks","Top 10 firewalls","Top 10 encryption methods"],correct:1,explanation:"OWASP Top 10 is a standard awareness document representing the most critical security risks to web applications."}]};function sI(){const t=Al(),[e,n]=b.useState(null),[r,s]=b.useState(0),[i,o]=b.useState(null),[l,a]=b.useState(0),[u,h]=b.useState([]),[d,f]=b.useState(!1),[v,y]=b.useState(!1),[_,S]=b.useState({isOpen:!1,message:"",type:"info"}),m=e?Tp[e]:null,p=e?Rp[e]:[],g=p[r],x=p.length,C=x>0?(r+1)/x*100:0,I=A=>{v||o(A)},w=()=>{if(i===null){S({isOpen:!0,message:"Please select an answer before submitting",type:"warning"});return}const A=i===g.correct;A&&a(l+1),h([...u,{questionId:g.id,selected:i,correct:g.correct,isCorrect:A}]),y(!0)},N=()=>{r<x-1?(s(r+1),o(null),y(!1)):f(!0)},M=()=>{n(null),s(0),o(null),a(0),h([]),f(!1),y(!1)},O=A=>{n(A),s(0),o(null),a(0),h([]),f(!1),y(!1)},ke=()=>x>0?Math.round(l/x*100):0,T=()=>{const A=ke();return A>=90?{message:"Excellent! ",color:"cyber-green"}:A>=70?{message:"Great job! ",color:"cyber-blue"}:A>=50?{message:"Good effort! ",color:"cyber-yellow"}:{message:"Keep learning! ",color:"cyber-red"}};return c.jsx(Gl,{children:c.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:" Cybersecurity Quiz"}),c.jsx("p",{className:"text-gray-400",children:"Test your knowledge with interactive quizzes"})]}),!e&&!d&&c.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:Object.entries(Tp).map(([A,j])=>c.jsxs("button",{onClick:()=>O(A),className:`bg-slate-800 rounded-lg p-6 border-2 border-slate-700 transition-all text-left ${j.color==="cyber-blue"?"hover:border-cyber-blue":j.color==="cyber-red"?"hover:border-cyber-red":j.color==="cyber-green"?"hover:border-cyber-green":"hover:border-cyber-yellow"}`,children:[c.jsx("div",{className:"text-5xl mb-4",children:j.icon}),c.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:j.name}),c.jsxs("p",{className:"text-gray-400",children:[Rp[A].length," questions"]})]},A))}),e&&!d&&g&&c.jsxs("div",{className:"bg-slate-800 rounded-lg p-6 border border-slate-700",children:[c.jsxs("div",{className:"mb-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsxs("span",{className:"text-sm text-gray-400",children:["Question ",r+1," of ",x]}),c.jsxs("span",{className:"text-sm text-gray-400",children:["Score: ",l," / ",x]})]}),c.jsx("div",{className:"w-full bg-slate-700 rounded-full h-3",children:c.jsx("div",{className:`h-3 rounded-full transition-all ${m.color==="cyber-blue"?"bg-cyber-blue":m.color==="cyber-red"?"bg-cyber-red":m.color==="cyber-green"?"bg-cyber-green":"bg-cyber-yellow"}`,style:{width:`${C}%`}})})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:g.question}),c.jsx("div",{className:"space-y-3",children:g.options.map((A,j)=>{let q="border-slate-600 hover:border-cyber-blue",G="bg-slate-700";return v?j===g.correct?(q="border-cyber-green bg-cyber-green/20",G="bg-cyber-green/10"):j===i&&j!==g.correct&&(q="border-cyber-red bg-cyber-red/20",G="bg-cyber-red/10"):i===j&&(q="border-cyber-blue bg-cyber-blue/20",G="bg-cyber-blue/10"),c.jsx("button",{onClick:()=>I(j),disabled:v,className:`w-full text-left p-4 rounded-lg border-2 ${q} ${G} transition-all ${v?"cursor-default":"cursor-pointer hover:scale-[1.02]"}`,children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("span",{className:`text-lg font-semibold ${v&&j===g.correct?"text-cyber-green":v&&j===i&&j!==g.correct?"text-cyber-red":i===j?"text-cyber-blue":"text-gray-300"}`,children:[String.fromCharCode(65+j),"."]}),c.jsx("span",{className:"text-white",children:A}),v&&j===g.correct&&c.jsx("span",{className:"ml-auto text-cyber-green text-xl",children:""}),v&&j===i&&j!==g.correct&&c.jsx("span",{className:"ml-auto text-cyber-red text-xl",children:""})]})},j)})})]}),v&&c.jsxs("div",{className:`mb-6 p-4 rounded-lg border-2 ${i===g.correct?"border-cyber-green bg-cyber-green/10":"border-cyber-yellow bg-cyber-yellow/10"}`,children:[c.jsx("p",{className:"text-sm font-semibold text-white mb-2",children:i===g.correct?" Correct!":" Incorrect"}),c.jsx("p",{className:"text-gray-300 text-sm",children:g.explanation})]}),c.jsxs("div",{className:"flex gap-4",children:[v?c.jsx("button",{onClick:N,className:"flex-1 bg-cyber-green hover:bg-green-600 text-white font-semibold py-3 px-6 rounded-lg transition",children:r<x-1?"Next Question":"View Results"}):c.jsx("button",{onClick:w,className:"flex-1 bg-cyber-blue hover:bg-blue-600 text-white font-semibold py-3 px-6 rounded-lg transition",children:"Submit Answer"}),c.jsx("button",{onClick:M,className:"px-6 py-3 border border-slate-600 text-gray-300 rounded-lg hover:bg-slate-700 transition",children:"Restart"})]})]}),d&&c.jsxs("div",{className:"bg-slate-800 rounded-lg p-8 border border-slate-700 text-center",children:[c.jsx("div",{className:"text-6xl mb-4",children:""}),c.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Quiz Complete!"}),c.jsxs("div",{className:"mb-6",children:[c.jsxs("div",{className:"text-5xl font-bold text-cyber-blue mb-2",children:[l," / ",x]}),c.jsxs("div",{className:"text-2xl text-gray-400 mb-4",children:[ke(),"%"]}),c.jsx("div",{className:`text-xl font-semibold ${T().color==="cyber-green"?"text-cyber-green":T().color==="cyber-blue"?"text-cyber-blue":T().color==="cyber-yellow"?"text-cyber-yellow":"text-cyber-red"}`,children:T().message})]}),c.jsxs("div",{className:"bg-slate-900 rounded-lg p-6 mb-6 text-left",children:[c.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Review"}),c.jsx("div",{className:"space-y-2",children:u.map((A,j)=>{const q=p.find(G=>G.id===A.questionId);return c.jsx("div",{className:`p-3 rounded border-2 ${A.isCorrect?"border-cyber-green bg-cyber-green/10":"border-cyber-red bg-cyber-red/10"}`,children:c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx("span",{className:A.isCorrect?"text-cyber-green":"text-cyber-red",children:A.isCorrect?"":""}),c.jsx("span",{className:"text-white text-sm font-semibold",children:q==null?void 0:q.question})]})},j)})})]}),c.jsxs("div",{className:"flex gap-4 justify-center",children:[c.jsx("button",{onClick:M,className:"bg-cyber-blue hover:bg-blue-600 text-white font-semibold py-3 px-6 rounded-lg transition",children:"Try Another Category"}),c.jsx("button",{onClick:()=>t("/education"),className:"px-6 py-3 border border-slate-600 text-gray-300 rounded-lg hover:bg-slate-700 transition",children:"Back to Education"})]})]}),c.jsx(rI,{isOpen:_.isOpen,message:_.message,type:_.type,onClose:()=>S({..._,isOpen:!1})})]})})}function iI(){return c.jsx($w,{basename:"/learn/",children:c.jsxs("div",{className:"min-h-screen bg-cyber-dark flex flex-col",children:[c.jsx(Gw,{}),c.jsx("main",{className:"flex-grow",children:c.jsxs(Lw,{children:[c.jsx(It,{path:"/",element:c.jsx(gf,{})}),c.jsx(It,{path:"/defender",element:c.jsx(X1,{})}),c.jsx(It,{path:"/attacker",element:c.jsx(Z1,{})}),c.jsx(It,{path:"/education",element:c.jsx(eI,{})}),c.jsx(It,{path:"/quiz",element:c.jsx(sI,{})}),c.jsx(It,{path:"/services",element:c.jsx(tI,{})}),c.jsx(It,{path:"/challenges",element:c.jsx(nI,{})}),c.jsx(It,{path:"*",element:c.jsx(gf,{})})]})})]})})}La.createRoot(document.getElementById("root")).render(c.jsx(Bp.StrictMode,{children:c.jsx(iI,{})}));
